(self.modernJsonp=self.modernJsonp||[]).push([["62155"],{82118(e,s,l){var a;l.r(s),l.d(s,{default:()=>o});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};t.hash="64132b88edd48497e63c9ad85ae5ab66";let o=t},842227(e,s,l){l.r(s),l.d(s,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};a.hash="58c24e25a76e7a1c4533f3b07f490517";let t=a},578849(e,s,l){l.d(s,{A:()=>a});function a(e,s){return({CANCEL:s.bt("Cancel", "Cancel", "business.strings", undefined, true),LEARN_MORE:s.bt("Learn more", "Learn more", "business.strings", undefined, true),OK:s.bt("OK", "OK", "business.strings", undefined, true),DONE:s.bt("Done", "Done", "business.strings", undefined, true),NEXT:s.bt("Next", "Next", "business.strings", undefined, true),SAVE_ACTION:s.bt("Save", "Save", "business.strings", undefined, true),SAVE_NOUN:s.bt("Save", "Save", "business.strings", undefined, true),LOADING:s.bt("Loading", "Loading", "business.strings", undefined, true),ALL:s.bt("All", "All", "business.strings", undefined, true),EDIT:s.bt("Edit", "Edit", "business.strings", undefined, true),BACK:s.bt("Back", "Back", "business.strings", undefined, true),DELETE:s.bt("Delete", "Delete", "business.strings", undefined, true),NONE:s.bt("None", "None", "business.strings", undefined, true),IMPRESSIONS:s.bt("Impressions", "Impressions", "business.strings", undefined, true),SEARCH_ACTION:s.bt("Search", "Search", "business.strings", undefined, true),SEARCH_NOUN:s.bt("Search", "Search", "business.strings", undefined, true),ACTIVE:s.bt("Active", "Active", "business.strings", undefined, true),VIDEO:s.bt("Video", "Video", "business.strings", undefined, true),SAVES_ACTION:s.bt("Saves", "Saves", "business.strings", undefined, true),SAVES_NOUN:s.bt("Saves", "Saves", "business.strings", undefined, true),CONTINUE:s.bt("Continue", "Continue", "business.strings", undefined, true),NO:s.bt("No", "No", "business.strings", undefined, true),STATUS:s.bt("Status", "Status", "business.strings", undefined, true),PROMOTE:s.bt("Promote", "Promote", "business.strings", undefined, true),NAME:s.bt("Name", "Name", "business.strings", undefined, true),SUBMIT:s.bt("Submit", "Submit", "business.strings", undefined, true),PAUSED:s.bt("Paused", "Paused", "business.strings", undefined, true),SEE_MORE:s.bt("See more", "See more", "business.strings", undefined, true),FOLLOWING:s.bt("Following", "Following", "business.strings", undefined, true),CLOSE:s.bt("Close", "Close", "business.strings", undefined, true),INSTALL_TAG:s.bt("Install tag", "Install tag", "business.strings", undefined, true),PIN_CLICKS:s.bt("Pin clicks", "Pin clicks", "business.strings", undefined, true),CONVERSIONS:s.bt("Conversions", "Conversions", "business.strings", undefined, true),SEND:s.bt("Send", "Send", "business.strings", undefined, true),KEYWORDS:s.bt("Keywords", "Keywords", "business.strings", undefined, true),CREATE:s.bt("Create", "Create", "business.strings", undefined, true),REPORT_ACTION:s.bt("Report", "Report", "business.strings", undefined, true),REPORT_NOUN:s.bt("Report", "Report", "business.strings", undefined, true),BOARDS:s.bt("Boards", "Boards", "business.strings", undefined, true),PINS:s.bt("Pins", "Pins", "business.strings", undefined, true),LINK_CLICKS:s.bt("Link clicks", "Link clicks", "business.strings", undefined, true),COMPLETED:s.bt("Completed", "Completed", "business.strings", undefined, true),PENDING:s.bt("Pending", "Pending", "business.strings", undefined, true),SELECT:s.bt("Select", "Select", "business.strings", undefined, true),ARCHIVED:s.bt("Archived", "Archived", "business.strings", undefined, true),ACTIONS:s.bt("Actions", "Actions", "business.strings", undefined, true),PRODUCT_GROUPS:s.bt("Product groups", "Product groups", "business.strings", undefined, true),CUSTOM:s.bt("Custom", "Custom", "business.strings", undefined, true),CREATE_PIN:s.bt("Create Pin", "Create Pin", "business.strings", undefined, true),COUNTRY:s.bt("Country", "Country", "business.strings", undefined, true),VIDEO_VIEWS:s.bt("Video views", "Video views", "business.strings", undefined, true),REMOVE:s.bt("Remove", "Remove", "business.strings", undefined, true),EMAIL_ADDRESS:s.bt("Email address", "Email address", "business.strings", undefined, true),PINTEREST:s.bt("Pinterest", "Pinterest", "business.strings", undefined, true),PRIVACY_POLICY:s.bt("Privacy Policy", "Privacy Policy", "business.strings", undefined, true),OTHER:s.bt("Other", "Other", "business.strings", undefined, true),REQUIRED:s.bt("Required", "Required", "business.strings", undefined, true),CLICKS_ACTION:s.bt("Clicks", "Clicks", "business.strings", undefined, true),CLICKS_NOUN:s.bt("Clicks", "Clicks", "business.strings", undefined, true),ENGAGEMENT:s.bt("Engagement", "Engagement", "business.strings", undefined, true),NOT_NOW:s.bt("Not now", "Not now", "business.strings", undefined, true),ADS:s.bt("Ads", "Ads", "business.strings", undefined, true),ERROR:s.bt("Error", "Error", "business.strings", undefined, true),CAMPAIGNS:s.bt("Campaigns", "Campaigns", "business.strings", undefined, true),VISIT_ACTION:s.bt("Visit", "Visit", "business.strings", undefined, true),VISIT_NOUN:s.bt("Visit", "Visit", "business.strings", undefined, true),OUTBOUND_CLICKS:s.bt("Outbound clicks", "Outbound clicks", "business.strings", undefined, true),ADD:s.bt("Add", "Add", "business.strings", undefined, true),DESCRIPTION:s.bt("Description", "Description", "business.strings", undefined, true),SPEND_ACTION:s.bt("Spend", "Spend", "business.strings", undefined, true),SPEND_NOUN:s.bt("Spend", "Spend", "business.strings", undefined, true),CREATE_AD:s.bt("Create ad", "Create ad", "business.strings", undefined, true),EXPAND:s.bt("Expand", "Expand", "business.strings", undefined, true),MEASURE_YOUR_AD_PERFORMANCE:s.bt("Measure your ad performance", "Measure your ad performance", "business.strings", undefined, true),CREATE_BOARD:s.bt("Create board", "Create board", "business.strings", undefined, true),SELECTED:s.bt("Selected", "Selected", "business.strings", undefined, true),PEOPLE:s.bt("People", "People", "business.strings", undefined, true),YES:s.bt("Yes", "Yes", "business.strings", undefined, true),TOTAL:s.bt("Total", "Total", "business.strings", undefined, true),AUDIENCE_INSIGHTS:s.bt("Audience insights", "Audience insights", "business.strings", undefined, true),DISMISS:s.bt("Dismiss", "Dismiss", "business.strings", undefined, true),PHONE_NUMBER:s.bt("Phone number", "Phone number", "business.strings", undefined, true),TODAY:s.bt("Today", "Today", "business.strings", undefined, true),GOT_IT:s.bt("OK", "Got it", "business.strings", undefined, true),SUCCESS:s.bt("Success", "Success", "business.strings", undefined, true),AD_GROUPS:s.bt("Ad groups", "Ad groups", "business.strings", undefined, true)})[e]}},385336(e,s,l){l.d(s,{A:()=>j});var a=l(61163),t=l(859471),o=l(520434),i=l(743372),r=l(989457),n=l(693154),_=l(578849),c=l(538329),d=l(844255),u=l(168079),A=l(734696),g=l(653956),b=l(586733),h=l(172150),p=l(264986),f=l(801095);function P(e){return e.map(({id:e})=>e)}function m(e,s){return e.filter(({type:e})=>s.includes(e))}var C=l(562615);function z({boardCreateSource:e,selectedContacts:s,setSelectedContacts:l}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupAddCollaborator","/app/www/BoardCreateGlowup/BoardCreateGlowupAddCollaborator.tsx")},[]);let i=(0,t.useRef)(!1),{logContextEvent:r}=(0,b.o)();(0,u.A)(()=>(r({event_type:13,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}}),()=>{i.current||r({event_type:10521,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}})}));let{searchValue:n,allContacts:_,handleTextFieldChange:d,handleTypeaheadSuggestionsChange:A,handleCollaboratorClick:g}=(0,f.A)({selectedContacts:s,onSelectedContactsChange:l}),m=P(s),z=(0,c.A)();return(0,C.jsxs)(o.so,{direction:"column",gap:6,children:[(0,C.jsxs)(o.so,{direction:"column",gap:2,children:[(0,C.jsx)(o.KJ,{size:"200",children:z.bt("Collaborators can...", "Collaborators can...", "BoardCreateGlowupModal.collaborators.content.paragraph-1", undefined, true)}),(0,C.jsxs)(o.so,{direction:"column",gap:1,children:[(0,C.jsx)(o.KJ,{size:"400",weight:"bold",children:z.bt("Do (almost) everything", "Do (almost) everything", "BoardCreateGlowupModal.collaborators.content.paragraph-2", undefined, true)}),(0,C.jsx)(o.KJ,{size:"200",children:z.bt("Add, move or delete Pins and sections, and comment and react", "Add, move or delete Pins and sections, comment and react", "BoardCreateGlowupModal.collaborators.content.paragraph-3", undefined, true)})]})]}),(0,C.jsxs)(o.so,{direction:"column",gap:2,children:[(0,C.jsx)(o.KJ,{size:"200",children:z.bt("Invite someone on Pinterest", "Invite someone on Pinterest", "BoardCreateGlowupModal.collaborators.content.collaborator-picker-label", undefined, true)}),(0,C.jsx)(p.A,{onSearchChange:d,onTypeaheadSuggestionsChange:A,searchValue:n}),(0,C.jsx)(h.A,{contacts:_,itemPadding:2,onCollaboratorToggle:e=>{g(e),i.current=!0},selectedContactIds:m})]})]})}function S({labelId:e,label:s,subtext:l,children:i}){return(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModalField","/app/www/BoardCreateGlowup/BoardCreateGlowupModalField.tsx")},[]),(0,C.jsxs)(o.so,{alignItems:"center",children:[(0,C.jsx)(o.az,{flex:"grow",children:(0,C.jsxs)(o.JU,{htmlFor:e,children:[(0,C.jsx)(o.KJ,{size:"300",weight:"bold",children:s}),(0,C.jsx)(o.KJ,{color:"subtle",size:"200",children:l})]})}),i]})}var v=l(753771),T=l(457315),y=l(955170),w=l(720407),x=l(937975);let E=[96,58],I=["email","email_share_suggestion"],N=["user","user_share_suggestion"];var B=l(928802),k=l(679530),O=l(896575),R=l(849550);function j({boardCreateSource:e,images:s=[],initialValues:l,onBoardCreate:b,onClose:h,pinId:p}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModal","/app/www/BoardCreateGlowup/BoardCreateGlowupModal.tsx")},[]);let{suggestedBoardName:f,isResolved:j,completeExperience:D,dismissExperience:M}=(0,B.A)(1000673,0===s.length),[L,G]=(0,t.useState)(l?.boardName??""),K=(0,R.A)({pinId:p,skip:!!l?.boardName}),U=j?f??K:void 0,[F,V]=(0,t.useState)(void 0);U!==F&&(V(U),U&&G(U));let[J,Y]=(0,t.useState)(l?.privacy==="secret"),[q,H]=(0,t.useState)(),[W,$]=(0,t.useState)(!1),[X,Q]=(0,t.useState)(l?.collaborators??[]),Z=(0,c.A)(),ee=(0,i.A)(),{isRTL:es}=(0,d._8)(),el=(0,n.A)(),ea=el.isAuth?el?.avatar_color_index:void 0,et=!!q,eo=f??(l?.boardName||K),{state:ei,submitAction:er,isPending:en}=function({boardCreateSource:e,onBoardCreate:s,onRequestComplete:l,selectedCollaborators:a,auxData:o={}}){let i=(0,w.A)(),r=(0,y.mV)(),n=(0,y.lt)(),[_,c,d]=(0,t.useActionState)(async(t,_)=>{let c={name:_.get("boardName"),privacy:null!=_.get("isSecretBoard")?v.A.BoardPrivacy.SECRET:v.A.BoardPrivacy.PUBLIC,aux_data:{...o,source:e}};try{let e=await i({boardCreateOptions:c}),l=m(a,I),t=m(a,N),o=[];l.length>0&&o.push(r(e.id,P(l))),t.length>0&&o.push(n(e.id,P(t)));try{await Promise.all(o)}catch(e){(0,x.c)({name:"BoardCreateGlowupCollaboratorInviteError",message:(0,T.A)(e,"message")??"Failed to invite collaborators",message_detail:(0,T.A)(e,"message_detail"),stack:(0,T.A)(e,"stack")})}s(e)}catch(s){let e=(0,T.A)(s,"api_error_code");if(void 0!==e&&E.includes(e))return{serverBoardNameError:(0,T.A)(s,"message")};(0,x.c)({name:"BoardCreateGlowupFormBoardCreateError",message:(0,T.A)(s,"message")??"Failed to create board",message_detail:(0,T.A)(s,"message_detail"),stack:(0,T.A)(s,"stack")})}finally{l?.()}return{}},{});return{state:_,submitAction:c,isPending:d}}({boardCreateSource:e,onBoardCreate:e=>{e.name===f?D():M(),b(e)},onRequestComplete:()=>{$(!1)},selectedCollaborators:X,auxData:{...eo?{suggested_board_name:eo}:{}}}),e_=()=>{f&&M(),h()},{serverBoardNameError:ec}=ei;(0,u.A)(()=>{ee({event_type:13,view_type:5,view_parameter:87,component:13025,aux_data:{source:e}})});let ed=()=>!W&&ec?ec:et?q:void 0,[eu,eA]=(0,t.useState)("main"),eg=()=>{ee({event_type:101,view_type:5,view_parameter:87,component:13025,element:10592,aux_data:{source:e}}),(0,t.startTransition)(()=>{eA("collaborators")})},eb={main:{content:(0,C.jsxs)(o.so,{direction:"column",gap:6,children:[(0,C.jsx)(o.so,{justifyContent:"center",children:(0,C.jsx)(o.az,{paddingY:2,width:213,children:(0,C.jsx)(g.A,{boardKey:null,coverPinKey:null,images:s})})}),(0,C.jsx)(o.A_,{errorMessage:ed(),id:"board-name",label:Z.bt("Board name", "Board name", "BoardCreateGlowupModal.boardNameInput.label", undefined, true),name:"boardName",onChange:({value:e})=>{G(e);let s=(0,A.Yl)((0,k.D)(Z),e);s.length>0?H(s[0]):H(void 0),$(!0)},placeholder:Z.bt("Name your board", "Name your board", "BoardCreateGlowupModal.boardNameInput.placeholder", undefined, true),size:"lg",value:L}),(0,C.jsx)(S,{label:Z.bt("Make this board secret", "Make this board secret", "BoardCreateGlowupModal.privacySettings.label", undefined, true),labelId:"secret-board-toggle",subtext:Z.bt("Only you and collaborators will see this board", "Only you and collaborators will see this board", "BoardCreateGlowupModal.privacySettings.subtext", undefined, true),children:(0,C.jsx)(o.dO,{id:"secret-board-toggle",name:"isSecretBoard",onChange:({value:s})=>{Y(s),ee({event_type:s?106:107,view_type:5,view_parameter:87,component:13025,element:53,aux_data:{source:e}})},switched:J})}),(0,C.jsx)(S,{label:Z.bt("Group board", "Group board", "BoardCreateGlowupModal.groupBoardSettings.label", undefined, true),labelId:"invite-collaborators-button",subtext:Z.bt("Invite others to collaborate on this board", "Invite others to collaborate on this board", "BoardCreateGlowupModal.groupBoardSettings.subtext", undefined, true),children:X.length>0?(0,C.jsx)(o.az,{"data-test-id":"avatar-group",children:(0,C.jsx)(r.Z7,{addCollaborators:!0,collaborators:X.map(e=>({color:ea,name:e.full_name??"",src:e.image_medium_url??""})),onClick:eg,role:"button",size:"md"})}):(0,C.jsx)(o.K0,{accessibilityLabel:Z.bt("Invite collaborators", "Invite collaborators", "BoardCreateGlowupModal.groupBoardSettings.accessibilityLabel", undefined, true),bgColor:"secondary",icon:"person-plus",onClick:eg,size:"lg"})})]}),footer:(0,C.jsx)(O.A,{disabled:!!ed()||!L.trim(),form:"board-create-glowup-form",fullWidth:!0,onClick:()=>{ee({event_type:101,view_type:5,view_parameter:87,component:13025,element:249,aux_data:{source:e}})},size:"lg",submitting:en,text:Z.bt("Create", "Create", "BoardCreateGlowupModal.createButton", undefined, true)}),heading:Z.bt("Create a board", "Create a board", "BoardCreateGlowupModal.heading", undefined, true),accessibilityModalLabel:Z.bt("Create a board", "Create a board", "BoardCreateGlowupModal.accessibilityModalLabel", undefined, true)},collaborators:{content:(0,C.jsx)(z,{boardCreateSource:e,selectedContacts:X,setSelectedContacts:Q}),footer:null,heading:Z.bt("Invite collaborators", "Invite collaborators", "BoardCreateGlowupModal.collaborators.heading", undefined, true),accessibilityModalLabel:Z.bt("Invite collaborators", "Invite collaborators", "BoardCreateGlowupModal.collaborators.accessibilityModalLabel", undefined, true)}};return(0,C.jsx)(r.aF,{accessibilityModalLabel:eb[eu].accessibilityModalLabel,align:"center",footer:eb[eu].footer,heading:(0,C.jsx)(o.az,{position:"relative",children:(0,C.jsxs)(o.so,{alignItems:"center",justifyContent:"center",width:"100%",children:["main"!==eu&&(0,C.jsx)(o.az,{left:!es,position:"absolute",right:es,children:(0,C.jsx)(o.K0,{accessibilityLabel:Z.bt("Go back", "Go back", "BoardCreateGlowupModal.backButton.accessibilityLabel", undefined, true),icon:"chevron-left",onClick:()=>{(0,t.startTransition)(()=>{eA("main")})},size:"lg"})}),"main"===eu&&(0,C.jsx)(o.az,{left:es,position:"absolute",right:!es,children:(0,C.jsx)(o.K0,{accessibilityLabel:(0,_.A)("CLOSE",Z),icon:"close",onClick:e_,size:"lg"})}),(0,C.jsx)(o.so.Item,{flex:"grow",children:(0,C.jsx)(o._Y,{accessibilityLevel:1,align:"center",size:"600",children:eb[eu].heading})})]})}),onDismiss:e_,size:"md",children:(0,C.jsx)("form",{id:"board-create-glowup-form",onSubmit:e=>{e.preventDefault();let s=e.currentTarget;(0,t.startTransition)(async()=>{await er(new FormData(s))})},children:(0,C.jsx)(o.az,{minHeight:600,paddingX:6,paddingY:3,children:eb[eu].content})})})}},31973(e,s,l){l.d(s,{A:()=>d});var a=l(61163),t=l(859471),o=l(520434),i=l(586733),r=l(538329),n=l(542975),_=l(678358),c=l(562615);function d({accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,clientTrackingParams:d,dropdownRef:u,hideDropdown:A=!1,isSaved:g,onBoardDropdownClick:b,onSaveClick:h,promotedIsLeadAd:p,renderPinSaveTooltip:f,selectedItem:P,selectedTitle:m,showBoardFlyout:C,showPromoteBanner:z=!1,unselectedText:S,variant:v,viewParameter:T,viewType:y,surface:w}){(0,t.useEffect)(()=>{(0,a.A)("BoardSelectionDisplay","/app/www/common/PinBetterSave/BoardSelectionDisplay.tsx")},[]);let x=(0,r.A)(),[E,I]=(0,t.useState)(null),{closeupWithinMasonryEnabled:N}=(0,_._G)(),{logContextEvent:B}=(0,i.o)(),k=(0,t.useEffectEvent)(()=>{B({event_type:13,...y?{view_type:y}:Object.freeze({}),...T?{view_parameter:T}:Object.freeze({}),component:13282,element:14348,object_id_str:P?.boardId,clientTrackingParams:d,aux_data:{is_profile_save:P?.type==="boardless"}})});(0,t.useEffect)(()=>{P&&P?.type==="boardless"&&k()},[P]);let O=m||S,R="closeup"===v,j="media-viewer"===v,D="comparison"===v,M="VideoCarouselModule"===w,L=(0,t.useMemo)(()=>D?"inverse":j?C?"inverse":"default":C||!R?"light":"default",[R,C,j,D]),G=(0,t.useCallback)(({event:e})=>{b(e)},[b]),K=R?"transparent":"transparentInverse";K=j?"tertiarySemiTransparent":K,K=D?"transparentInverse":K;let U=g?x.bt("Saved", "Saved", "PinBetterSave.BoardSelection.SavedButton", undefined, true):x.bt("Save", "Save", "PinBetterSave.BoardSelection.SaveButton", undefined, true);return(0,c.jsxs)(o.az,{alignItems:j?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:N?0:void 0,width:"100%",children:[!A&&(0,c.jsx)(o.az,{"data-test-id":m?"board-selection-item-selected":"board-selection-placeholder",flex:"grow",width:"100%",children:(0,c.jsx)(o.$n,{ref:u,accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,accessibilityLabel:(0,n.$)(x.bt("Select a board to save to: {{ boardName }}", "Select a board to save to: {{ boardName }}", "PinBetterSave.BoardSelection.DropdownIcon", undefined, true),{boardName:O}),color:K,dataTestId:"PinBetterSaveDropdown",iconEnd:"chevron-down",onClick:G,selected:C,size:M?"sm":"lg",text:(0,c.jsx)(o.KJ,{color:L,lineClamp:1,overflow:"breakAll",size:M?"100":"300",weight:"bold",children:O})})}),(0,c.jsx)(o.az,{alignSelf:R?"center":"start","data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",children:(0,c.jsx)(o.PF,{ref:I,color:p||R&&z?"secondary":"primary",onClick:({event:e})=>{A?b(e):h(e)},selected:g,size:M?"sm":"lg",text:U})}),!!f&&!!E&&R&&f(E)]})}},896575(e,s,l){l.d(s,{A:()=>_});var a=l(61163),t=l(859471),o=l(520434),i=l(562615);let r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function n(){return(0,i.jsx)(o.az,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:800,width:"100%",children:(0,i.jsx)(o.az,{dangerouslySetInlineStyle:r,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function _({disabled:e,form:s,fullWidth:l,name:r,onClick:_,size:c,submitting:d,text:u}){return(0,t.useEffect)(()=>{(0,a.A)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,i.jsxs)(o.az,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[d&&(0,i.jsx)(n,{}),(0,i.jsx)(o.$n,{color:"primary",disabled:e||d,form:s,fullWidth:l,name:r,onClick:_,size:c,text:u,type:"submit"})]})}},849550(e,s,l){l.d(s,{A:()=>r});var a=l(859471),t=l(257300),o=l(601185),i=l(971289);function r({pinId:e,skip:s}){let[l,r]=(0,a.useState)(void 0),n=(0,i.qJ)(),_=!1;if(!s&&e){let e=(0,o.A)(),s=n&&e.checkExperiment("web_curation_sabr_board_title_suggestion").anyEnabled,l=!n&&e.checkExperiment("mweb_curation_sabr_board_title_suggestion").anyEnabled;_=s||l}let c=(0,a.useCallback)(async()=>{if(e){let s=await (0,t.A)({url:"/v3/pins/{pin}/board_title_suggestions/",urlParams:{pin:e}}),l=s.resource_response?.data?.[0]?.title;l&&r(l)}},[e]);return(0,a.useEffect)(()=>{_&&c()},[_,c]),l}},275953(e,s,l){l.d(s,{a:()=>K});var a,t,o=l(61163),i=l(859471),r=l(106386);l(825193);var n=l(979638),_=l(427471),c=l(243439),d=l(586733),u=l(900303),A=l(296221),g=l(250325),b=l(567176),h=l(693154),p=l(535273),f=l(662449),P=l(538329),m=l(74806),C=l(706466),z=l(987055),S=l(961403),v=l(310065),T=l(48180),y=l(878913),w=l(204398),x=l(96897),E=l(974694),I=l(520434),N=l(542975),B=l(570805),k=l(562615),O=l(96740);let R=";base64,";function j(e,s,l){var a;return(s="symbol"==typeof(a=function(e,s){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,s||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"))?a:a+"")in e?Object.defineProperty(e,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[s]=l,e}let D=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,M=(void 0!==a||(a=l(82118)).hash&&"64132b88edd48497e63c9ad85ae5ab66"!==a.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),L=(void 0!==t||(t=l(842227)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==t.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t);class G extends i.Component{constructor(...e){super(...e),j(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),j(this,"unmounted",!1),j(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),j(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),j(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),j(this,"safeSetState",(e,s)=>{this.unmounted?s&&s():this.setState(e,s)}),j(this,"getPinResource",(e,s,l)=>{let{color:a,clientTrackingParams:t,currentHistoryStack:o,pin:i,method:r,guid:n,additionalCreateFields:d,advertiser_id:u,urlPinInfo:A,shuffleAsset:g,viewerUserId:b}=this.props,h=i?.entityId?"RepinResource":"PinResource",p=i?.imageUrl||A?.imageUrl,f=i?.link||A?.link,P=!i?.entityId&&p?(0,z.A)(p,f):i?.images_orig?.url||"",{imageBase64:m,imageUrl:C}=function({pinImageBase64:e,imageUrl:s}){let l=s.startsWith("data:"),a=l?function(e){let s=e.indexOf(R);if(!(s<0))return e.slice(s+R.length)||void 0}(s):void 0,t=e??a;return l?{imageBase64:t,imageUrl:void 0}:{imageBase64:t,imageUrl:s}}({pinImageBase64:i?.imageBase64,imageUrl:P}),{trafficSource:S}=(0,c.A)(o??[],!!b),v={...d,board_id:s||"",color:a||"",clientTrackingParams:(0,T.A)(t,i?.trackingParams),description:this.state.pinDescription,guid:n||"",link:f,image_base64:m,image_url:C,is_buyable_pin:!1,is_removable:i?.promotedIsRemovable??void 0,media_upload_id:i?.mediaUploadId??void 0,method:r||"",pin_id:i?.entityId||"",section:l,title:i?.title||"",aux_data:{source:S},...u?{advertiser_id:u}:Object.freeze({}),...g?{shuffle_asset:g.entityId}:{}};if(!e){let{facebook:e,twitter:s}=this.state.sharing;v.share_facebook=e,v.share_twitter=s}return _.A.create(h,v)}),j(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),j(this,"makeCancelablePromise",e=>{let s=!1;return{promise:new Promise((l,a)=>{e.then(e=>s?a({isCanceled:!0}):l(e)),e.catch(e=>s?a({isCanceled:!0}):a(e))}),cancel(){s=!0}}}),j(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),j(this,"showBoardSavedToast",(e,s)=>{let{toastManagerContext:l,i18n:a}=this.props;l.showToast(({hideToast:l})=>{var t;return(0,k.jsx)(b.A,{duration:4e3,href:s?`${e.url??""}${s.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:l,text:(t=e.name,s?(0,B.A)(a.bt("Saved to {{sectionName}} in {{boardName}}", "Saved to {{sectionName}} in {{boardName}}", "Toast for successfully saving to a section within a board", undefined, true),{sectionName:s.title??"",boardName:t??""}):(0,k.jsx)(I.KJ,{children:(0,N.$w)({text:a.bt("Saved to <strong id=\"1\">{{ boardName }}</strong>", "Saved to <strong id=\"1\">{{ boardName }}</strong>", "PinToBoard.Lib.SavedToBoardToast.Message", undefined, true),markers:{boardName:t??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,k.jsx)(I.KJ,{weight:"bold",children:e})}})}))})})}),j(this,"dismissModal",()=>{let{resolve:e,newPin:s}=this.state;e&&e(s)}),j(this,"handleBoardSaveSuccess",(e,s,l,a)=>{let{action:t,saveToBoard:o,dispatch:i,pin:r,setCompletionPromise:n,shouldShowToast:_,showRepinAnimation:c,viewerUserId:d,urlPinInfo:u}=this.props;i((0,g.$O)());let A=e.resource_response.data,b=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(A);let t=this.state.pinDescription.match(D)||[];t.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(t)}});let o=()=>{_&&this.showBoardSavedToast(s,l),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n.bt("Board created", "Board created", "Modal title after creating a new board", undefined, true),newPin:A,resolve:e})};a?o():e(A)}));!a&&r?.entityId&&c(r.entityId),n(b),o(s),i((0,w.zY)({boardId:s.id,sectionId:l&&l.id,increment:1})),d&&(i((0,E.LR)({userId:d,increment:1})),i((0,g.$O)())),(l||!s.image_cover_url)&&(s.image_cover_url=r?.imageUrl||u?.imageUrl||r?.images_236x?.url||"",i((0,w.NQ)(s))),l&&i((0,m.Jt)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:l.id}})),r?.entityId&&i((0,x.J4)({id:r.entityId,nodeId:r.__id,boardId:s.id,title:s.name??"",url:s.url??"",localPinId:A.id}))}),j(this,"handleSaveToBoard",(e,s,l)=>{let{onToggleModal:a,shouldShowToast:t,mountAfterActionPlacement:o}=this.props;t&&!l&&(this.close(),this.showBoardSavedToast(e,s));let i="secret"===(e.privacy||""),r={board:s?s.id:e.id,state:O.J.LOADING};this.safeSetState({boardSavedTo:r},()=>{this.getPinResource(i,e.id,(s||{}).id).callCreate({showError:!1}).then(t=>{let i=t.resource_response.data,{clientTrackingParams:n,currentHistoryStack:_,pin:d,viewerUserId:u}=this.props,{trafficSource:A}=(0,c.A)(_??[],!!u);this.props.logContextEvent({aux_data:{source:A},clientTrackingParams:(0,T.A)(n,d?.trackingParams)??void 0,event_type:d?.entityId?5:1,object_id_str:i?.id||d?.entityId||"",view_type:52}),o("Save",{pin_id:d?.entityId,is_promoted:d?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(r,{state:O.J.SUCCESS})},()=>this.handleBoardSaveSuccess(t,e,s,l)),a&&!l&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.A.showError(e.message_detail||e.message);let s=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(s),a&&a(!1)})})}),j(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:s}=this.props;e?.entityId&&s(e.entityId)})}getModalTitle(e,s){if(e)if(s)return this.props.i18n.bt("Create section", "Create section", "modal title for create section pane", undefined, true);else return this.props.i18n.bt("Create board", "Create board", "Repin title for making a new board", undefined, true);return s?this.props.i18n.bt("Choose section", "Choose section", "modal title for choose section", undefined, true):this.props.i18n.bt("Choose board", "Choose board", "Repin title for choosing a board", undefined, true)}componentDidUpdate(e){let{boardWithSection:s,showCreate:l,pin:a,urlPinInfo:t,description:o}=this.props,i={};(a!==e.pin||t!==e.urlPinInfo||o!==e.description)&&(i.pinDescription=a?.description||t?.description||o||""),(l!==e.showCreate||s!==e.boardWithSection)&&(i.modalTitle=this.getModalTitle(l,!!s)),Object.keys(i).length>0&&this.safeSetState(i)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:s,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,setModalTitle:t,updateDescription:o}=this,{boardSavedTo:i,displaySuccessAnimation:r,modalTitle:n,newPin:_}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:i,color:c,dismissModal:s,displaySuccessAnimation:r,handleAbort:e,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,modalTitle:n,newPin:_,setModalTitle:t,updateDescription:o})}componentDidMount(){(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")}}function K({pinKey:e,shuffleAssetKey:s,...l}){(0,i.useEffect)(()=>{(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")},[]);let{saveToBoard:a}=(0,v.p)(),{logContextEvent:t}=(0,d.o)(),_=(0,y.y)()?.onPinCreate,c=(0,P.A)(),u=(0,n.zy)(),g=(0,h.A)(),b=(0,C.CG)(),m=(0,r.wA)(),{updateHeaderState:z}=(0,S.A)(),T=(0,r.d4)(({advertiser:e})=>g.isAuth&&e&&e.owner_user_id!==g.id?e.id:void 0),{previous:w}=(0,f.qD)(),x=(0,A.Ts)(),E=(0,f.V)(),I=(0,p.A)(M,e),N=(0,p.A)(L,s);return(0,k.jsx)(G,{...l,advertiser_id:T,currentHistoryStack:E,dispatch:m,i18n:c,location:u,logContextEvent:t,mountAfterActionPlacement:x,onPinCreate:_,pin:I,previousHistory:w,saveToBoard:a,showRepinAnimation:e=>z({type:"showRepinAnimation",payload:e}),shuffleAsset:N,toastManagerContext:b,viewerUserId:g.isAuth?g.id:void 0})}},96740(e,s,l){l.d(s,{J:()=>a});let a={LOADING:"loading",SUCCESS:"success"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/62155.en_GB-5f94b0d0a3c22f4d.mjs.map