(self.modernJsonp=self.modernJsonp||[]).push([["17487"],{277229(e,t,n){n.d(t,{A:()=>w});var r=n(859471),a=n(49241);let o=["1200x","736x","474x474","236x236"];var i=n(61163),s=n(979638),l=n(520434),c=n(538329),d=n(911127),u=n(562615);function p({buttonPadding:e,isDeleted:t,onUndoClick:n}){(0,r.useEffect)(()=>{(0,i.A)("LensHistoryItemDeleteOverlay","/app/common/react/components/Lens/History/LensHistoryItemDeleteOverlay.tsx")},[]);let a=(0,c.A)();return(0,u.jsx)(d.A,{children:(0,u.jsxs)(l.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--sema-color-background-wash-scrims-default)",backdropFilter:"blur(10px)",cursor:"default",opacity:+!!t,pointerEvents:t?"auto":"none",transition:"opacity 200ms linear"}},left:!0,padding:e??3,position:"absolute",right:!0,rounding:400,top:!0,children:[(0,u.jsx)(l.KJ,{color:"light",children:a.bt("Successfully deleted", "Successfully deleted", "lens.history.deleted.message", undefined, true)}),(0,u.jsx)(l.Rp,{onTap:n,children:(0,u.jsx)(l.Wu,{color:"light",children:a.bt("Undo", "Undo", "lens.history.undo", undefined, true)})})]})})}var h=n(324440);function m({buttonPadding:e,saveButtonOnly:t,hideSave:n,imageUrl:a,onDeleteClick:o}){(0,r.useEffect)(()=>{(0,i.A)("LensHistoryItemHoverOverlay","/app/common/react/components/Lens/History/LensHistoryItemHoverOverlay.tsx")},[]);let s=(0,c.A)();return(0,u.jsxs)(l.az,{alignItems:"end",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--sema-color-background-wash-image-tint)"}},direction:"column",display:"flex",left:!0,padding:e??3,position:"absolute",right:!0,rounding:400,top:!0,children:[!n&&(0,u.jsx)(h.A,{imageUrl:a,saveButtonOnly:t}),(0,u.jsx)(l.az,{marginTop:"auto",children:(0,u.jsx)(l.K0,{accessibilityLabel:s.bt("Delete", "Delete", "lens.history.image.delete", undefined, true),bgColor:"secondary",icon:"trash-can",onClick:o,size:"md"})})]})}var g=n(299374),_=n(586733),y=n(385800);function f({buttonPadding:e,height:t,hideSave:n,id:a,imageHeight:o,imageWidth:d,isDeleted:h,onDeleted:f,onUndoDelete:x,src:b,viewParameter:v,viewType:w,width:A}){(0,r.useEffect)(()=>{(0,i.A)("LensHistoryItem","/app/common/react/components/Lens/History/LensHistoryItem.tsx")},[]);let S=(0,c.A)(),j=(0,s.Zp)(),{logContextEvent:P}=(0,_.o)(),{setPreparedImage:k,setIsPopoverOpen:z}=(0,g.S)(),{hovered:I,onMouseEnter:E,onMouseLeave:T}=(0,y.A)(),C=(0,r.useCallback)(async()=>{P({aux_data:{url:b},event_type:101,view_parameter:v,view_type:w});try{let e=await fetch(b),t=await e.blob(),n=new File([t],"lens-history-image",{type:t.type});k({file:n,src:URL.createObjectURL(n),apiUrl:b,width:d,height:o}),P({aux_data:{url:b},event_type:6707,view_parameter:v,view_type:w}),z(!1),j("/lens-search/")}catch{}},[P,b,v,w,k,d,o,z,j]),L=(0,r.useCallback)(({event:e})=>{e.stopPropagation(),f(a)},[a,f]),B=(0,r.useCallback)(({event:e})=>{e.stopPropagation(),x(a)},[a,x]),R=(A??d)/(t??o);return(0,u.jsx)(l.Rp,{onTap:C,children:(0,u.jsxs)(l.az,{dangerouslySetInlineStyle:{__style:{aspectRatio:R}},onMouseEnter:E,onMouseLeave:T,overflow:"hidden",position:"relative",rounding:400,children:[(0,u.jsx)(l.n1,{height:"100%",rounding:400,width:"100%",children:(0,u.jsx)(l._V,{alt:S.bt("Lens history image", "Lens history image", "lens.history.image.alt", undefined, true),fit:"cover",naturalHeight:o,naturalWidth:d,src:b})}),I&&!h&&(0,u.jsx)(m,{buttonPadding:e,hideSave:n,imageUrl:b,onDeleteClick:L}),(0,u.jsx)(p,{buttonPadding:e,isDeleted:h,onUndoClick:B})]})})}var x=n(257300),b=n(168079),v=n(430705);function w({buttonPadding:e,height:t,hideSave:n,pageSize:i,viewParameter:s,viewType:l,width:c}){let{data:d,isFetching:p,fetchMore:h,isAtEnd:m,isLoaded:g}=(0,v.A)({name:"ApiResource",options:{url:a.YU,data:{fields:"id, image_urls, image_sizes",...void 0!==i&&{page_size:i}}},noCache:!0}),y=(0,r.useMemo)(()=>d??[],[d]),{deletedIds:w,onDeleted:A,onUndoDelete:S}=function(){let{logContextEvent:e}=(0,_.o)(),[t,n]=(0,r.useState)(new Set),o=(0,r.useRef)(new Set),i=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{o.current=t},[t]),(0,b.A)(()=>{let t=()=>{if(i.current||0===o.current.size)return;i.current=!0;let t=Array.from(o.current);(async()=>{try{await (0,x.A)({url:a.YU,method:"DELETE",data:{lens_history_ids:t}}),t.forEach(()=>{e({event_type:15657,view_parameter:a.Gj,view_type:a.rm})})}catch(e){}})()},n=()=>t();return window.addEventListener("beforeunload",n),()=>{t(),window.removeEventListener("beforeunload",n)}}),{deletedIds:t,onDeleted:(0,r.useCallback)(e=>{n(t=>new Set(t).add(e)),i.current=!1},[]),onUndoDelete:(0,r.useCallback)(e=>{n(t=>{let n=new Set(t);return n.delete(e),n}),i.current=!1},[])}}(),j=(0,r.useCallback)(r=>{let{id:a}=r,i=function(e){let{image_urls:t,image_sizes:n}=e;if(!t||!n)return null;let r=o.find(e=>t[e]&&n[e]);if(!r)return null;let a=t[r],i=n[r];if(!a||!i||"string"!=typeof a)return null;let{height:s,width:l}=i;return"number"!=typeof s||"number"!=typeof l||0===l||0===s?null:{src:a,height:s,width:l}}(r);if(!i||!a)return null;let{height:d,width:p,src:h}=i,m=w.has(a);return(0,u.jsx)(f,{buttonPadding:e,height:t,hideSave:n,id:a,imageHeight:d,imageWidth:p,isDeleted:m,onDeleted:A,onUndoDelete:S,src:h,viewParameter:s,viewType:l,width:c})},[e,w,t,n,A,S,s,l,c]);return{items:y,isFetching:p,fetchMore:h,isAtEnd:m,isLoaded:g,deletedIds:w,renderItem:j}}},324440(e,t,n){n.d(t,{A:()=>S});var r=n(61163),a=n(859471),o=n(520434),i=n(49241),s=n(911127),l=n(385336),c=n(400235),d=n(562615);function u({anchorRef:e,board:t,onBoardSelect:n,onDismiss:u,popoverId:p,urlPinInfo:h}){(0,a.useEffect)(()=>{(0,r.A)("BoardPicker","/app/common/react/components/Lens/Save/BoardPicker.tsx")},[]);let[m,g]=(0,a.useState)(!1),[_,y]=(0,a.useState)(""),f=(0,a.useCallback)(e=>{let{id:t,name:r,url:a}=e;n({id:t,name:r,url:a}),u()},[n,u]),x=(0,a.useCallback)(e=>{if(!e.boardId)return;let{boardId:t,title:r,url:a}=e;n({id:t,name:r??void 0,url:a??void 0}),u()},[n,u]),b=(0,a.useCallback)(e=>{y(e?.title??""),g(!0)},[]),v=(0,a.useCallback)(()=>{g(!1),u()},[u]);return(0,d.jsx)(o.Wd,{zIndex:new o.K5([i.B4]),children:m?(0,d.jsx)(l.A,{boardCreateSource:"board_picker",images:[{url:h.imageUrl,name:""}],initialValues:{boardName:_},onBoardCreate:f,onClose:v}):(0,d.jsx)(o.AM,{anchor:e.current,id:p,idealDirection:"down",onDismiss:u,positionRelativeToAnchor:!1,size:"xl",children:(0,d.jsx)(s.A,{children:(0,d.jsx)(c.cC,{displayShortlistMostRecentBoard:!0,onBoardCreate:b,onItemChosen:x,selectedItem:t,showCreateBoardButton:!0,showFlyoutSaveButton:!1,showSaveToProfile:!0})})})})}var p=n(299374),h=n(257300),m=n(567176),g=n(538329),_=n(706466),y=n(409652),f=n(106386),x=n(168079),b=n(275953);function v({board:e,onSaveComplete:t,urlPinInfo:n}){return(0,a.useEffect)(()=>{(0,r.A)("SaveHandler","/app/common/react/components/Lens/Save/SaveHandler.tsx")},[]),(0,d.jsx)(b.a,{action:"create",description:"",method:"lens",pinKey:null,setCompletionPromise:t,shuffleAssetKey:null,urlPinInfo:n,children:({handleSaveToBoard:t})=>(0,d.jsx)(w,{board:e,handleSaveToBoard:t})})}function w({board:e,handleSaveToBoard:t}){return(0,x.A)(()=>{t({...e,type:"board"})}),null}var A=n(31973);function S({imageUrl:e,saveButtonOnly:t=!1}){(0,a.useEffect)(()=>{(0,r.A)("LensBetterSave","/app/common/react/components/Lens/Save/LensBetterSave.tsx")},[]);let n=(0,a.useId)(),i=(0,a.useRef)(null),s=(0,a.useRef)(null),l=t?i:s,[c,x]=(0,a.useState)(!1),{isSaved:b,board:w,urlPinInfo:S,saveImageToBoard:j,handleUnsave:P,renderPendingSave:k}=function({imageUrl:e}){let t={description:"",imageUrl:e,link:""},n=function(){let e=(0,f.d4)(e=>e.mostRecentBoard);if(e)return{id:e.id,name:e.name,url:e.url}}(),{isSaved:r,savedBoard:o,handleBoardSaveComplete:i,handleUnsave:s,setOptimisticSave:l}=function({imageUrl:e}){let t=(0,g.A)(),n=(0,_.CG)(),{getSavedImageState:r,setSavedImageState:o,clearSavedImageState:i}=(0,p.S)(),s=r(e),[l,c]=(0,a.useState)(!!s),[u,f]=(0,a.useState)(s?.pinId??null),[x,b]=(0,a.useState)(s?.board),v=(0,a.useCallback)(async(r,a)=>{await (0,h.A)({url:"/v3/pins/{pin}/",urlParams:{pin:r},method:"DELETE"}),c(!1),f(null),b(void 0),i(e);let o=a?t.bt("Removed from your board.", "Removed from your board!", "LensBetterSave.RemovedFromBoard", undefined, true):t.bt("Pin removed.", "Pin removed!", "LensBetterSave.PinRemoved", undefined, true);n.showToast(({hideToast:e})=>(0,d.jsx)(m.A,{dataTestId:"lens-better-save-removed-toast",onHide:e,text:o}))},[i,t,e,n]),w=(0,a.useCallback)(async()=>{u&&await v(u,!!x?.id)},[u,x?.id,v]),A=(0,a.useCallback)(e=>{c(!0),b(e)},[]);return{isSaved:l,savedBoard:x,handleBoardSaveComplete:(0,a.useCallback)(async t=>{let{id:r,board:a}=await t.promise,{id:i,name:s,url:l}=a,u={id:i,name:s,url:l};c(!0),f(r),b(u),o(e,{pinId:r,board:u}),n.showToast(({hideToast:t})=>(0,d.jsx)(y.A,{boardName:s,boardUrl:l,onHide:t,onUndo:async()=>{t(),await v(r,!!i)},pinImageUrl:e}))},[e,o,n,v]),handleUnsave:w,setOptimisticSave:A}}({imageUrl:e}),{setPendingBoard:c,renderPendingSave:u}=function({urlPinInfo:e,onBoardSaveComplete:t}){let[n,r]=(0,a.useState)(null),o=(0,a.useCallback)(()=>n?(0,d.jsx)(v,{board:n,onSaveComplete:async e=>{await t(e),r(null)},urlPinInfo:e}):null,[n,t,e]);return{setPendingBoard:r,renderPendingSave:o}}({urlPinInfo:t,onBoardSaveComplete:i});return{isSaved:r,board:o??n,urlPinInfo:t,saveImageToBoard:(0,a.useCallback)(e=>{l(e),c(e)},[l,c]),handleUnsave:s,renderPendingSave:u}}({imageUrl:e}),z=(0,a.useCallback)(e=>{(e.stopPropagation(),t&&b)?P():x(e=>!e)},[t,b,P]),I=(0,a.useCallback)(async e=>{(e.stopPropagation(),b)?P():!w?.id||t?x(!0):j(w)},[w,t,b,P,j]);return(0,d.jsxs)(o.az,{ref:i,"data-test-id":"lens-better-save",width:"100%",children:[(0,d.jsx)(A.A,{accessibilityControls:n,accessibilityExpanded:c,accessibilityHaspopup:!0,dropdownRef:s,hideDropdown:t,isSaved:b,onBoardDropdownClick:z,onSaveClick:I,promotedIsLeadAd:!1,selectedTitle:w?.name,showBoardFlyout:c,unselectedText:"Select",variant:"pin"}),c&&(0,d.jsx)(u,{anchorRef:l,board:w,onBoardSelect:j,onDismiss:()=>x(!1),popoverId:n,urlPinInfo:S}),k()]})}},49241(e,t,n){n.d(t,{B4:()=>g,CR:()=>u,Dj:()=>x,Et:()=>f,Gj:()=>l,OV:()=>m,SK:()=>i,SY:()=>d,UQ:()=>b,YU:()=>o,_W:()=>h,b0:()=>w,cr:()=>v,eN:()=>c,g0:()=>y,hU:()=>A,nb:()=>_,qm:()=>p,rm:()=>s});var r=n(520434),a=n(584342);let o="/v3/visual_search/lens/history/",i="/upload-lens-image-history/",s=119,l=4054,c=48,d=15075,u=119,p=130,h=540,m=768,g=new r.K5([a.Bf]),_="CAMERA_GALLERY",y="image/jpeg",f=.8,x=1200,b="/v3/visual_search/lens/upload/",v="IMAGE_URL",w="/v3/visual_search/lens/search/",A="/upload-lens-image/"},910409(e,t,n){n.d(t,{A:()=>a});let r=[{magicBytes:"Qk",mimeType:"image/bmp"},{magicBytes:"R0lGOD",mimeType:"image/gif"},{magicBytes:"/9j/",mimeType:"image/jpeg"},{magicBytes:"iVBORw0KGgo",mimeType:"image/png"},{magicBytes:"SUkq",mimeType:"image/tiff"},{magicBytes:"TU0A",mimeType:"image/tiff"},{magicBytes:"UklGR",mimeType:"image/webp"}];function a(e){let t,n=r.find(({magicBytes:t})=>e.startsWith(t)),a=n?.mimeType??"image/png";try{t=atob(e)}catch{throw Error("Invalid base64 encoding")}return new File([new Blob([Uint8Array.from(t,e=>e.charCodeAt(0))],{type:a})],"lens-base64-image",{type:a})}},350539(e,t,n){n.d(t,{i6:()=>l,o_:()=>c});var r=n(35458),a=n(910409),o=n(401691),i=n(484409);let s=r.z.object({dataUrl:r.z.string().startsWith("data:"),apiUrl:r.z.string(),imageSignature:r.z.string().optional(),width:r.z.number(),height:r.z.number()});async function l(e){try{var t;let n={dataUrl:await (t=e.file,new Promise((e,n)=>{let r=new FileReader;r.onload=()=>e(r.result),r.onerror=()=>n(r.error),r.readAsDataURL(t)})),apiUrl:e.apiUrl,imageSignature:e.imageSignature,width:e.width,height:e.height};(0,i.V2)().setItem(o.Wy,n)}catch{}}function c(){try{let e=(0,i.V2)().getItem(o.Wy),t=s.safeParse(e);if(!t.success)return d(),null;let{dataUrl:n,apiUrl:r,imageSignature:l,width:c,height:u}=t.data,p=n.split(",")[1];if(!p)return d(),null;let h=(0,a.A)(p),m=URL.createObjectURL(h);return{file:h,src:m,apiUrl:r,imageSignature:l,width:c,height:u}}catch{return d(),null}}function d(){try{(0,i.V2)().removeItem(o.Wy)}catch{}}},485647(e,t,n){n.d(t,{A:()=>c});var r=n(61163),a=n(859471),o=n(520434),i=n(154508),s=n(678358),l=n(562615);function c({actionButton:e,collapsed:t,disabled:n,displayViewState:c,forceTappableHeader:d,headerHeight:u,headerPaddingX:p,headerPreview:h,heading:m,icon:g="chevron-down",onClick:_,showArrow:y,surface:f}){(0,a.useEffect)(()=>{(0,r.A)("CollapsableHeader","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CollapsableHeader.tsx")},[]);let{closeupWithinMasonryEnabled:x,peekCloseupEnabled:b,viewportSize:v}=(0,s._G)();if(!d&&null===c){let e,t;return e=(0,i.Kd)({peekCloseupEnabled:b,viewportSize:v,surface:f}),t=(0,l.jsx)(o._Y,{accessibilityLevel:2,align:"start",id:"comments-heading",size:e?"300":"400",children:m}),e?(0,l.jsx)(o.az,{marginBottom:4,children:t}):t}let w=(0,l.jsx)(o.az,{marginBottom:!t&&b?4:void 0,children:(0,l.jsxs)(o.so,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:u,justifyContent:"between",children:[(0,l.jsx)(o.so.Item,{flex:"shrink",children:(0,l.jsx)(o._Y,{accessibilityLevel:2,align:"start",color:n?"disabled":"default",id:"comments-heading",size:"300",children:m})}),(0,l.jsx)(o.so.Item,{flex:"shrink",children:(0,l.jsxs)(o.so,{alignItems:"center",direction:"row",gap:{row:1,column:0},children:[t&&h,(y||x)&&(0,l.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{transform:t?"rotate(0deg)":"rotate(180deg)",transition:"all 600ms cubic-bezier(.25,1,.5,1)"}},opacity:100*!!y,children:(0,l.jsx)(o.In,{accessibilityLabel:"",color:!y||n?"disabled":"default",dataTestId:"collapse-button",icon:g})})]})}),e&&(0,l.jsx)(o.so.Item,{flex:"grow",children:(0,l.jsx)(o.so,{justifyContent:"end",children:e})})]})});return(0,l.jsx)(o.az,{paddingX:p,children:_?(0,l.jsx)(o.Rp,{disabled:!y||n,onTap:_,children:w}):w})}},655352(e,t,n){n.d(t,{A:()=>r});let r='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},642477(e,t,n){n.d(t,{A:()=>a});var r=n(844255);let a=function(){let{country:e,isBot:t,isAuthenticated:n,locale:a}=(0,r._8)(),o="en"===a.slice(0,2);return t||!n&&o&&"US"===e}},24086(e,t,n){n.d(t,{A:()=>a});var r=n(859471);let a=function(e,t){let n=(0,r.useRef)(e),a=(0,r.useRef)(void 0),o=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>()=>{a.current&&clearTimeout(a.current)},[t]);let i=(0,r.useCallback)((...e)=>{o.current=e,a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>{n.current(...e),o.current=void 0},t)},[t]);return i.flush=(0,r.useCallback)(()=>{if(a.current&&(clearTimeout(a.current),a.current=void 0),o.current){let e=o.current;return o.current=void 0,n.current(...e)}},[]),i.cancel=(0,r.useCallback)(()=>{a.current&&(clearTimeout(a.current),a.current=void 0),o.current=void 0},[]),i}},353614(e,t,n){n.d(t,{A:()=>r});function r(e,t){return e.reduce((e,n)=>{let r="function"==typeof t?t(n):n[t];return r in e||(e[r]=[]),e[r].push(n),e},{})}},640992(e,t,n){n.d(t,{A:()=>a});var r=n(859471);function a(e){let{animationData:t,autoplay:a,initialSegment:o,loop:i,onComplete:s,onConfigReady:l,onDataFailed:c,onDataReady:d,onDestroy:u,onDOMLoaded:p,onEnterFrame:h,onLoadedImages:m,onLoopComplete:g,onSegmentStart:_}=e,[y,f]=(0,r.useState)(null),[x,b]=(0,r.useState)(!1),v=(0,r.useRef)(null),w=(0,r.useRef)(null),A=async()=>{f(await n.e("70993").then(n.t.bind(n,159976,23)))};return(0,r.useEffect)(()=>{A()},[]),(0,r.useEffect)(()=>{if(!w.current||!y||!t||!t.w||!t.h)return;v.current?.destroy();let n={...e,container:w.current};v.current=y.loadAnimation(n),b(!!v.current)},[w,v,t,y,e]),(0,r.useEffect)(()=>{v.current&&(v.current.loop=!!i,i&&v.current.isPaused&&v.current.play())},[i]),(0,r.useEffect)(()=>{v.current&&(v.current.autoplay=!!a)},[a]),(0,r.useEffect)(()=>{!v.current||(o?Array.isArray(o)&&o.length&&((v.current.currentRawFrame<o[0]||v.current.currentRawFrame>o[1])&&(v.current.currentRawFrame=o[0]),v.current.setSegment(o[0],o[1])):v.current.resetSegments(!1))},[o]),(0,r.useEffect)(()=>{if(!v.current||!x)return()=>{};let e=[{name:"complete",handler:s},{name:"loopComplete",handler:g},{name:"enterFrame",handler:h},{name:"segmentStart",handler:_},{name:"config_ready",handler:l},{name:"data_ready",handler:d},{name:"data_failed",handler:c},{name:"loaded_images",handler:m},{name:"DOMLoaded",handler:p},{name:"destroy",handler:u}].filter(e=>null!=e.handler).map(e=>(v.current?.addEventListener(e.name,e.handler),()=>{v.current?.removeEventListener(e.name,e.handler)}));return()=>{e.forEach(e=>e())}},[x,s,g,h,_,l,d,c,m,p,u]),{animationContainerRef:w,play:()=>{v.current?.play()},stop:()=>{v.current?.stop()},pause:()=>{v.current?.pause()},setSpeed:e=>{v.current?.setSpeed(e)},goToAndStop:(e,t)=>{v.current?.goToAndStop(e,t)},goToAndPlay:(e,t)=>{v.current?.goToAndPlay(e,t)},setDirection:e=>{v.current?.setDirection(e)},playSegments:(e,t)=>{v.current?.playSegments(e,t)},setSubframe:e=>{v.current?.setSubframe(e)},getDuration:e=>v.current?.getDuration(e),destroy:()=>{v.current?.destroy()},animationLoaded:x,animationItem:v.current}}},16917(e,t,n){n.d(t,{A:()=>k});var r=n(17775),a=n(564954),o=n(385982),i=n(472723),s=n(746904),l=n(355426),c=n(54240),d=n(752643),u=n(441496),p=n(449344),h=n(2354);let m="stopwatch_v2",g=(0,r.lo)(m),_=new Map,y=[],f=[],x=!1;function b(){let e=performance.now();_.forEach((t,n)=>{e-t.startTimestamp>t.maxDuration&&(g(`Auto-aborting stale stopwatch ${n} after ${t.maxDuration}ms`),P(n,"exceeded_max_duration"))})}function v(e,t,n){performance.mark(`${m}:${e}:${t}`,n?{startTime:n}:void 0)}function w(e,t,n,r){performance.measure(`${m}:${e}:${t}`,n,r)}function A(e){let t=`${m}:${e}:`,n=[`${t}start`,`${t}end`,`${t}subspan:`];return y.filter(e=>e.name.startsWith(t)&&!n.some(t=>e.name.startsWith(t))).map(e=>({label:e.name.slice(t.length),timestamp:e.startTime}))}function S(e,t){let n=`${m}:${e}:subspan:`;return f.filter(e=>e.name.startsWith(n)).map(e=>({name:e.name.slice(n.length),id:(0,c.A)(),parentId:t,startTime:e.startTime,endTime:e.startTime+e.duration,annotationMap:{},binaryAnnotationMap:{}}))}function j(e){let t=`${m}:${e}:`;try{y=y.filter(e=>!e.name.startsWith(t)),f=f.filter(e=>!e.name.startsWith(t))}catch{}let n=_.get(e);n?.resourceObserver?.disconnect(),_.delete(e)}function P(e,t){if(!(0,d.A)())return;let n=_.get(e);if(!n)return void(0,u.J6)({errorName:"stopwatch_not_found",pwtName:e,errorDetailsTag:"abort",version:"2"});g(`Aborted ${e}: ${t}`);let r=performance.now(),{startTimestamp:o}=n,s=(0,c.A)(),m=(0,h.tQ)(),y={type:"stopwatch",name:e},f={type:"ABORT",traceId:s,startTime:o,endTime:r,spans:S(e,s),annotationMap:(0,l.A)(A(e)),binaryAnnotationMap:(0,a.jp)({metricId:y,pwtStaticContext:m,binaryAnnotations:n.binaryAnnotations,performanceResourceTimings:n.resourceBuffer,type:"ABORT",stopwatchVersion:2}),reason:t??"unknown"};(0,i.A)({metricId:y,pwtStaticContext:m,result:f,sampleRate:n.sampleRate,stopwatchVersion:2}),(0,u.HF)({abortReason:t??"unknown",pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),j(e)}function k(e,t={}){let{sampleRate:n,maxDuration:r}=t;return{name:e,start:t=>(function(e,t={}){if(!(0,d.A)())return;!function(){if(x||!(0,d.A)())return;x=!0;let e=`${m}:`;try{new PerformanceObserver(t=>{let n=t.getEntries().filter(t=>t.name.startsWith(e));y.push(...n)}).observe({type:"mark",buffered:!0}),new PerformanceObserver(t=>{let n=t.getEntries().filter(t=>t.name.startsWith(e));f.push(...n)}).observe({type:"measure",buffered:!0}),setInterval(b,1e4)}catch{}}(),_.has(e)&&(g(`Stopwatch ${e} already active, aborting previous`),P(e,"new_stopwatch_started"));let n=t.startTime??performance.now(),{observer:r,buffer:a}=function(){let e=[];if(!(0,d.A)())return{observer:null,buffer:e};try{let t=new PerformanceObserver(t=>{if(e.push(...t.getEntries()),e.length>5e3){let t=e.length-5e3;e.splice(0,t),(0,u.pI)({eventName:"resourceBufferTruncated.v2",tags:{dropped:t,remaining:5e3}}),g("Resource buffer truncated",{dropped:t,remaining:5e3})}});return t.observe({type:"resource",buffered:!1}),{observer:t,buffer:e}}catch{return{observer:null,buffer:e}}}();_.set(e,{sampleRate:t.sampleRate??1,binaryAnnotations:{},resourceObserver:r,resourceBuffer:a,startTimestamp:n,maxDuration:t.maxDuration??6e4}),v(e,"start",n),(0,u.Lc)({pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),g(`Started ${e}`)})(e,{...t,sampleRate:n,maxDuration:r}),stop:t=>(function(e,t){var n;let r;if(!(0,d.A)())return;let y=_.get(e);if(!y)return void(0,u.J6)({errorName:"stopwatch_not_found",pwtName:e,errorDetailsTag:"stop",version:"2"});let f=t??performance.now();v(e,"end",f);let{startTimestamp:x}=y;w(e,"duration",`${m}:${e}:start`,`${m}:${e}:end`);let b=(0,c.A)(),P=(0,h.tQ)(),k={type:"stopwatch",name:e},z={type:"COMPLETE",metricId:k,traceId:b,startTime:x,endTime:f,spans:[...S(e,b),...(n=y.resourceBuffer,[{name:"network_resources",id:r=(0,c.A)(),parentId:b,startTime:x,endTime:f,annotationMap:{},binaryAnnotationMap:{}},...n.filter(e=>e.responseEnd>0&&e.startTime>=x&&e.responseEnd<=f).map(e=>(0,s.A)((0,o.B)(e,[]),r)).filter(Boolean)])],annotationMap:(0,l.A)(A(e)),binaryAnnotationMap:(0,a.jp)({metricId:k,pwtStaticContext:P,binaryAnnotations:y.binaryAnnotations,performanceResourceTimings:y.resourceBuffer,type:"COMPLETE",stopwatchVersion:2})};g(`Stopped ${e}`,{duration:f-x}),(0,i.A)({metricId:k,pwtStaticContext:P,result:z,sampleRate:y.sampleRate,stopwatchVersion:2}),(0,u.ed)({pwtName:e,annotateExperiments:(0,p.e0)(),version:"2"}),j(e)})(e,t),abort:t=>P(e,t),annotate:t=>{(0,d.A)()&&_.has(e)&&(v(e,t),g(`${e} annotation: ${t}`))},binaryAnnotate:(t,n,r)=>{let a;(a=_.get(e))&&(a.binaryAnnotations={...a.binaryAnnotations,[t]:{value:n,type:r}},g(`${e} binary: ${t}=${String(n)}`))},subspanStart:t=>{(0,d.A)()&&_.has(e)&&(v(e,`subspan:${t}:start`),g(`${e} subspan start: ${t}`))},subspanStop:t=>(function(e,t){if((0,d.A)()&&_.has(e)){v(e,`subspan:${t}:end`);try{w(e,`subspan:${t}`,`${m}:${e}:subspan:${t}:start`,`${m}:${e}:subspan:${t}:end`),g(`${e} subspan stop: ${t}`)}catch{g(`${e} subspan stop failed: ${t}`)}}})(e,t),isActive:()=>_.has(e)}}},782310(e,t,n){n.d(t,{A:()=>w});var r=n(859471),a=n(987628),o=n(1807),i=n(17775),s=n(88894),l=n(564954),c=n(385982),d=n(472723),u=n(746904),p=n(851116),h=n(355426),m=n(772807),g=n(54240),_=n(161235);let y=["closeup_dweb_blended_ui_organic","web_pwt_grid_profiler_v2"],f=(0,i.lo)("PwtStopwatch"),x=(e,t)=>{if(_.A){if("start"===t.type&&!e.isTiming){let{name:n,startTime:r,navigationType:a}=t;return(0,o.DM)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof r?r:_.A.now(),metricId:{type:"stopwatch",name:n,navigationType:a},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming)if(t.bypassIsTimingCheck)f("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return f("ignoring action - stopwatch is not actively timing",t),(0,o.DM)(`WARN.${n}.noTiming.${t.type}`),e}if("annotate"===t.type){let n=_.A.now();return f(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return f(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:t.value,type:t.annotationType}}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:r}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n,type:r}}}};{let a=e.binaryAnnotations[t.name].value||0;return f(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(a)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n?t.operation(a,n):a,type:r}}}}}}if("addSubspan"===t.type){f(`adding subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&f(`WARNING: adding duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&f(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let r=0;return t.startTime?r=t.startTime:e.startTime?r=e.startTime:f(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:r,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){f(`starting subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&f(`WARNING: starting duplicate subspan name {${t.name}}`);let n=t.id||(0,g.A)();-1!==e.spans.findIndex(e=>e.id===n)&&f(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);let r=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||r,startTime:_.A.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){f(`stopping subspan {${t.name}}`),!t.id&&e.spans.filter(e=>e.name===t.name).length>1&&(0,o.vV)("duplicate_subspan_stop_name",{name:t.name,type:t.type});let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=_.A.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,o.vV)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(e=>e.name===t.currentName).length>1&&(0,o.vV)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let n=e.spans.findIndex(e=>e.name===t.currentName);return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(f(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,o.vV)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:r,pwtStaticContext:a,annotations:o,binaryAnnotations:i,isSampled:p,spans:m,traceId:x}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){let s=t.stopTime||_.A.now(),p=[...m.map(t=>{t.endTime===1/0&&(t.endTime=s);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(f(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===m.length){let e=(0,g.A)();p.push({name:"network_resources",id:e,startTime:n,endTime:s,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,u.A)((0,c.B)(t,[]),e)).filter(Boolean))}let b={type:"COMPLETE",metricId:r,traceId:x,startTime:n,endTime:s,spans:p,annotationMap:{...(0,h.A)(o)},binaryAnnotationMap:(0,l.jp)({annotateExperiments:y,metricId:r,pwtStaticContext:a,binaryAnnotations:i,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE",stopwatchVersion:1})};(0,d.A)({metricId:r,pwtStaticContext:a,result:b,annotateExperiments:y})}return(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:r}=t;return n&&(0,o.vV)(n),r&&r.disconnect(),(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.A)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let n=t.reason||"",{startTime:r,metricId:a,pwtStaticContext:o,binaryAnnotations:i,traceId:c}=e,u={type:"ABORT",traceId:c,startTime:r,endTime:_.A.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,l.jp)({annotateExperiments:y,metricId:a,pwtStaticContext:o,binaryAnnotations:i,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT",stopwatchVersion:1}),reason:n};return(0,d.A)({metricId:a,pwtStaticContext:o,result:u,annotateExperiments:y}),(0,s.EG)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:c,spanNameUpdates:[]}}}return e};var b=n(749566),v=n(562615);let w=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:i,manualAndResourceSpans:l=!1})=>{let{Provider:c,getMaybe:d}=(0,a.A)(`Stopwatch_${e}`);return{Provider:function({children:a}){let d=(({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:a=!1})=>{let o=(0,p.A)(),i=(0,r.useRef)([]),l=(0,r.useRef)(null),c=(0,r.useRef)(null);null===c.current&&(c.current=(0,s.Qr)());let[d,u]=(0,r.useReducer)(x,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:c.current,spanNameUpdates:[]});return o?{isTiming:d.isTiming,name:d.name,start:r=>(window.PerformanceObserver&&(i.current=[],l.current=(0,m.A)({entryTypes:["resource"]},e=>{i.current=i.current.concat(e.getEntries()),i.current.length>1e3&&(i.current=i.current.slice(-1e3))})),u({type:"start",startTime:r,name:e,navigationType:n,pwtStaticContext:o,isSampled:!t||Math.random()<t})),stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:l.current,customStopwatchBuffer:i.current,manualAndResourceSpans:a}),error:e=>{u({type:"error",stopwatchPerformanceObserver:l.current,error:e})},abort:e=>u({type:"abort",stopTime:_.A?.now(),stopwatchPerformanceObserver:l.current,customStopwatchBuffer:i.current,reason:e}),annotate:(e,t,n=!1)=>u({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,r,a=!1)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:r,bypassIsTimingCheck:a}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:r,bypassIsTimingCheck:a=!1})=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:r,bypassIsTimingCheck:a}),addSubspan:({name:e,startTime:t,endTime:n,annotations:r={},binaryAnnotations:a={},parentId:o=null,id:i=null,bypassIsTimingCheck:s=!1})=>u({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:r,binaryAnnotations:a,parentId:o,id:i,bypassIsTimingCheck:s}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:r=null,parentName:a=null,id:o=null,bypassIsTimingCheck:i=!1})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:r,parentName:a,id:o,bypassIsTimingCheck:i}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:r,parentId:a,bypassIsTimingCheck:o=!1})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:r,parentId:a,bypassIsTimingCheck:o}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:r=!0})=>u({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:r}),getSpans:(e,t)=>d.spans.filter(n=>n[e]===t),getTraceId:()=>d.traceId}:null})({name:e,sampleRate:t,navigationType:i,manualAndResourceSpans:l}),u=(0,b.A)(),h=u?u.time:0,g=(0,r.useRef)("NotStarted"),y=d?.isTiming,f=(0,r.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.abort(t)):(0,o.DM)(`WARN.${e}.noTiming.abort`)},[d]),w=(0,r.useCallback)((e,t)=>{d?.annotate(e,t)},[d]),A=(0,r.useCallback)((e,t,n,r)=>{d?.binaryAnnotate(e,t,n,r)},[d]),S=(0,r.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:r,bypassIsTimingCheck:a})=>{d?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:r,bypassIsTimingCheck:a})},[d]),j=(0,r.useCallback)(({name:e,startTime:t,endTime:n,annotations:r,binaryAnnotations:a,parentId:o,id:i,bypassIsTimingCheck:s})=>{d?.addSubspan({name:e,startTime:t,endTime:n,annotations:r,binaryAnnotations:a,parentId:o,id:i,bypassIsTimingCheck:s})},[d]),P=(0,r.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:r,parentName:a,id:o,bypassIsTimingCheck:i})=>{d?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:r,parentName:a,id:o,bypassIsTimingCheck:i})},[d]),k=(0,r.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:r,parentId:a,bypassIsTimingCheck:o})=>{d?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:r,parentId:a,bypassIsTimingCheck:o})},[d]),z=(0,r.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:r})=>{d?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:r})},[d]),I=(0,r.useCallback)((e,t)=>d?d.getSpans(e,t):[],[d]),E=(0,r.useCallback)(()=>d?d.getTraceId():"",[d]),T=(0,r.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.error(t)):(0,o.DM)(`WARN.${e}.noTiming.error`)},[d]),C=(0,r.useCallback)(e=>{"Started"===g.current&&d?.abort("duplicated_init_stopwatch_action"),g.current="Started",d?.start(e)},[d]),L=(0,r.useCallback)(e=>{"NotStarted"===g.current&&(g.current="Started",d?.start(e))},[d]),B=(0,r.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",d?.stop(t)):(0,o.DM)(`WARN.${e}.noTiming.stop`)},[d]);(0,r.useEffect)(()=>()=>{n&&f("unloadOrClientNavigation")},[h]);let R=(0,r.useMemo)(()=>({name:e,isTiming:y,abort:f,addAnnotation:w,addBinaryAnnotation:A,binaryAnnotationOperation:S,addSubspan:j,subspanStart:P,subspanStop:k,getSpans:I,getTraceId:E,updateSubspanName:z,stop:B,error:T,start:C,startOnce:L}),[y,f,w,A,S,j,P,k,I,E,z,B,T,C,L]);return(0,v.jsx)(c,{value:R,children:a})},get:d}}},114735(e,t,n){n.d(t,{A:()=>a});let r=(0,n(16917).A)("search_tab_render");function a(){return r}},355426(e,t,n){n.d(t,{A:()=>r});let r=e=>{let t={};e.forEach(({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}});let n=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,r)=>{let a=r?`${e}_${r+1}`:e;n={...n,[a]:t}})}),n}},888454(e,t,n){n.d(t,{fX:()=>o,kP:()=>a,uq:()=>r});let r="var(--sema-color-hover-background-secondary)",a="var(--sema-color-background-secondary)",o="0 0 0 4px rgba(0, 132, 255, .5)"},802209(e,t,n){n.d(t,{$G:()=>o,AP:()=>m,G2:()=>a,Kf:()=>l,Nc:()=>u,Qf:()=>s,Tx:()=>i,V1:()=>c,ZD:()=>g,hm:()=>d,iz:()=>y,xP:()=>h,xx:()=>_,ys:()=>p});var r=n(520434);let a={w:9,h:16},o=a.w/a.h,i=800,s=10,l=5e3,c=2e3;function d(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},m=new r.rk(1),g=new r.K5([m]),_=new r.K5([g]),y=e=>{let t=Math.floor(e||0),n=Math.floor(t/60),r=t-60*n,a=n<10?`${n}`:n,o=r<10?`0${r}`:r;return`${a}:${o}`}},483877(e,t,n){n.d(t,{A:()=>r});let r=({url:e})=>""===e||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(e)},156602(e,t,n){n.d(t,{A:()=>c});var r=n(61163),a=n(859471),o=n(520434),i=n(562615);function s(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l={default:{backgroundColor:"var(--sema-color-background-secondary)",boxShadow:"none"},drag:{backgroundColor:"var(--sema-color-background-default)",boxShadow:"var(--sema-space-0) var(--sema-space-0) var(--sema-space-0) var(--sema-space-25) var(--sema-color-border-education)"},error:{backgroundColor:"var(--sema-color-background-error-weak)",boxShadow:"var(--sema-space-0) var(--sema-space-0) var(--sema-space-0) var(--sema-space-25) var(--sema-color-border-error)"}};class c extends a.Component{constructor(...e){super(...e),s(this,"state",{isDraggingOver:!1,isHoveringOver:!1,containedHeight:null}),s(this,"handleOnDragEnter",e=>{let{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)}),s(this,"handleOnDragLeave",e=>{let{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleOnDragOver",e=>{let{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)}),s(this,"handleOnDrop",e=>{let{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleMouseEnter",()=>{let{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})}),s(this,"handleMouseLeave",()=>{let{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}),s(this,"setContainedHeight",e=>{this.setState({containedHeight:e})})}getDragContainerStyles(e,t){return t&&"default"===e?{...l[e],backgroundColor:t}:l[e]}render(){let{children:e,color:t,dropRounding:n,hasError:r,height:a,position:s,width:l}=this.props,{isDraggingOver:c,isHoveringOver:d,containedHeight:u}=this.state;return(0,i.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(c?"drag":r?"error":"default",t),...n?{borderRadius:n}:{}}},"data-test-id":"drag-behavior-container",height:a||u||"100%",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:s,rounding:200,width:l||"100%",children:e(c,d,this.setContainedHeight,u)})}componentDidMount(){(0,r.A)("DragBehavior","/app/packages/vip/DragBehavior.tsx")}}},543219(e,t,n){n.d(t,{A:()=>c});var r=n(61163),a=n(859471),o=n(520434),i=n(156602),s=n(562615);let l={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0},c=e=>{(0,a.useEffect)(()=>{(0,r.A)("FileUpload","/app/packages/vip/FileUpload.tsx")},[]);let[t,n]=(0,a.useState)(!1),c=t=>{let{onChange:n}=e;t.preventDefault(),t.stopPropagation(),n&&n(t),t.target.value=""},d=t=>{let{onClick:n}=e;n&&n(t)},{accept:u,accessibilityLabel:p,accessibilityDescription:h,allowMultipleFiles:m,children:g,color:_,dropRounding:y,hasError:f,height:x,id:b,onDrop:v,position:w,rounding:A=200,width:S,isAriaHidden:j,isRequired:P,experimentsClient:k}=e;return(0,s.jsx)(i.A,{color:_,dropRounding:y,experimentsClient:k,hasError:f,height:x,onDrop:v,position:w,width:S,children:e=>(0,s.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{...t?{border:"2px solid var(--sema-color-border-focus-outer-default)"}:{}}},height:"100%",onBlur:()=>n(!1),onFocus:()=>n(!0),position:"relative",rounding:A,children:[g(e),(0,s.jsx)("input",{accept:u,"aria-describedby":"upload-button-explanation","aria-hidden":j,"aria-invalid":f?"true":void 0,"aria-label":p,"data-test-id":b,id:b,multiple:m,onChange:c,onClick:d,required:P,style:l,tabIndex:j?-1:0,type:"file"}),h&&(0,s.jsx)(o.az,{display:"none",id:"upload-button-explanation",children:(0,s.jsx)(o.KJ,{children:h})})]})})}},835940(e,t,n){n.d(t,{A:()=>c,E:()=>l});var r=n(61163),a=n(859471),o=n(987628),i=n(562615);let{Provider:s,get:l}=(0,o.A)("ContentHeader");function c({children:e}){(0,a.useEffect)(()=>{(0,r.A)("ContentHeaderContext","/app/www/ContentHeader/ContentHeaderContext.tsx")},[]);let[t,n]=(0,a.useState)(!1),o=(0,a.useMemo)(()=>({isContentHeaderPresent:t,setIsContentHeaderPresent:n}),[t]);return(0,i.jsx)(s,{value:o,children:e})}},900344(e,t,n){n.d(t,{I4:()=>c,jR:()=>l});var r=n(859471),a=n(987628),o=n(63661),i=n(562615);let{Provider:s,get:l}=(0,a.A)("HeaderShadow");function c({children:e}){let[t,n]=(0,r.useState)(!1),[a,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,o.A)(()=>{n(window.scrollY>0),l(window.scrollY)},50);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]);let u=(0,r.useCallback)(e=>{d(e)},[]),p=(0,r.useMemo)(()=>({currentScrollPosition:a,isScrolled:t,setSubheaderShadow:u,subheaderShadow:c}),[a,t,u,c]);return(0,i.jsx)(s,{value:p,children:e})}},856865(e,t,n){n.d(t,{A:()=>o});var r=n(586754),a=n(743858);function o(){let{enabled:e}=(0,r.A)(),{enabled:t}=(0,a.A)();return{enabled:e||t}}},743858(e,t,n){n.d(t,{A:()=>d});var r=n(979638),a=n(693154),o=n(115795),i=n(601185),s=n(844255),l=n(642477),c=n(971289);let d=function(){let e=(0,a.A)(),{isRTL:t}=(0,s._8)(),n=(0,r.zy)(),d="desktop"===(0,c.Ay)(),u=(0,l.A)(),p=d&&(0,i.A)().checkExperiment("unauth_dweb_extra_icons_experiment").anyEnabled;return{enabled:(u||p)&&d&&!(0,o.NF)(n)&&!(0,o.BG)(n)&&!(0,o.fF)(n)&&!(0,o.qi)(n)&&!(0,o.TS)(n)&&!t&&!e.isAuth}}},750612(e,t,n){n.d(t,{A:()=>h});var r=n(61163),a=n(859471),o=n(520434),i=n(485647),s=n(586733),l=n(844255),c=n(971289),d=n(168079),u=n(678358),p=n(562615);function h({actionButton:e,auxData:t,children:n,collapseButtonElementType:h,collapseByDefault:m=!0,componentType:g,disabled:_,displayViewState:y,expandButtonElementType:f,forceTappableHeader:x,headerHeight:b,headerPaddingX:v,headerPreview:w,heading:A,icon:S,surface:j,viewParameter:P,viewType:k}){(0,a.useEffect)(()=>{(0,r.A)("CollapsibleLayout","/app/www/closeup/CollapsibleLayout.tsx")},[]);let z=(0,c.qJ)(),{isBot:I}=(0,l._8)(),{logContextEvent:E}=(0,s.o)(),{setIsShoppingModuleExpanded:T}=(0,u._G)(),C=(0,a.useRef)(null),[L,B]=(0,a.useState)(void 0),[R,M]=(0,a.useState)(_||!I&&m||null!=y&&[1,2].includes(y));return(0,d.A)(()=>{let e=C.current,t=null;if(e){let n=()=>{let t=e.scrollHeight,n=e.firstElementChild;B(t+(n?parseInt(window.getComputedStyle(n).marginTop,10):0))};n(),(t=new ResizeObserver(n)).observe(e)}return()=>{t?.disconnect()}}),(0,a.useEffect)(()=>{T&&T(!R)},[]),(0,p.jsxs)(o.so,{dataTestId:"collapsible-layout",direction:"column",gap:4*!z,children:[(0,p.jsx)(i.A,{actionButton:e,collapsed:R,disabled:_,displayViewState:y,forceTappableHeader:x,headerHeight:b,headerPaddingX:v,headerPreview:w,heading:A,icon:S,onClick:()=>{M(!R),T&&T(R),E({aux_data:t,component:g,element:R?f:h,event_type:z?101:102,view_parameter:P,view_type:k})},showArrow:!0,surface:j}),z?(0,p.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{transition:"height 600ms cubic-bezier(.25,1,.5,1)"}},"data-test-id":`collapsible-layout-content-${R?"collapsed":"expanded"}`,height:R?"0px":`${L}px`,marginBottom:R?void 0:1,overflow:"hidden",children:(0,p.jsx)(o.az,{ref:C,children:n})}):!R&&(0,p.jsx)(o.az,{children:n})]})}},409652(e,t,n){n.d(t,{A:()=>u});var r=n(61163),a=n(859471),o=n(520434),i=n(586733),s=n(567176),l=n(538329),c=n(542975),d=n(562615);function u({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:u,hasNewPin:p,onChangeButtonClick:h,onVisitButtonClick:m=()=>{},onHide:g,onUndo:_,pinImageUrl:y}){let f;(0,a.useEffect)(()=>{(0,r.A)("PostSavedPinToast","/app/www/common/PinBetterSave/PostSavedPinToast.tsx")},[]);let x=(0,l.A)(),{logContextEvent:b}=(0,i.o)();u?f={accessibilityLabel:x.bt("Visit Pin", "Visit Pin", "PostSavedPinToast.a11yVisitButton", undefined, true),label:x.bt("Visit", "Visit", "PostSavedPinToast.VisitButton", undefined, true),size:"lg",role:"button",onClick:m}:(h||_)&&(f={accessibilityLabel:p&&n&&h?x.bt("Change Pin destination", "Change Pin destination", "PostSavedPinToast.a11yChangeButton", undefined, true):x.bt("Undo saved Pin", "Undo Saved Pin", "PostSavedPinToast.a11yUndoButton", undefined, true),label:p&&n&&h?x.bt("Change", "Change", "PostSavedPinToast.ChangeButton", undefined, true):x.bt("Undo", "Undo", "PostSavedPinToast.UndoButton", undefined, true),size:"lg",role:"button",onClick:p&&n&&h?()=>h():_});let v=()=>{p&&n&&h&&b({event_type:101,component:14409})};return(0,d.jsx)(s.A,{duration:n?6e3:3e3,imageUrl:y,onHide:g,primaryAction:f,text:(0,d.jsx)(o.KJ,{overflow:"normal",size:"200",children:(0,c.$w)({text:x.bt("Saved to <a id=\"1\">{{ boardName }}</a>", "Saved to <a id=\"1\">{{ boardName }}</a>", "PostSavedPinToast.SavedToBoardToast.Message", undefined, true),markers:{boardName:e??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,d.jsx)(o.N_,{display:"block",href:n?"/me/":t??"",onClick:v,children:(0,d.jsx)(o.KJ,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})}})}),thumbnail:n?{icon:(0,d.jsx)(o.In,{accessibilityLabel:x.bt("Saved to profile thumbnail", "Saved to profile thumbnail", "PostSavedPinToast.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"clock-history",size:24})}:void 0})}},745489(e,t,n){n.d(t,{A:()=>c,a:()=>l});var r=n(61163),a=n(859471),o=n(520434),i=n(114735),s=n(562615);let l={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function c({backgroundColor:e,children:t,coverImage:n,disableTabIndex:c,height:d,id:u,isHovered:p,onClick:h,onMouseDown:m,onMouseEnter:g,onMouseLeave:_,searchBoxRenderStopwatch:y,url:f,width:x}){(0,a.useEffect)(()=>{(0,r.A)("BubbleWrapper","/app/www/discover/Bubbles/BubbleWrapper.tsx")},[]);let[b,v]=(0,a.useState)(!1),w=()=>{g?g():v(!0)},A=()=>{_?_():v(!1)},S=p||b,j=S?l.hoverOverlay:l.bubbleOverlay;return(0,s.jsx)(o.$A,{href:f,onBlur:A,onFocus:w,onMouseDown:m,onMouseEnter:w,onMouseLeave:A,onTap:()=>{h?.(u)},rounding:400,tabIndex:c?-1:void 0,children:(0,s.jsx)(o.n1,{height:d,rounding:400,width:x||"100%",children:n?.url?(0,s.jsxs)(o._V,{alt:"",color:e,fit:"cover",naturalHeight:n.height??1,naturalWidth:n.width??1,onLoad:()=>{y?.stop();let e=(0,i.A)();e.isActive()&&e.stop()},role:"presentation",src:n.url,children:[(0,s.jsx)(o.az,{dangerouslySetInlineStyle:{__style:j},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,s.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},826828(e,t,n){n.d(t,{A:()=>nt});var r=n(61163),a=n(859471),o=n(520434),i=n(836664),s=n(538329),l=n(782310);let{Provider:c,get:d}=(0,l.A)({name:"autocomplete_render",sampleRate:1}),{Provider:u,get:p}=(0,l.A)({name:"search_tab_render",sampleRate:1});var h=n(844255),m=n(177052),g=n(979638),_=n(586733),y=n(655352),f=n(693154),x=n(131094),b=n(562615);function v({gradientPrimaryColor:e,gradientSecondaryColor:t,gradientDirection:n,position:r}){return(0,b.jsx)(o.az,{bottom:"bottom"===r,dangerouslySetInlineStyle:{__style:{backgroundImage:`linear-gradient(${n}, ${e}, ${t})`,pointerEvents:"none"}},height:16,position:"absolute",rounding:"pill",top:"top"===r,width:"100%",zIndex:new o.rk(1)})}let w={color:"var(--sema-color-text-subtle)",fontFamily:"var(--sema-font-family-body-300)",fontSize:"var(--sema-font-size-body-300)",fontWeight:"var(--sema-font-weight-body-100-default)",letterSpacing:"var(--sema-font-letterspacing-body-300)",lineHeight:"var(--sema-font-lineheight-body-300)"},A=({term:e})=>(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{...w,display:"inline",textOverflow:"ellipsis",whiteSpace:"nowrap"}},overflow:"hidden",children:e});function S({defaultPlaceholder:e,gradientSecondaryColor:t="#FFF",height:n=48,suggestedSearchTerms:i}){let l;(0,a.useEffect)(()=>{(0,r.A)("DynamicSearchPlaceholder","/app/packages/search/DynamicSearchPlaceholder.tsx")},[]);let c=(0,s.A)(),d=i.length<3,u=(0,a.useRef)(null);return(0,b.jsx)(o.az,{ref:u,alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"dynamic-search-placeholder",display:"flex",height:n,overflow:"hidden",position:"relative",children:d?(0,b.jsx)(o.KJ,{color:"subtle",inline:!0,children:e}):(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(v,{gradientDirection:"to top",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:t,position:"top"}),(0,b.jsx)(v,{gradientDirection:"to bottom",gradientPrimaryColor:"rgba(255, 255, 255, 0)",gradientSecondaryColor:t,position:"bottom"}),(0,b.jsxs)(o.so,{alignItems:"stretch",height:20,justifyContent:"start",children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{...w,display:"inline"}},children:c.bt("Search for", "Search for", "searchBar.placeholder.dynamicText", undefined, true)}),(0,b.jsx)(x.A,{unsafeCSS:`
@keyframes slide-3-terms-loop {
  0%, 21.74% {
    transform: translateY(0%);
  }
  33.33%, 55.07% {
      transform: translateY(-25%);
  }
  66.66%, 88.4% {
      transform: translateY(-50%);
  }
  100% {
      transform: translateY(-75%);
  }
}
@keyframes slide-4-terms-loop {
  0%,16.3% {
    transform: translateY(0%);
  }
  25%,41.3%{
    transform: translateY(-20%);
  }
  50%,66.3%{
    transform: translateY(-40%);
  }
  75%,91.3%{
    transform: translateY(-60%);
  }
  100% {
    transform: translateY(-80%);
  }
}
@keyframes slide-5-terms-loop {
  0%, 13.04% {
    transform: translateY(0%);
  }
  20%,33.04%{
    transform: translateY(-16.66%);
  }
  40%,53.04%{
    transform: translateY(-33.33%);
  }
  60%,73.04%{
    transform: translateY(-49.98%);
  }
  80%,93.04%{
    transform: translateY(-66.64%);
  }
  100% {
    transform: translateY(-83.3%);
  }
}
`}),(0,b.jsx)(o.az,{children:(0,b.jsxs)(o.az,{dangerouslySetInlineStyle:(l=i.length,{__style:{animation:`slide-${l}-terms-loop ${2.3*(l+1)}s ease-out infinite forwards`}}),display:"inlineBlock",marginStart:1,children:[i.map(e=>(0,b.jsx)(o.az,{marginBottom:7,children:(0,b.jsx)(A,{term:e})},e)),(0,b.jsx)(o.az,{marginBottom:7,children:(0,b.jsx)(A,{term:i[0]??""})})]})})]})]})})}var j=n(168079),P=n(808666);function k(){(0,a.useEffect)(()=>{(0,r.A)("InlineACSuggestion","/app/packages/search/InlineACSuggestion.tsx")},[]);let{displayedQuery:e,inlineACSuggestion:t,logInlineSuggestionView:n}=(0,P.Z)();return(0,j.A)(()=>{n()}),(0,b.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},children:[(0,b.jsx)("span",{style:{visibility:"hidden"},children:(0,b.jsx)(o.KJ,{color:"disabled",inline:!0,children:e})}),(0,b.jsx)(o.KJ,{color:"subtle",inline:!0,children:t.slice(e.length)})]})}var z=n(145200),I=n(888454);let E="search-text-area-floating";var T=n(184240),C=n(106386),L=n(115795),B=n(430705),R=n(803489),M=n(601185),D=n(586754),$=n(532463);function U(){let e=(0,g.zy)(),t=function(){let{checkExperiment:e}=(0,M.A)();return(0,D.A)().enabled&&e("dweb_search_omnipresent_multimodal").anyEnabled}(),{group:n}=(0,$.A)()||{group:""},r=t&&(0,L.dM)(e)&&e.pathname.split("/")[2]||"",o=t&&(0,L._p)(e)?(0,R.A)(e.search).query_image_pins?.toString():"",i=o||r,{setMultimodalPinId:s}=(0,P.Z)(),l=(0,C.d4)(({pins:e})=>e[i||""]),{data:c,isFetching:d}=(0,B.A)(l?null:{name:"ApiResource",options:{url:`/v3/pins/${i}/`,data:{fields:["pin.images[236x]","pin.is_unsafe"]}}}),u=l??c;return((0,a.useEffect)(()=>{o?s(o):r&&!n.includes("optin")&&u&&!u.is_unsafe?s(r):s("")},[r,o,n,s,u]),t&&!u&&d)?{pinId:i}:t&&u&&!u.is_unsafe?{pinId:i,imageData:u.images?.["236x"]}:{}}var O=n(999370);function N({disabled:e=!1,name:t,inlineSYOP:n=!1}){(0,a.useEffect)(()=>{(0,r.A)("SearchInput","/app/packages/search/SearchInput.tsx")},[]);let i=(0,s.A)(),l=(0,a.useRef)(null),c=(0,a.useRef)(void 0),{isAuth:d}=(0,f.A)(),u=(0,g.zy)(),p=(0,o.Ib)(),h=!!(0,$.A)()&&!n,{pinId:m,imageData:v}=U(),{logContextEvent:w}=(0,_.o)();(0,j.A)(()=>{w({event_type:120,component:43,element:227})});let{delayedSearchBoxOpen:A,displayedQuery:C,handleInputBlur:L,handleInputChange:B,handleInputClick:R,handleInputFocus:M,handleKeyDown:D,handleKeyUp:N,suggestionsFocusIndex:F,suggestionGroups:H,inlineACSuggestion:V,isInTypeaheadSession:G,handleTypedSearchSubmit:W,multimodalPinId:K,searchBoxPlaceholder:Y,searchBoxHovered:q,setVoiceSearchPlaceholder:J,suggestedSearchTerms:X,voiceSearchPlaceholder:Z}=(0,P.Z)(),Q=(0,T.TR)({suggestionsFocusIndex:F,suggestionGroups:H}),ee=K&&!h&&G,{isEligiblePageTypeForDynamicSearchPlaceholder:et}=(0,z.$)(u);(0,a.useEffect)(()=>{Z&&c.current&&(c.current.pathname!==u.pathname||c.current.search!==u.search)&&J(O.g.NULL),c.current=u},[u,Z,J]),(0,j.A)(()=>{l.current&&W&&l.current.addEventListener("searchTrigger",W)}),(0,a.useEffect)(()=>{l.current&&(document.activeElement===l.current!==G?G?l.current.focus():l.current.blur():J(O.g.NULL))},[G,J,K]),(0,j.A)(()=>{!l.current||new URLSearchParams(window.location.search).get("search_box_open")&&A()});let en=!p&&!d&&et&&!C,er=i.bt("Looking for something?", "Looking for something?", "searchBox.searchInput.placeholder.omnipresent", undefined, true),ea=en?"":K&&i.bt("Refine your search", "Refine your search", "searchBox.searchInput.placeholder.multimodal", undefined, true)||(h||m)&&er||Y||i.bt("Search", "Search", "searchBox.searchInput.placeholder", undefined, true),eo=K&&v&&`padding-left: ${Math.round(108*(v.width||1)/(v.height||2))+4}px !important;`||h&&!G&&!C&&"padding-left: 36px !important;"||"",ei=m&&v&&`padding-left: ${Math.round(40*(v.width||1)/(v.height||2))+4+12*!!G-8}px !important;`||"";return(0,b.jsxs)(o.az,{flex:"grow",height:"100%",children:[(0,b.jsx)(x.A,{unsafeCSS:`
          div:has(> #${E}) {
            border-radius: 20px !important;
            ${!G?"border: none !important":""}
          }
          #${E} {
            font-size: 20px !important;
            width: calc(100% - 20px) !important;
            ${eo}
          }
          input::placeholder {
          color: var(--sema-color-text-subtle)${en?"; display: none":""}
          }
          input {
            ${m?ei:""}
          }`}),h||ee?(0,b.jsx)(o.fs,{ref:l,"data-test-id":"search-box-input",disabled:e,id:E,onBlur:({event:e})=>{L(e)},onChange:({event:e})=>{B(e)},onClick:({event:e})=>{R(e)},onFocus:({event:e})=>{M(e)},onKeyDown:({event:e})=>{D(e)},onKeyUp:({event:e})=>{N(e)},placeholder:ea,rows:3,value:C}):(0,b.jsx)("input",{ref:l,"aria-activedescendant":Q,"aria-autocomplete":"list","aria-controls":"SuggestionsMenu","aria-describedby":"searchBoxAccessibleText","aria-expanded":G,"aria-label":i.bt("Search", "Search", "searchBox.searchInput.placeholder", undefined, true),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off","data-gestalt-valid-html":"SearchField","data-test-id":"search-box-input",disabled:e,name:t,onBlur:L,onChange:B,onClick:R,onFocus:M,onKeyDown:D,onKeyUp:N,placeholder:ea,role:"combobox",style:{backgroundColor:"transparent",border:"none",color:"var(--sema-color-text-default)",fontFamily:y.A,fontSize:16,fontWeight:"normal",height:"100%",outline:"none",padding:"0",width:"100%"},type:"text",value:C}),!!V&&(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",top:13}},position:"absolute",top:!0,width:"85%",children:(0,b.jsx)(k,{})}),en&&(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",top:!0,width:"85%",children:(0,b.jsx)(S,{defaultPlaceholder:ea,gradientSecondaryColor:q?I.uq:I.kP,suggestedSearchTerms:X})}),(0,b.jsx)(o.az,{display:"none",id:"searchBoxAccessibleText",children:i.bt("When the auto-complete results are available, use the up and down arrows to review and Enter to select. Touch device users can explore by touch or with swipe gestures.", "When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.", "searchBox.searchInput.accessibleText", undefined, true)})]})}var F=n(497384),H=n(826258),V=n(108173),G=n(890922),W=n(224723),K=n(584342);function Y({contentTypes:e,contentTypesAnchor:t,handleSelectFilter:n,onDismiss:i}){return(0,a.useEffect)(()=>{(0,r.A)("ContentFilterList","/app/www/discover/SearchBox/ContentFilterList.tsx")},[]),(0,b.jsx)(o.ms,{anchor:t,disableMobileUI:!0,id:"ContentFilterList",idealDirection:"down",isWithinFixedContainer:!0,onDismiss:i,zIndex:new o.rk(K.d1),children:e.map((e,t)=>(0,b.jsx)(o.ms.Item,{dataTestId:"search-filter-"+e.dataId,onSelect:()=>n(t),option:{value:e.text,label:e.text},children:(0,b.jsx)(o.KJ,{weight:[W.cO.PINS,W.cO.PINS_MINE].includes(e.scope)?"bold":"normal",children:e.text})},e.text))})}var q=n(856865),J=n(845754);let X=function({currentlySelectedFilter:e,currentQuery:t,handleContentTypeFilterHover:n,handleScopeChange:r}){let i,l,{logContextEvent:c}=(0,_.o)(),d=(0,s.A)(),u=(l=(i=[{scope:W.cO.PINS,text:d.bt("All Pins", "All Pins", "All Pins label for content type filters on search bar", undefined, true),dataId:"all-pins"},{scope:W.cO.PINS_MINE,text:d.bt("Your Pins", "Your Pins", "Your Pins label for content type filters on search bar", undefined, true),dataId:"your-pins"}]).findIndex(e=>e.scope===W.cO.PINS_MINE),i.push(i.splice(l,1)[0]),i),p=(0,a.useRef)(null),h=(0,g.Zp)(),{enabled:m}=(0,q.A)(),[y,f]=(0,a.useState)(e||u[0].scope),[x,v]=(0,a.useState)(!1),[w,A]=(0,a.useState)(!1);(0,j.A)(()=>{c({event_type:120,view_type:2,component:215})}),(0,a.useEffect)(()=>{f(e)},[e]);let S=(u[y?u.findIndex(e=>e.scope===y):0]||u[0]).text,P=(0,b.jsx)(o.az,{ref:p,dangerouslySetInlineStyle:{__style:{borderRadius:"0 4px 4px 0",height:48}},"data-test-id":"search-filter",overflow:"hidden",children:(0,b.jsxs)(o.az,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingX:4,children:[(0,b.jsx)(o.KJ,{inline:!0,size:"200",weight:"bold",children:S}),(0,b.jsx)(o.az,{marginStart:2,children:(0,b.jsx)(o.In,{accessibilityLabel:d.bt("Dropdown", "Dropdown", " - ", undefined, true),color:"default",icon:"chevron-down",inline:!0,size:12})})]})});return(0,b.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:w?"rgba(0, 0, 0, 0.06)":void 0}},display:"flex",flex:"none",height:48,left:!0,marginStart:2,position:"relative",rounding:m?J.Xr:600,children:[(0,b.jsx)(o.Rp,{fullHeight:!0,fullWidth:!1,onMouseEnter:()=>void(A(!0),n&&n(!0)),onMouseLeave:()=>void(A(!1),n&&n(!1)),onTap:({event:e})=>{e&&(e.preventDefault(),e.stopPropagation()),v(!x),c({event_type:101,component:215,aux_data:{entered_query:t}})},rounding:600,children:P}),x&&(0,b.jsx)(Y,{contentTypes:u,contentTypesAnchor:p.current,handleSelectFilter:e=>{let n=u[e].scope;f(n),v(!1),c({event_type:101,component:215,element:(e=>{switch(e){case W.cO.PINS:return 220;case W.cO.PINS_MINE:return 223;case W.cO.PINS_VIDEO:return 11399;case W.cO.BOARDS:return 221;case W.cO.USERS:return 222;default:return null}})(n),aux_data:{entered_query:t}}),r(n),t&&h(`/search/${n}/?q=${encodeURIComponent(t)}&rs=${G.I.FILTER}`)},onDismiss:()=>v(!1)})]})};var Z=n(284966);function Q({children:e,hideOnScroll:t,isInTypeaheadSession:n,searchBoxHovered:r}){let[o,i]=(0,a.useState)(!1),s=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,a.useRef)(!1),d=(0,a.useRef)(!1),u=(0,a.useRef)(!0);function p(){u.current||c.current&&!s.current&&(s.current=setTimeout(()=>{i(!0)},150))}function h(){c.current&&(!d.current&&s.current&&m(),null!==l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout(()=>{i(!1),l.current=null},2e3))}function m(){s.current&&(clearTimeout(s.current),s.current=null)}function g(){null!==l.current&&(clearTimeout(l.current),l.current=null)}return(0,a.useEffect)(()=>{let e=setTimeout(()=>{u.current=!1},600);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{c.current=t,d.current=o},[t,o]),(0,a.useEffect)(()=>{if(!o||!n&&!r)return;m(),g();let e=requestAnimationFrame(()=>{i(!1)});return()=>cancelAnimationFrame(e)},[o,n,r]),(0,a.useEffect)(()=>{o||m()},[o]),(0,j.A)(()=>{let e=(0,Z.A)(p,10),t=(0,Z.A)(h,10);return window.addEventListener("scroll",e),window.addEventListener("scrollend",t),()=>{window.removeEventListener("scroll",e),window.removeEventListener("scrollend",t),m(),g()}}),e({isHidden:o,updateHiddenState:i})}var ee=n(296221),et=n(385800);function en(){let e=(0,$.A)(),{imageData:t,pinId:n=""}=U(),{width:r,height:i,url:l}=t||{},{hovered:c,onMouseEnter:d,onMouseLeave:u}=(0,et.A)(),{multimodalPinId:p,setMultimodalPinId:m,handleClearSearch:g,isInTypeaheadSession:_}=(0,P.Z)(),y=(0,s.A)(),{isRTL:f}=(0,h._8)(),x=!e&&(!_||!p),v=!x||_,w=x&&!p,A=x&&40||p&&108||54,S=p||w?(r||1)/(i||2)*A:A,[j,k]=(0,a.useState)(null);return l&&(0,b.jsxs)(o.az,{ref:k,alignItems:"end",dangerouslySetInlineStyle:{__style:{[f?"right":"left"]:-4,bottom:-4}},display:"flex",justifyContent:"center",padding:2,position:"absolute",children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{boxShadow:"var(--sema-elevation-shadow-raised)"}},height:A,position:"relative",rounding:400,width:S,children:(0,b.jsxs)(o.Rp,{onMouseDown:({event:e})=>{e.preventDefault(),e.stopPropagation()},onMouseEnter:d,onMouseLeave:u,onTap:()=>{p?g({clearMultimodalPinId:!0}):m(n)},rounding:x?200:400,children:[(0,b.jsx)(o.n1,{height:A,rounding:x?200:400,wash:!0,width:S,children:(0,b.jsx)(o.n1,{height:A,rounding:x?200:400,wash:c,width:S,children:(0,b.jsx)(o.az,{"aria-label":y.bt("Search with this Pin", "Search with this Pin", "MultimodalSearchPinImage.image.altText", undefined, true),dangerouslySetInlineStyle:{__style:{border:x?"1px solid white":void 0,background:`url(${l})`,backgroundSize:"cover",backgroundPosition:"center"}},height:A,rounding:x?200:400,width:S})})}),v&&(0,b.jsx)(o.az,{bottom:!w,dangerouslySetInlineStyle:{__style:w?f?{bottom:4,left:-15}:{bottom:4,right:-15}:{}},left:f,padding:1,position:"absolute",right:!f,children:(0,b.jsx)(o.K0,{accessibilityLabel:p?y.bt("Remove", "Remove", "MultimodalSearchPinImage.removeButton.accessibilityLabel", undefined, true):y.bt("Add", "Add", "MultimodalSearchPinImage.addButton.accessibilityLabel", undefined, true),bgColor:"default",icon:p?"close":"plus",size:"xs"})})]})}),!x&&(0,b.jsx)(o.az,{padding:2,children:(0,b.jsx)(o.Ex,{text:y.bt("Beta", "Beta", "searchbox.multimodalSearch.betaBadge", undefined, true)})}),(0,b.jsx)(ee.En,{anchor:j,experienceIds:[508714],idealDirection:f?"right":"left",placementId:12,positionRelativeToAnchor:!1,showCaret:!0,textWeight:"normal"})]})}function er(){(0,a.useEffect)(()=>{(0,r.A)("MultimodalSearchPinImage","/app/www/discover/SearchBox/MultimodalSearchPinImage.tsx")},[]);let{pinId:e}=U();return e?(0,b.jsx)(en,{}):null}function ea({hasAppliedQuery:e,onClear:t,isInlineSYOP:n}){(0,a.useEffect)(()=>{(0,r.A)("ClearSearchButton","/app/www/discover/SearchBox/SearchBoxActions/ClearSearchButton.tsx")},[]);let i=(0,s.A)(),l=!!(0,$.A)()&&!n,{isInTypeaheadSession:c,multimodalPinId:d}=(0,P.Z)(),u=l||d&&!l&&c,{logContextEvent:p}=(0,_.o)();return(0,j.A)(()=>{p({event_type:120,view_type:2,component:43,element:73})}),(0,b.jsx)(o.az,{alignItems:"center",dangerouslySetInlineStyle:u?{__style:{bottom:60}}:void 0,"data-test-id":"search-cancel",display:"flex",height:48,justifyContent:"center",position:u?"absolute":void 0,right:!!u,rounding:e&&!u?300:400,width:48,children:(0,b.jsx)(o.K0,{accessibilityLabel:i.bt("Remove search input", "Remove search input", "searchBox.removeSearchInput.accessibilityLabel", undefined, true),icon:e&&!u?"close":"circle-close",iconColor:"default",onClick:t,padding:e&&!u?2:void 0,size:e&&!u?"sm":"lg"})})}var eo=n(299374),ei=n(49241);let es={state:"idle",color:"subtle",borderColor:"var(--sema-color-border-decorative)",iconColor:"dark",iconName:"circle-arrow-up"},el={state:"dragging",color:"infoWeak",borderColor:"var(--sema-color-border-focus-outer-default)",iconColor:"dark",iconName:"circle-arrow-up"},ec={state:"error",color:"errorWeak",borderColor:"var(--sema-color-border-error)",iconColor:"error",iconName:"circle-exclamation-point"};function ed({error:e,isDraggingOver:t,setValidationError:n}){(0,a.useEffect)(()=>{(0,r.A)("LensDropZoneContent","/app/common/react/components/Lens/Uploader/Popover/FileUpload/LensDropZoneContent.tsx")},[]);let i=(0,s.A)(),{state:l,color:c,borderColor:d,iconColor:u,iconName:p}=function({error:e,isDraggingOver:t}){return t?el:e?ec:es}({isDraggingOver:t,error:e});return(0,a.useEffect)(()=>{t&&e&&n("")},[t,e,n]),(0,b.jsx)(o.az,{alignItems:"center",color:c,dangerouslySetInlineStyle:{__style:{borderColor:d,borderStyle:"dashed",borderWidth:2}},direction:"column",display:"flex",height:"100%",justifyContent:"center",paddingY:10,rounding:800,children:(0,b.jsxs)(o.so,{alignItems:"center",direction:"column",gap:{column:4,row:0},justifyContent:"center",children:[(0,b.jsx)(o.In,{accessibilityLabel:i.bt("Upload photo", "Upload photo", "lens.fileUpload.icon", undefined, true),color:u,icon:p,size:32}),(0,b.jsx)(o.az,{width:320,children:"error"===l?(0,b.jsx)(o.KJ,{align:"center",color:"error",children:e}):(0,b.jsx)(o.KJ,{align:"center",children:i.bt("Choose a file or drag and drop it here", "Choose a file or drag and drop it here", "lens.fileUpload.instruction", undefined, true)})})]})})}let eu="MULTIPLE_IMAGES",ep="NO_FILE",eh="URL_VALIDATION",em="UNSUPPORTED_FORMAT",eg="IMAGE_TOO_LARGE",e_="DATA_URL_INVALID",ey="REMOTE_URL_FAILED",ef="NO_RESULTS",ex="GENERIC";class eb extends Error{constructor(e,t){var n,r;super(e,t),(n="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n="name","string"))?r:r+"")in this?Object.defineProperty(this,n,{value:"LensError",enumerable:!0,configurable:!0,writable:!0}):this[n]="LensError",this.type=e}}let ev=e=>e.bt("Something went wrong. Please try again", "Something went wrong. Please try again", "lens.error.uploadFailed", undefined, true),ew=(e,t)=>{switch(t){case eu:return e.bt("Upload a single image and try again.", "Upload a single image and try again.", "lens.error.multipleImages", undefined, true);case ep:return e.bt("No image found. Try dragging an image file.", "No image found. Try dragging an image file.", "lens.error.noFile", undefined, true);case eh:return e.bt("Double check the image URL and try again.", "Double check the image URL and try again.", "lens.error.urlValidation", undefined, true);case em:return e.bt("Something went wrong. Upload a .jpg, .gif, .png, .tif or .webp file or an image link.", "Something went wrong. Upload a .jpg, .gif, .png, .tif, or .webp file or an image link.", "lens.error.unsupportedFormat", undefined, true);case eg:return e.bt("This image is too large. Try a smaller image.", "This image is too large. Try a smaller image.", "lens.error.imageTooLarge", undefined, true);case e_:return e.bt("Unable to load image from URL. Try a different image.", "Couldn't load image from URL. Try a different image.", "lens.error.dataUrlInvalid", undefined, true);case ey:return e.bt("Unable to add link. Try saving and uploading the image.", "Unable to add link. Try saving and uploading the image.", "lens.error.remoteUrlFailed", undefined, true);case ef:return e.bt("No results found for this image. Try uploading another image.", "No results found for this image. Try uploading another image.", "lens.error.noResults", undefined, true);default:return ev(e)}};var eA=n(196861);async function eS(e,t){return new Promise((n,r)=>{e.toBlob(e=>{e?n(e):r(Error("Canvas toBlob failed"))},t,ei.Et)})}async function ej(e,t,n=em){let r=await (0,eA.A)({file:e,i18n:t,ideaPinRenamingEnabled:!1,options:{allowVideo:!1}});if("error"===r.type)throw new eb(n,{cause:r.message||"File validation failed"});let a=await createImageBitmap(e),{width:o,height:i}=a,s=o>ei.Dj?ei.Dj/o:1,[l,c]=[Math.round(o*s),Math.round(i*s)],d=document.createElement("canvas");d.width=l,d.height=c;let u=d.getContext("2d");if(!u)throw a.close(),new eb(ex,{cause:"Failed to create canvas context"});u.drawImage(a,0,0,l,c),a.close();let p=await eS(d,ei.g0),h=new File([p],"lens-file-image",{type:p.type}),m=URL.createObjectURL(h);return{file:h,src:m,width:l,height:c}}var eP=n(910409);async function ek(e,t){let n,r=e.split(",")[1];if(!r)throw new eb(e_,{cause:"Missing base64 data in data URL"});try{n=(0,eP.A)(r)}catch(e){throw new eb(e_,{cause:e||"Failed to decode base64 image"})}return ej(n,t,e_)}var ez=n(457315),eI=n(257300);async function eE(e){let t,n;try{t=await (0,eI.A)({url:ei.UQ,method:"GET",data:{url:e}})}catch(e){switch((0,ez.A)(e,"api_error_code")){case 2654:throw new eb(em,{cause:e});case 2655:throw new eb(eg,{cause:e});default:throw new eb(ey,{cause:e})}}let r=t.resource_response.data?.image_file;if(!r)throw new eb(ey,{cause:"Missing image_file in V3_LENS_UPLOAD_HANDLER response"});try{n=(0,eP.A)(r)}catch(e){throw new eb(ey,{cause:e||"Failed to decode base64 image from server"})}let a=URL.createObjectURL(n),o=await createImageBitmap(n),{width:i,height:s}=o;return o.close(),{file:n,src:a,width:i,height:s}}function eT(e,t){return e.startsWith("data:image")?()=>ek(e,t):()=>eE(e)}var eC=n(997737),eL=n(543219);let eB=`
  [data-test-id='lens-file-upload'] [data-test-id='drag-behavior-container'] {
    box-shadow: none !important;
  }
  [data-test-id='lens-file-upload'] [data-test-id='drag-behavior-container'] > div {
    border: none !important;
  }
`;function eR({error:e,isDisabled:t=!1,setValidationError:n,uploadImage:i}){(0,a.useEffect)(()=>{(0,r.A)("LensFileUpload","/app/common/react/components/Lens/Uploader/Popover/FileUpload/LensFileUpload.tsx")},[]);let l=(0,s.A)(),{handleFileSelect:c,handleFileAndUrlDrop:d}=function({isDisabled:e,setValidationError:t,uploadImage:n}){let r=(0,s.A)(),{logContextEvent:a}=(0,_.o)();return{handleFileSelect:o=>{if(e)return;let i=function(e){if(e&&e.length>1)return{type:"multipleFiles"};let t=e?.[0];return t?{type:"file",file:t}:{type:"noFile"}}(o.target.files);switch(a({component:ei.SY,element:14558,event_type:15656,view_type:ei.CR}),i.type){case"file":n(()=>ej(i.file,r),ei.nb,"file");break;case"multipleFiles":t(ew(r,eu));break;case"noFile":t(ew(r,ep))}},handleFileAndUrlDrop:o=>{if(e)return;let i=function(e){let t=e.types.includes("text/uri-list"),n=e.getData("text/uri-list").split(`
`).find(e=>e&&!e.startsWith("#"))??null,{files:r}=e;return n?{type:"url",url:n,fromBrowser:!0}:r.length>1?{type:"multipleFiles",fromBrowser:t}:1===r.length&&r[0]?{type:"file",file:r[0],fromBrowser:!1}:t?{type:"invalidUrl",fromBrowser:!0}:{type:"noFile",fromBrowser:!1}}(o.dataTransfer);switch(a({component:ei.SY,event_type:i.fromBrowser?3502:3501,view_type:ei.CR}),i.type){case"url":n(eT(i.url,r),ei.cr,"file");break;case"file":n(()=>ej(i.file,r),ei.nb,"file");break;case"multipleFiles":t(ew(r,eu));break;case"invalidUrl":t(ew(r,eh));break;case"noFile":t(ew(r,ep))}}}}({isDisabled:t,setValidationError:n,uploadImage:i});return(0,b.jsxs)(o.az,{"data-test-id":"lens-file-upload",height:"100%",position:"relative",width:"100%",children:[(0,b.jsx)(x.A,{unsafeCSS:eB}),(0,b.jsx)(eL.A,{accept:eC.oA.join(","),accessibilityLabel:l.bt("File upload", "File Upload", "lens.fileUpload.area", undefined, true),allowMultipleFiles:!1,dropRounding:32,hasError:!!e,id:"lens-file-upload",onChange:c,onDrop:d,children:t=>(0,b.jsx)(ed,{error:e,isDraggingOver:t,setValidationError:n})})]})}var eM=n(277229),eD=n(348681),e$=n(284387),eU=n(726329),eO=n(750612);function eN(){(0,a.useEffect)(()=>{(0,r.A)("LensHistoryCarousel","/app/common/react/components/Lens/Uploader/Popover/History/LensHistoryCarousel.tsx")},[]);let e=(0,s.A)(),t=(0,g.zy)(),n=(0,g.Zp)(),{logContextEvent:i}=(0,_.o)(),{setIsPopoverOpen:l}=(0,eo.S)(),c=ei.Gj,{items:d,isLoaded:u,renderItem:p}=(0,eM.A)({buttonPadding:2,height:229,hideSave:!0,pageSize:10,viewParameter:c,viewType:119,width:163}),h=u&&d.length>0,m=!h,y="/lens-search/history"===t.pathname,f=e.bt("Your uploads", "Your uploads", "lens.history.header", undefined, true),x=e.bt("View all", "View all", "lens.history.viewAll", undefined, true);(0,eD.r)(h?{component:15075,element:14560,view_type:119}:null);let v=(0,eU.bi)({componentType:15075,impressionType:"Story",loggingId:"lens-history-carousel-impression-logging-id",viewType:119});return(0,b.jsx)(o.az,{ref:v,marginBottom:2,paddingY:3,children:(0,b.jsx)(eO.A,{actionButton:(0,b.jsx)(o.$n,{disabled:m,onClick:({event:e})=>{e.stopPropagation(),i({component:15075,element:14560,event_type:101,view_type:119}),l(!1),y||n("/lens-search/history")},text:x}),collapseButtonElementType:14560,collapseByDefault:!0,componentType:15075,disabled:m,expandButtonElementType:14560,headerPaddingX:10,heading:f,icon:"compact-chevron-down",viewType:119,children:(0,b.jsx)(o.az,{marginTop:3,paddingX:6,children:(0,b.jsx)(e$.A,{inset:"none",itemHeight:229,items:d,itemWidth:163,mode:"multi",renderItem:({item:e})=>p(e),showNavigationButtons:!0,showScrollMarkers:!0})})})})}function eF({onDismiss:e}){(0,a.useEffect)(()=>{(0,r.A)("LensPopoverHeader","/app/common/react/components/Lens/Uploader/Popover/LensPopoverHeader.tsx")},[]);let t=(0,s.A)();return(0,b.jsx)(o.az,{padding:6,children:(0,b.jsxs)(o.so,{alignItems:"center",justifyContent:"between",children:[(0,b.jsx)(o._Y,{accessibilityLevel:1,size:"400",children:t.bt("Upload an image to search", "Upload an image to search", "lens.popover.header", undefined, true)}),(0,b.jsx)(o.K0,{accessibilityLabel:t.bt("Close", "Close", "lens.popover.close", undefined, true),icon:"close",iconColor:"default",onClick:e,size:"lg"})]})})}function eH(){(0,a.useEffect)(()=>{(0,r.A)("LensUploadingOverlay","/app/common/react/components/Lens/Uploader/Popover/LensUploadingOverlay.tsx")},[]);let e=(0,s.A)().bt("Uploading image", "Uploading Image", "lens.loading.message", undefined, true);return(0,b.jsx)(o.az,{bottom:!0,color:"default",left:!0,margin:"auto",position:"absolute",right:!0,top:!0,children:(0,b.jsxs)(o.so,{alignItems:"center",direction:"column",gap:{row:0,column:6},height:"100%",justifyContent:"center",width:"100%",children:[(0,b.jsx)(o.y$,{accessibilityLabel:e,show:!0}),(0,b.jsx)(o.Wu,{children:e})]})})}var eV=n(483877);let eG="lens-url-input";function eW({error:e,isDisabled:t=!1,setValidationError:n,uploadImage:i}){(0,a.useEffect)(()=>{(0,r.A)("LensUrlUpload","/app/common/react/components/Lens/Uploader/Popover/UrlUpload/LensUrlUpload.tsx")},[]);let l=(0,s.A)(),{inputValue:c,handleInputChange:d,handleSubmit:u,handleKeyDown:p}=function({isDisabled:e,setValidationError:t,uploadImage:n}){let r=(0,s.A)(),{logContextEvent:o}=(0,_.o)(),[i,l]=(0,a.useState)(""),c=()=>{if(!e&&i){if(o({component:ei.SY,element:14559,event_type:15656,view_type:ei.CR}),!i.startsWith("data:image")&&!(0,eV.A)({url:i}))return void t(ew(r,eh));n(eT(i,r),ei.cr,"url")}};return{inputValue:i,handleInputChange:e=>{l(e),t("")},handleSubmit:c,handleKeyDown:e=>{"Enter"===e.key&&c()}}}({isDisabled:t,setValidationError:n,uploadImage:i});return(0,b.jsxs)(o.az,{paddingY:4,position:"relative",children:[(0,b.jsx)(x.A,{unsafeCSS:`
          #${eG} {
            padding-right: 52px !important;
          }
        `}),(0,b.jsx)(o.A_,{autoComplete:"url",disabled:t,errorMessage:e,hasError:!!e,id:eG,label:l.bt("Upload from URL", "Upload from URL", "lens.url.label", undefined, true),labelDisplay:"hidden",onChange:({value:e})=>d(e),onKeyDown:({event:e})=>p(e),placeholder:l.bt("Paste image link", "Paste image link", "lens.url.textField", undefined, true),size:"lg",type:"url",value:c}),(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{top:26}},paddingX:3,position:"absolute",right:!0,children:(0,b.jsx)(o.K0,{accessibilityLabel:l.bt("Submit", "Submit", "lens.url.submitButton", undefined, true),bgColor:"secondary",disabled:!c||t,icon:"chevron-right",onClick:u,size:"sm"})})]})}var eK=n(417978),eY=n(703672),eq=n(672908);let eJ={x:0,y:0,w:1,h:1};async function eX(e,t){let n=new FormData;n.append("image",e),n.append("x",String(eJ.x)),n.append("y",String(eJ.y)),n.append("w",String(eJ.w)),n.append("h",String(eJ.h));let r=await (0,eK.A)({url:ei.hU,type:"POST",data:n}).promise;if(!r.responseText)throw new eb(ex,{cause:"Empty response from server"});let a=JSON.parse(r.responseText);if(!a.success)throw new eb(ex,{cause:a.error||"Upload not successful"});if(!a.data||0===a.data.length)throw new eb(ef,{cause:a.error||"Empty data in the response"});if(!a.url)throw new eb(ex,{cause:a.error||"Missing API URL in response"});let o=a.url,i=a.image_signature,s={url:ei.b0,data:{url:o,crop_source:5,...eJ,add_fields:eq.A.base_grid_item.join(","),...null!=i&&{image_signature:i}}};return t((0,eY.O8)("ApiResource",s,{resource_response:{data:a.data??[],error:null},bookmarks:a.bookmark?[a.bookmark]:[]})),{apiUrl:o,imageSignature:i}}var eZ=n(350539),eQ=n(808571);function e0({anchor:e,onDismiss:t,searchBoxRef:n}){(0,a.useEffect)(()=>{(0,r.A)("LensPopover","/app/common/react/components/Lens/Uploader/Popover/LensPopover.tsx")},[]);let i=(0,s.A)(),{checkExperiment:l}=(0,M.A)(),c=l("dweb_search_omnipresent_multimodal").anyEnabled,d=(0,eQ.g)(),[u,p]=(0,a.useState)(null),[h,m]=(0,a.useState)(0),{isUploading:_,fileError:y,setFileError:f,urlError:x,setUrlError:v,uploadImage:w}=function({onDismiss:e}){let t=(0,s.A)(),n=(0,C.wA)(),r=(0,g.Zp)(),{pathname:o}=(0,g.zy)(),{setPreparedImage:i}=(0,eo.S)(),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),m=e=>{u(e),e&&h("")},_=e=>{h(e),e&&u("")},y=async(a,s,l)=>{let d="file"===l?m:_;d(""),c(!0);try{let t,l,c,{file:d,src:u,width:p,height:h}=await a();try{({apiUrl:t,imageSignature:l}=await eX(d,n))}catch(e){throw URL.revokeObjectURL(u),e}let m={file:d,src:u,apiUrl:t,imageSignature:l,width:p,height:h};i(m),(0,eZ.i6)(m),(c=new FormData).append("image",d),c.append("source_type",s),(0,eK.A)({url:ei.SK,type:"PUT",data:c}),"/lens-search"!==o&&r("/lens-search/"),e()}catch(e){d(e instanceof eb?ew(t,e.type):ev(t))}finally{c(!1)}};return{isUploading:l,fileError:d,setFileError:m,urlError:p,setUrlError:_,uploadImage:y}}({onDismiss:t});return((0,eD.r)({component:ei.SY,view_type:ei.CR}),(0,a.useLayoutEffect)(()=>{n.current&&p(n.current.getBoundingClientRect()),m(document.documentElement.clientWidth)},[n]),e)?(0,b.jsx)(o.Wd,{zIndex:ei.B4,children:(0,b.jsx)(o.AM,{accessibilityLabel:i.bt("Lens popover", "Lens popover", "lens.popover.accessibilityLabel", undefined, true),anchor:e,coordinates:c?void 0:{top:d,end:null!==u?h-u.right:0},idealDirection:c?"up":"down",offset:c&&null!==u?u.height-ei.eN:void 0,onDismiss:t,position:c?void 0:"fixed",positionRelativeToAnchor:c,size:"flexible",children:(0,b.jsxs)(o.az,{maxWidth:ei.OV,minWidth:ei._W,position:"relative",width:h/3,children:[(0,b.jsx)(eF,{onDismiss:t}),(0,b.jsxs)(o.az,{dangerouslySetInlineStyle:{__style:{maxHeight:`calc(100vh - ${d}px - ${ei.qm}px)`,flexDirection:"column"}},display:"flex",overflow:"auto",position:"relative",children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{flex:"1 1 320px",marginTop:2}},minHeight:150,paddingX:6,children:(0,b.jsx)(eR,{error:y,isDisabled:_,setValidationError:f,uploadImage:w})}),(0,b.jsx)(o.az,{paddingX:6,children:(0,b.jsx)(eW,{error:x,isDisabled:_,setValidationError:v,uploadImage:w})}),(0,b.jsx)(eN,{}),_&&(0,b.jsx)(eH,{})]})]})})}):null}function e1({searchBoxRef:e}){(0,a.useEffect)(()=>{(0,r.A)("LensButton","/app/www/discover/SearchBox/SearchBoxActions/LensButton.tsx")},[]);let t=(0,s.A)(),{logContextEvent:n}=(0,_.o)(),{isPopoverOpen:i,setIsPopoverOpen:l,setLensButtonMounted:c}=(0,eo.S)(),d=(0,a.useRef)(null);(0,j.A)(()=>(c(!0),n({component:43,element:1304,event_type:120}),()=>c(!1)));let u=(0,a.useCallback)(()=>{l(!i),n({component:43,element:1304,event_type:101})},[i,l,n]);return(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(o.K0,{ref:d,accessibilityLabel:t.bt("Lens", "Lens", "searchBox.lens.accessibilityLabel", undefined, true),icon:"search-by-image",onClick:u,tooltip:{text:t.bt("Upload image", "Upload image", "searchBox.lens.tooltip", undefined, true),idealDirection:"down",zIndex:J.Yo}}),i&&(0,b.jsx)(e0,{anchor:d.current,onDismiss:()=>l(!1),searchBoxRef:e})]})}function e2(){return"u">typeof window&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window)}var e3=n(640992);let e5={v:"4.8.0",meta:{g:"LottieFiles AE 3.6.0",a:"",k:"",d:"",tc:""},fr:25,ip:0,op:75,w:24,h:24,nm:"lottie_loop_3_sec",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[22.062,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.75],[-10.125,4.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:5,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-.703],[-10.125,.641]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:12,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:20,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:25,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.704],[-10.125,5.714]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:32,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3.25],[-10.125,3.194]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:39,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.544],[-10.125,4.522]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:45,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-.703],[-10.125,.641]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:52,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:67,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.685],[-10.125,7.748]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:71,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.451],[-10.125,5.474]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-4.75],[-10.125,4.688]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[17.047,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:7,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:18,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.135,-6.147],[-10.135,6.125]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:27,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.165,-1.59],[-10.165,1.514]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:38,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:46,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-4.346],[-10.154,4.304]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:53,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.151,-4.706],[-10.151,4.668]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:63,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.165,-1.59],[-10.165,1.514]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:71,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.135,-6.147],[-10.135,6.125]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-7.875],[-10.141,7.875]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[12.031,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:13,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.145,-5.963],[-10.145,5.901]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:24,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-.622],[-10.141,.622]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:33,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-6.64],[-10.154,6.587]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:42,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.141,-.622],[-10.141,.622]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:50,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.156,-7.75],[-10.156,7.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.15,-4.91],[-10.15,4.872]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:67,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.154,-6.64],[-10.154,6.587]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[7.016,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-6.062],[-10.109,5.688]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:10,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-3],[-10.125,2.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:20,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-7.688],[-10.109,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:29,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-.938],[-10.141,.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:39,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-4.734],[-10.117,4.456]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:46,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-.938],[-10.141,.938]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:56,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-5.148],[-10.121,5.07]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:65,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-1.818],[-10.137,1.802]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.109,-6.062],[-10.109,5.688]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2,12,0],ix:2},a:{a:0,k:[-10.125,-.031,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:0,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:7,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.688],[-10.125,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:17,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:26,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-5.438],[-10.125,5.413]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:33,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-1.062],[-10.125,1]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:40,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-6.851],[-10.125,6.734]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:50,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:60,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-7.688],[-10.125,7.562]],c:!1}]},{i:{x:.667,y:1},o:{x:.333,y:0},t:70,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]},{t:76,s:[{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-10.125,-2.062],[-10.125,2.188]],c:!1}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:165,st:0,bm:0}],markers:[{tm:75,cm:"",dr:0}]};function e6(){(0,a.useEffect)(()=>{(0,r.A)("AudioBars","/app/www/inclusiveProduct/VoiceSearch/AudioBars.tsx")},[]);let e=(0,s.A)().bt("Listening...", "Listening...", "searchBox.voiceSearch.accessibilityLabel", undefined, true),{animationContainerRef:t}=(0,e3.A)({animationData:e5,loop:!0,autoplay:!0,renderer:"svg",rendererSettings:{title:e},onDOMLoaded:()=>{let e=t.current?.querySelector("svg");e&&e.setAttribute("role","img")}});return(0,b.jsx)(o.so,{alignItems:"center",height:48,justifyContent:"center",width:48,children:t?(0,b.jsx)(o.n1,{height:24,width:24,children:(0,b.jsx)(o.az,{ref:t})}):(0,b.jsx)(o.In,{accessibilityLabel:e,color:"default",icon:"audio-bars",size:24})})}var e4=n(79906);function e7({onCloseClick:e}){(0,a.useEffect)(()=>{(0,r.A)("VoiceSearchPermissionsModal","/app/www/inclusiveProduct/VoiceSearch/VoiceSearchPermissionsModal.tsx")},[]);let t=(0,s.A)(),{logContextEvent:n}=(0,_.o)();(0,j.A)(()=>{n({event_type:13,view_type:2,component:15282})});let i=()=>{n({event_type:101,view_type:2,component:15282,element:75}),e()};return(0,b.jsx)(e4.Ay,{accessibilityModalLabel:t.bt("Voice search permissions modal", "Voice search permissions modal", "voiceSearch.accessibilityLabel", undefined, true),align:"start",heading:(0,b.jsx)(o._Y,{accessibilityLevel:1,size:"600",children:t.bt("Want to use voice search?", "Want to use voice search?", "voiceSearch.modal.header", undefined, true)}),isOpen:!0,onDismiss:i,size:"sm",children:(0,b.jsxs)(o.az,{direction:"column",display:"flex",paddingX:7,children:[(0,b.jsx)(o.KJ,{children:t.bt("Go to your browser settings to let Pinterest access the microphone", "Go to your browser settings to let Pinterest access the microphone", "voiceSearch.modal.message", undefined, true)}),(0,b.jsx)(o.az,{display:"flex",justifyContent:"end",marginBottom:6,marginTop:7,children:(0,b.jsx)(o.$n,{accessibilityLabel:t.bt("Close", "Close", "voiceSearch.close.button", undefined, true),color:"primary",onClick:i,size:"md",text:t.bt("Close", "Close", "voiceSearch.close.button", undefined, true)})})]})})}function e8(){(0,a.useEffect)(()=>{(0,r.A)("VoiceSearchEntryPoint","/app/www/discover/SearchBox/SearchBoxActions/VoiceSearchEntryPoint.tsx")},[]);let e=(0,s.A)(),{logContextEvent:t}=(0,_.o)(),{checkExperiment:n}=(0,M.A)(),{handleTextChange:i,handleVoiceSearchSubmit:l,voiceSearchPlaceholder:c,setVoiceSearchPlaceholder:d}=(0,P.Z)(),[u,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),g=(0,a.useRef)(null),y=n("web_lens",{dangerouslySkipActivation:!0}).anyEnabled;(0,a.useEffect)(()=>{m(e2())},[]),(0,j.A)(()=>{t({event_type:120,view_type:2,component:43,element:15977})});let f=(0,a.useCallback)(()=>{g.current&&(g.current.stop(),d(O.g.NULL))},[d]);if((0,a.useEffect)(()=>{c===O.g.CANCEL&&(f(),d(O.g.NULL))},[c,f,d]),!h)return null;let x=async()=>{t({event_type:101,view_type:2,component:43,element:15977});try{let e,n=await navigator.permissions.query({name:"microphone"});if("denied"===n.state){d(O.g.NULL),p(!0);return}let r=new(window.webkitSpeechRecognition||window.SpeechRecognition);g.current=r,r.lang="en-US",r.interimResults=!1,e=void 0,i(""),d(O.g.NULL),r.onstart=()=>{d(O.g.LISTENING)},r.onresult=t=>{let n=t.results?.[0]?.[0]?.transcript;n&&(e=n)},r.onerror=e=>{d(null),"permission-denied"===e.error&&p(!0)},r.onend=()=>{e&&c!==O.g.CANCEL?(l(e),d(null)):"prompt"===n.state?d(null):(t({event_type:16683,view_type:2,component:43,aux_data:{reason:"voice search miss"}}),d(O.g.DEFAULT)),e=void 0},r.start()}catch(e){t({event_type:16683,view_type:2,component:43,aux_data:{error_message:(0,ez.A)(e,"message")}})}};return(0,b.jsxs)(a.Fragment,{children:[c===O.g.LISTENING?(0,b.jsx)(e6,{}):(0,b.jsx)(o.K0,{accessibilityLabel:e.bt("Voice search", "Voice search", "searchBox.voiceSearch.accessibilityLabel", undefined, true),icon:"microphone",iconColor:"default",onClick:x,tooltip:y?{text:e.bt("Search by voice", "Search by voice", "searchBox.voice.tooltip", undefined, true),idealDirection:"down",zIndex:J.Yo}:void 0}),u&&(0,b.jsx)(e7,{onCloseClick:()=>p(!1)})]})}function e9({displayedQuery:e,hasAppliedQuery:t,hasTypedSinceFocus:n,isInlineSYOP:i,isInTypeaheadSession:s,onClearSearch:l,searchBoxRef:c,voiceSearchPlaceholder:d}){(0,a.useEffect)(()=>{(0,r.A)("SearchBoxActions","/app/www/discover/SearchBox/SearchBoxActions/SearchBoxActions.tsx")},[]);let{multimodalPinId:u,setSuggestionsHovered:p}=(0,P.Z)(),{showCancel:m,showLens:_,showVoice:y}=function({displayedQuery:e,hasTypedSinceFocus:t,isInlineSYOP:n,voiceSearchPlaceholder:r}){let{language:a}=(0,h._8)(),o=(0,g.zy)(),i=(0,f.A)(),{isSyop:s}=(0,P.Z)(),l=(0,L.VX)(o),{checkExperiment:c}=(0,M.A)(),d=i.isAuth,u=e2(),p=r===O.g.LISTENING,m=d&&!n&&!s&&!l&&c("web_lens",{dangerouslySkipActivation:!0}).anyEnabled,_=u&&d&&!n&&a.startsWith("en");return p?{state:"voiceListening",showCancel:!0,showLens:!1,showVoice:!0}:e?t?{state:"typing",showCancel:!0,showLens:!1,showVoice:_}:{state:"filled",showCancel:!0,showLens:m,showVoice:_}:{state:"empty",showCancel:!1,showLens:m,showVoice:_}}({displayedQuery:e,hasTypedSinceFocus:n,isInlineSYOP:i,voiceSearchPlaceholder:d}),x=!!(0,$.A)()&&!i,v=u&&!x&&s;return(0,b.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:x||v?{__style:{bottom:4}}:void 0,display:"flex",marginEnd:1,marginStart:3,onMouseDown:e=>{e.preventDefault()},onMouseEnter:()=>{p(!0)},position:x||v?"absolute":void 0,right:!!(x||v),children:[m&&(0,b.jsx)(ea,{hasAppliedQuery:t,isInlineSYOP:i,onClear:l}),_&&(0,b.jsx)(e1,{searchBoxRef:c}),y&&(0,b.jsx)(e8,{})]})}var te=n(987628),tt=n(652567);let tn={recentSaves:[],recentViews:[]};function tr(e,t){if(e=e||tn,"FETCH_COMPLETE"!==t.type)return e;{let{options:n={},resource:r}=t.payload,{data:a}=t.payload.response.resource_response;if("ApiResource"===r&&"/v3/users/me/recent/engaged/pin/stories/"===n.url&&a){let t=a.find(e=>"user_recently_viewed_pins"===e.story_type),n=a.find(e=>"user_recently_saved_pins"===e.story_type),r=t?.objects.map(({description:e,id:t,images:n},r)=>({label:e,images:n,resultIndex:r,type:"recent_view",url:`/pin/${t}`}))||[],o=n?.objects.map(({description:e,id:t,images:n},r)=>({label:e,images:n,resultIndex:r,type:"recent_save",url:`/pin/${t}`}))||[];return{...e,recentSaves:o,recentViews:r}}return e}}let{Provider:ta,get:to}=(0,te.A)("SearchBox");function ti({children:e}){let[t,n]=(0,a.useReducer)(tr,tn),r=(0,a.useCallback)(e=>{n({type:"FETCH_COMPLETE",payload:e})},[]);(0,tt.jY)("ApiResource",r);let o=(0,a.useMemo)(()=>({state:t}),[t]);return(0,b.jsx)(ta,{value:o,children:e})}var ts=n(75840),tl=n(971289);function tc({autocompleteRequestSurface:e}){let t=(0,tl.qJ)(),n=(0,f.A)();return(0,ts.A)(n.isAuth?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:W.cO.PINS,autocomplete_request_surface:e},noCache:!0}:null),(0,ts.A)(t?{name:"SearchTabResource"}:null),null}let td=(0,n(16917).A)("autocomplete_render");var tu=n(114735),tp=n(621556),th=n(24086),tm=n(406661),tg=n(542975),t_=n(319571),ty=n(668014);let tf=({children:e,impressionTrackerProps:t})=>((0,a.useEffect)(()=>{(0,r.A)("MaybeImpressionTracker","/app/packages/impression-logging/MaybeImpressionTracker.tsx")},[]),t?(0,b.jsx)(eU.g$,{...t,children:e}):e({impressionTrackerRef:null}));var tx=n(618243),tb=n(386379);function tv({onLoad:e,suggestion:t}){(0,a.useEffect)(()=>{(0,r.A)("AutocompleteUpsellSuggestions","/app/www/discover/SearchBox/AutocompleteUpsellSuggestions.tsx")},[]);let n=(0,tb.A)({url:t.action_button_uri});return(0,a.useEffect)(()=>{e()},[]),(0,b.jsxs)(o.az,{padding:10,children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{color:"#004b91",fontSize:"28px",WebkitFontSmoothing:"antialiased"}},marginBottom:6,children:t.description}),(0,b.jsx)(o.$A,{href:t.action_button_uri,rel:n?"nofollow":"none",rounding:"pill",children:(0,b.jsx)(o.az,{color:"info",display:"inlineBlock",padding:3,rounding:"pill",children:(0,b.jsx)(o.KJ,{color:"inverse",weight:"bold",children:t.action_button_text})})})]})}var tw=n(323250),tA=n(528045),tS=n(464224);let tj=(0,a.lazy)(()=>n.e("58329").then(n.bind(n,521344)));function tP({experiences:e,index:t,focusedIndex:n,onSuggestionMouseEnter:r,onSuggestionMouseLeave:i,onLoad:s,query:l,suggestion:c}){let d=(0,tA.A)(c),{handleSuggestionSelect:u,handleInclusiveProductFilterClick:p,getSuggestionImpressionOptions:h}=(0,P.Z)();return(0,a.useEffect)(()=>{c.image||s()},[]),(0,b.jsx)(ee.cO,{experiences:e,placementId:1000315,searchTerm:l,suggestions:[c],children:({searchDelightConfig:e})=>(0,b.jsx)(tf,{impressionTrackerProps:h({index:t,groupIndex:t,suggestion:c,loggingId:c.id}),children:({impressionTrackerRef:a})=>(0,b.jsxs)(o.az,{ref:a,marginBottom:1,marginEnd:-3,marginStart:-3,children:[(0,b.jsx)(tw.m,{id:(0,T.mc)(0,t),isHovered:n===t,onClick:()=>{u({suggestion:c,index:t})},onMouseEnter:()=>{r(t)},onMouseLeave:()=>{i()},url:(0,T.R7)({suggestion:c,query:l}),children:(0,b.jsx)(o.so,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(o.az,{flex:"grow",children:(0,b.jsx)(tw.A,{highlightMatch:!0,imageUrl:c.image,label:c.label,onLoad:s,query:l,rounding:2,searchDelightConfig:e,subLabel:c.subLabel,type:c.type})})})}),!!d&&d!==tS.zB.BODY&&p&&(0,b.jsx)(o.so,{alignItems:"center",justifyContent:"start",overflow:"hidden",children:(0,b.jsx)(ty.A,{name:"SafeSuspense_BlendedTypeaheadSuggestion_InclusiveFilters",children:(0,b.jsx)(tx.A,{children:(0,b.jsx)(tj,{filters:{[d]:c.modified_filter_eligibility?.[d]?.filter_options},moduleType:tS.P4.SEARCH_AUTOCOMPLETE,onClickApplyFilters:e=>p(c,t,e),query:l,viewParameter:103,viewType:2})})})})]})})})}let tk=({index:e,focusedIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:r,onLoad:a,suggestion:i})=>{let{handleSuggestionSelect:s,getSuggestionImpressionOptions:l}=(0,P.Z)();return(0,b.jsx)(tf,{impressionTrackerProps:l({index:e,groupIndex:e,suggestion:i,loggingId:i.id}),children:({impressionTrackerRef:l})=>(0,b.jsx)(o.az,{ref:l,marginBottom:1,marginEnd:-3,marginStart:-3,children:(0,b.jsx)(tw.m,{id:(0,T.mc)(0,e),isHovered:t===e,onClick:()=>{s({suggestion:i,index:e})},onMouseEnter:()=>{n(e)},onMouseLeave:()=>{r()},url:i.url,children:(0,b.jsx)(tw.A,{imageUrl:i.image,isVerifiedMerchant:i.is_verified_merchant,label:i.label,onLoad:a,rounding:"circle",subLabel:i.subLabel,verified:i.verified})})},`${i.type}-${i.label}-${i.subLabel||""}`)})};function tz({experiences:e,suggestions:t,focusedIndex:n,query:o,onSuggestionMouseEnter:i,onSuggestionMouseLeave:s}){(0,a.useEffect)(()=>{(0,r.A)("BlendedTypeaheadSuggestion","/app/www/discover/SearchBox/BlendedTypeaheadSuggestion.tsx")},[]);let l=d(),c=e=>"image"in e&&e.image,u=t.some(c),p=()=>{l?.stop(),td.isActive()&&td.stop()};return t.map((t,r)=>{let a=!u||c(t);switch(t.type){case"autocompleteupsell":return(0,b.jsx)(tv,{onLoad:a?p:()=>{},suggestion:t},`search-suggestion-${t.type}-${t.id}`);case"query":case"recent_pin_searches":return(0,b.jsx)(tP,{experiences:e,focusedIndex:n,index:r,onLoad:a?p:()=>{},onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,query:o,suggestion:t},`search-suggestion-${t.type}-${t.id}`);case"user":return(0,b.jsx)(tk,{focusedIndex:n,index:r,onLoad:a?p:()=>{},onSuggestionMouseEnter:i,onSuggestionMouseLeave:s,suggestion:t},`search-suggestion-${t.type}-${t.id}`);default:return null}})}var tI=n(65881),tE=n(241037),tT=n(733048),tC=n(745489),tL=n(713364),tB=n(535078);function tR({contextLogData:e,dominantColor:t,groupIndex:n,height:i,icon:l,images:c,isDarkRep:d=!1,isHovered:u,title:p,onMouseEnter:h,onMouseLeave:m,onClick:g,searchBoxRenderStopwatch:_,suggestion:y,showRemoveButton:f=!1,slotIndex:x,url:v,width:w}){(0,a.useEffect)(()=>{(0,r.A)("SearchInFeedRep","/app/common/react/components/discover/stories/SearchInFeedRep.tsx")},[]);let A=(0,s.A)(),{autocompleteRequestSurface:S,getSuggestionImpressionOptions:j,isSyop:k}=(0,P.Z)(),{group:z,anyEnabled:I}=(0,tL.A)({isSyop:k}),E=(0,tB.A)(S),T=z.includes("vertical"),C=i||80,L=c&&c[0]&&c[0]["236x"]?.url||"";(0,tE.A)("search_tab_render",L,"recent_query"===y.type?"200x":"236x");let B=!!l&&(0,tT.A)(l),R=!!w&&w<160||!!i&&i<60,M=R&&!I?"200":"300",D=I?void 0:"bold",$=(R||I)&&2||3,U=R&&2||I&&3||4,O=w?w-C:156,N=R?300:400,F=R?300:400,H=R?200:300,V=R?200:300,G=()=>{_?.stop();let e=(0,tu.A)();e.isActive()&&e.stop()},W=async e=>{await (0,eI.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}}),E()};return(0,b.jsx)(tf,{impressionTrackerProps:j({index:x,additionalAuxData:e,groupIndex:n,suggestion:y,loggingId:y.id}),children:({impressionTrackerRef:e})=>(0,b.jsx)(o.az,{ref:e,"data-test-id":f?"recent-query":void 0,height:C,width:w||"100%",children:(0,b.jsx)(o.n1,{rounding:N,wash:!d&&!T,children:(0,b.jsxs)(o.az,{dangerouslySetInlineStyle:I?void 0:{__style:d&&{backgroundColor:u?"var(--base-color-grayscale-350)":"var(--base-color-grayscale-400)"}||u&&tC.a.lightHoverOverlay||{}},children:[(0,b.jsx)(tw.m,{isHovered:u,onBlur:()=>{},onClick:g,onFocus:h,onMouseEnter:h,onMouseLeave:m,rounding:F,url:v,children:(0,b.jsxs)(o.so,{direction:"row",children:[(0,b.jsx)(o.az,{"data-test-id":"search-suggestion-image-container",flex:"none",height:C,padding:I?1:void 0,width:C,children:L?(0,b.jsx)(o.n1,{height:"100%",rounding:I?H:void 0,wash:!0,width:"100%",children:(0,b.jsx)(o._V,{alt:"",color:t,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:G,role:"presentation",src:L})}):(0,b.jsx)(o.az,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:I?V:void 0,width:"100%",children:(0,b.jsx)(o.In,{accessibilityLabel:"",color:"dark",icon:"magnifying-glass",size:24})})}),(0,b.jsxs)(o.az,{alignItems:"center",display:"flex",flex:"grow",maxHeight:C,maxWidth:I?void 0:O,padding:U,children:[B&&(0,b.jsx)(o.az,{alignItems:"center",display:"flex",flex:"none",marginEnd:2,children:(0,b.jsx)(o.In,{accessibilityLabel:"",icon:B,inline:!0,size:14})}),(0,b.jsx)(o.KJ,{color:d?"light":void 0,dataTestId:"search-suggestion-text",lineClamp:$,size:M,weight:D,children:p})]}),f&&(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{visibility:u?"visible":"hidden"}},"data-test-id":"clear-recent-queries",display:"flex",flex:"none",marginEnd:2,marginStart:-1,children:(0,b.jsx)(o.K0,{accessibilityLabel:A.bt("Remove recent search", "Remove recent search", "Remove recent search icon in search autocomplete", undefined, true),bgColor:"default",focusColor:"darkBackground",icon:"close",iconColor:"default",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),W(p)},padding:2,size:"sm"})})]})}),f&&(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{visibility:u?"visible":"hidden"}},"data-test-id":"clear-recent-queries",marginEnd:2,marginTop:7,onMouseEnter:h,onMouseLeave:m,position:"absolute",right:!0,top:!0,children:(0,b.jsx)(o.K0,{accessibilityLabel:A.bt("Remove recent search", "Remove recent search", "Remove recent search icon in search autocomplete", undefined, true),focusColor:"darkBackground",icon:"close",iconColor:"default",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),W(p)},padding:2,size:"sm"})})]})})})})}var tM=n(284247),tD=n(989457);function t$({coverImage:e,creator:t,formattedTitle:n,height:i,id:s,impressionTrackerRef:l,inheritedIsHovered:c,onClick:d,onMouseDown:u,onMouseEnter:p,onMouseLeave:h,searchBoxRenderStopwatch:m,url:g,width:_}){(0,a.useEffect)(()=>{(0,r.A)("SimpleBubble","/app/www/discover/Bubbles/SimpleBubble.tsx")},[]);let y=t?.avatar_color_index;return(0,b.jsx)(tC.A,{ref:l,backgroundColor:"gray",coverImage:e,disableTabIndex:!0,height:i,id:s,isHovered:c,onClick:d,onMouseDown:u,onMouseEnter:p,onMouseLeave:h,searchBoxRenderStopwatch:m,url:g,width:_,children:(0,b.jsx)(o.az,{ref:l,alignItems:"end",display:"flex",height:i,justifyContent:"center",padding:3,position:"absolute",top:!0,width:_||"100%",children:(0,b.jsxs)(o.so,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[i>200?(0,b.jsx)(o._Y,{align:"center",color:"light","data-test-id":"sp-bubble-title",size:"600",children:n}):(0,b.jsx)(o.KJ,{align:"center",color:"light","data-test-id":"sp-bubble-subtitle",weight:"bold",children:n}),t&&t.image_small_url&&t.full_name&&(0,b.jsxs)(o.az,{alignItems:"center","data-test-id":"sp-bubble-creator",display:"flex",justifyContent:"center",marginTop:4,children:[(0,b.jsx)(o.az,{marginEnd:2,children:(0,b.jsx)(tD.eu,{color:y,name:t.full_name,outline:!0,size:"xs",src:t.image_small_url})}),(0,b.jsx)(o.KJ,{color:"light",size:"100",children:t.full_name})]})]})})})}var tU=n(194046);function tO({board:e,height:t,isHovered:n,searchBoxRenderStopwatch:o,slotIndex:i,storyId:s,storyType:l,viewParameter:c,viewType:d,width:u,...p}){(0,a.useEffect)(()=>{(0,r.A)("EditorialBoardBubble","/app/www/discover/Bubbles/EditorialBoardBubble.tsx")},[]);let{id:h,name:m,image_cover_hd_url:g,owner:_,url:y}=e,f=(0,tM.A)(m||"",{});return m&&h&&y?(0,b.jsx)(tU.D6,{auxData:{grid_index:i.toString(),board_id:h,story_type:l,story_id:s},loggingId:h,objectIdStr:h,slotIndex:i,viewParameter:c||3467,viewType:d,children:({impressionTrackerRef:e})=>(0,b.jsx)(t$,{coverImage:{url:g},creator:_,formattedTitle:f,height:t,id:h,impressionTrackerRef:e,inheritedIsHovered:n,searchBoxRenderStopwatch:o,url:y,width:u,...p})}):null}var tN=n(755817);function tF({component:e,height:t,isHovered:n,searchBoxRenderStopwatch:o,slotIndex:i,storyId:s,storyType:l,todayArticle:c,viewParameter:d,viewType:u,width:p,...h}){(0,a.useEffect)(()=>{(0,r.A)("TodayArticleBubble","/app/www/discover/Bubbles/TodayArticleBubble.tsx")},[]);let{id:m,title:g,image_urls:_,article_creator_user:y,feed_source:f,is_product_pin_feed:x}=c,v=_&&_.length>0?{url:_[0]}:void 0,w=(0,tM.A)(g||"",{});if(!g||!m)return null;let A=(0,tN.oF)(f??0,x??!1,g,m);return(0,b.jsx)(tU.hK,{auxData:{grid_index:i.toString(),today_article_id:m,story_type:l,story_id:s},component:e,loggingId:m,objectIdStr:m,slotIndex:i,viewParameter:d||3467,viewType:u,children:({impressionTrackerRef:e})=>(0,b.jsx)(t$,{coverImage:v,creator:y,formattedTitle:w,height:t,id:m,impressionTrackerRef:e,inheritedIsHovered:n,searchBoxRenderStopwatch:o,url:A,width:p,...h})})}function tH(e){(0,a.useEffect)(()=>{(0,r.A)("TatSpBubble","/app/www/discover/Bubbles/TatSpBubble.tsx")},[]);let{bubble:t}=e;return"board"===t.type?(0,b.jsx)(tO,{...e,board:t}):(0,b.jsx)(tF,{...e,todayArticle:t})}function tV({children:e,prototypeSLP:t,containerWidth:n,repType:i="default"}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionsGrid","/app/www/discover/SearchBox/SuggestionsGrid.tsx")},[]);let{checkExperiment:s}=(0,M.A)(),l=s("dweb_ac_empty_state_new_user_onboarding_exp",{dangerouslySkipActivation:!0}).group,c=!!(0,$.A)();return t?(0,b.jsx)(o.xA,{columnGap:2,rowGap:2,templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:`repeat(${c?3:2}, 1fr)`,lg:`repeat(${c?3:4}, 1fr)`,xl:`repeat(${c?3:4}, 1fr)`,xxl:"repeat(4, 1fr)"},children:e({width:void 0,height:"trending"===i&&72||"nux"===i&&"enabled_4reps"===l&&110||88})}):(0,b.jsx)(o.so,{alignItems:"stretch",direction:"row",gap:2,justifyContent:"start",wrap:!0,children:e(function({containerWidth:e}){let t,n=4,r=t=>e?(e-(64+8*(t-1)))/t:236;for(t=r(4);t<177&&n>1;)n-=1,t=r(n);for(;t>354;)n+=1,t=r(n);let a=Math.max(60,t/2.6);return{width:t,height:a}}({containerWidth:n}))})}function tG({title:e,action:t,prototypeSLP:n}){return(0,b.jsxs)(o.az,{alignItems:"center","data-test-id":"suggestion-group-heading",display:"flex",justifyContent:"between",marginEnd:2,children:[n?(0,b.jsx)(o.az,{marginEnd:1,paddingX:1,children:(0,b.jsx)(o._Y,{lineClamp:1,size:"400",children:e})}):(0,b.jsx)(o._Y,{lineClamp:1,size:"300",children:e}),n&&t&&(0,b.jsx)(o.so.Item,{flexBasis:"shrink",children:(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{top:2}},position:"relative",children:(0,b.jsx)(o.pp,{onMouseEnter:t.onFocus,onMouseLeave:t.onBlur,children:(0,b.jsx)(o.Rp,{onBlur:t.onBlur,onFocus:t.onFocus,onTap:t.onClick,children:(0,b.jsx)(o.KJ,{color:"subtle",children:(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{lineHeight:1}},children:t.text})})})})})})]})}let tW=({handleRemove:e,id:t,isHovered:n,label:r,onClick:a,onMouseEnter:i,onMouseLeave:s,removeA11yText:l,url:c})=>(0,b.jsx)(o.az,{"aria-selected":n?"true":"false","data-test-id":"search-suggestion",id:t,marginBottom:2,marginEnd:2,role:"option",children:(0,b.jsx)(o.$A,{accessibilityLabel:r,href:c,onMouseEnter:i,onMouseLeave:s,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{e.metaKey||e.ctrlKey||(t(),e.preventDefault(),a())},rounding:"pill",children:(0,b.jsxs)(o.az,{alignItems:"center",color:n?void 0:"secondary",dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",...n?{backgroundColor:"#dadada"}:{}}},display:"flex",paddingX:3,paddingY:1,position:"relative",rounding:"pill",children:[(0,b.jsx)(o.KJ,{align:"center",children:r}),(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{paddingTop:"2px"}},"data-test-id":"clear-recent-queries",marginStart:2,children:(0,b.jsx)(o.K0,{accessibilityLabel:l??"",icon:"close",iconColor:"default",onClick:({event:t})=>{t.stopPropagation(),t.preventDefault(),e?.(r)},size:"xs"})})]})})}),tK=({id:e,isHovered:t,onClick:n,onMouseEnter:r,onMouseLeave:i,showSeeMoreOverlay:l,suggestion:c,trackClick:d,url:u})=>{let p=(0,s.A)();return(0,b.jsx)(o.az,{"aria-selected":t?"true":"false","data-test-id":"search-suggestion",id:e,marginBottom:2,paddingX:1,role:"option",children:(0,b.jsx)(o.$A,{href:u||c.url,onMouseEnter:r,onMouseLeave:i,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),d(),e.metaKey||e.ctrlKey||u||(e.preventDefault(),n())},rounding:300,tabIndex:-1,children:(0,b.jsxs)(o.n1,{height:116,rounding:300,wash:t,width:90,children:[c.images["236x"]?.url&&(0,b.jsx)(o._V,{alt:c.label,fit:"cover",naturalHeight:c.images["236x"]?.height??1,naturalWidth:c.images["236x"]?.width??1,src:c.images["236x"].url}),l&&(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:V.t5,height:116,left:!0,position:"absolute",top:!0,width:90}),(0,b.jsx)(o.az,{alignItems:"center",display:"flex",height:116,justifyContent:"center",padding:3,position:"absolute",top:!0,width:90,children:(0,b.jsx)(o.KJ,{align:"center",color:"inverse",dataTestId:"see-more-suggestions-overlay",weight:"bold",children:p.bt("See more", "See More", "searchBox.suggestionGroups.recentPinRep.seeMoreText", undefined, true)})})]})]})})})},tY=({componentType:e,focusedIndex:t,groupIndex:n,keyPrefix:r,onSuggestionMouseEnter:a,onSuggestionMouseLeave:i,seeMoreUrl:s,suggestions:l,title:c})=>{let{logContextEvent:d}=(0,_.o)(),{handleSuggestionSelect:u}=(0,P.Z)();return(0,b.jsxs)(o.so,{dataTestId:`${r}_section`,direction:"column",gap:4,children:[(0,b.jsx)(o.so,{width:"100%",children:(0,b.jsx)(tG,{title:c})}),(0,b.jsx)(o.so,{alignItems:"stretch",justifyContent:"start",width:"100%",wrap:!0,children:l.map((o,c)=>{let p=6===c&&7===l.length;return(0,b.jsx)(tK,{id:(0,T.mc)(n,c),isHovered:t===c,onClick:()=>{u({suggestion:o,index:c})},onMouseEnter:()=>{a(c)},onMouseLeave:()=>{i()},showSeeMoreOverlay:p,suggestion:o,trackClick:()=>{d({event_type:101,component:e,element:p?179:12374,view_type:2,view_parameter:103})},url:p?s:o.url},`${r}-${c}`)})})]})};function tq({focusedIndex:e,groupIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,suggestions:i}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let l=(0,s.A)();return(0,eD.r)({component:13844,view_parameter:103,view_type:2}),(0,b.jsx)(tY,{componentType:13844,focusedIndex:e,groupIndex:t,keyPrefix:"recent_save",onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,seeMoreUrl:"/me/pins/",suggestions:i,title:l.bt("Recently saved", "Recently saved", "searchBox.recentSavedSuggestions.heading", undefined, true)})}function tJ({suggestion:e,groupIndex:t,index:n,focusedIndex:r,onSuggestionMouseEnter:a,onSuggestionMouseLeave:i}){let{handleSuggestionSelect:l,getSuggestionImpressionOptions:c,autocompleteRequestSurface:d}=(0,P.Z)(),u=(0,tB.A)(d),p=(0,s.A)(),h=async e=>{await (0,eI.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}}),u()},m=p.bt("Remove", "Remove", "Remove recent search in search typeahead suggestion", undefined, true);return(0,b.jsx)(tf,{impressionTrackerProps:c({index:n,groupIndex:t,suggestion:e,loggingId:e.id}),children:({impressionTrackerRef:s})=>(0,b.jsx)(o.az,{ref:s,"data-test-id":"recent-query",children:(0,b.jsx)(tW,{handleRemove:h,id:(0,T.mc)(t,n),isHovered:r===n,label:e.label,onClick:()=>{l({suggestion:e,index:n})},onMouseEnter:()=>{a(n)},onMouseLeave:()=>{i()},removeA11yText:m,url:(0,T.R7)({suggestion:e,query:""})})},`${e.type}-${e.label}`)})}function tX({containerWidth:e,focusedIndex:t,groupIndex:n,onSuggestionMouseEnter:i,onSuggestionMouseLeave:l,searchBoxRenderStopwatch:c,suggestions:d}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let u=(0,s.A)(),{isSyop:p}=(0,P.Z)(),{anyEnabled:h}=(0,tL.A)({isSyop:p}),{handleSuggestionSelect:m}=(0,P.Z)(),g=(0,T.Dq)({pillLabels:d.map(e=>e.label),maxWidth:e});return(0,b.jsxs)(o.so,{direction:"column",gap:4,children:[(0,b.jsx)(tG,{prototypeSLP:h,title:u.bt("Recent searches", "Recent searches", "Recent searches heading in search autocomplete", undefined, true)}),h?(0,b.jsx)(tV,{containerWidth:e,numItems:d.length,prototypeSLP:h,repType:"recentSearch",children:({width:e,height:r})=>d.map((a,o)=>(0,b.jsx)(tR,{groupIndex:n,height:r,images:a.image_preview_pins?.map(e=>({"236x":{...e.image_medium_size_pixels,url:e.image_medium_url}})),isHovered:t===o,onClick:()=>{m({suggestion:a,index:o})},onMouseEnter:()=>{i(o)},onMouseLeave:()=>{l()},searchBoxRenderStopwatch:c,showRemoveButton:!0,slotIndex:o,suggestion:a,title:a.label,url:(0,T.R7)({suggestion:a,query:""}),width:e},a.label))}):(0,b.jsx)(o.az,{display:"flex",overflow:"hidden",position:"relative",children:d.slice(0,g).map((e,r)=>(0,b.jsx)(tJ,{focusedIndex:t,groupIndex:n,index:r,onSuggestionMouseEnter:i,onSuggestionMouseLeave:l,suggestion:e},e.label))})]})}function tZ({focusedIndex:e,groupIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,suggestions:i}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let l=(0,s.A)();return(0,eD.r)({component:13843,view_parameter:103,view_type:2}),(0,b.jsx)(tY,{componentType:13843,focusedIndex:e,groupIndex:t,keyPrefix:"recent_view",onSuggestionMouseEnter:n,onSuggestionMouseLeave:o,seeMoreUrl:"/recently-viewed/",suggestions:i,title:l.bt("Recently viewed", "Recently viewed", "searchBox.recentSavedSuggestions.heading", undefined, true)})}function tQ({groupIndex:e,focusedIndex:t,onSuggestionMouseEnter:n,onSuggestionMouseLeave:i,searchBoxRenderStopwatch:s,suggestions:l}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let{id:c,items:d,story_type:u,title:{format:p}}=l,{handleSuggestionSelect:h,getSuggestionImpressionOptions:m}=(0,P.Z)(),g=d.map(({type:e,id:t})=>e+":"+t).join("|");return(0,b.jsxs)(o.so,{direction:"column",gap:4,children:[(0,b.jsx)(tG,{title:p}),(0,b.jsx)(tf,{impressionTrackerProps:m({additionalAuxData:{content_ids:g,story_id:c,story_type:u},suggestion:d[0],index:e,groupIndex:e,loggingId:c}),children:({impressionTrackerRef:r})=>(0,b.jsx)(o.az,{ref:r,display:"flex",marginBottom:5,wrap:!0,children:d.map((r,a)=>{let l=t===a;return(0,b.jsx)(o.az,{"aria-selected":l?"true":"false","data-test-id":"search-suggestion-today-bubble",id:(0,T.mc)(e,a),marginBottom:2,paddingX:1,role:"option",children:(0,b.jsx)(tH,{bubble:r,component:13525,height:192,isHovered:l,onClick:()=>{h({suggestion:r,index:a})},onMouseEnter:()=>{n(a)},onMouseLeave:()=>{i()},searchBoxRenderStopwatch:s,slotIndex:a,storyId:c,storyType:u,viewParameter:3467,viewType:2,width:192})},`story--${e}-${a}`)})})})]})}function t0({containerWidth:e,focusedIndex:t,groupIndex:n,index:i,onSuggestionMouseEnter:s,onSuggestionMouseLeave:l,searchBoxRenderStopwatch:c,suggestions:d}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionGroups","/app/www/discover/SearchBox/SuggestionGroups.tsx")},[]);let{logContextEvent:u}=(0,_.o)(),{isSyop:p}=(0,P.Z)(),[h,m]=(0,a.useState)(!1),{action:g,id:y,items:f,story_type:x,title:{format:v}}=d,w=f[0]&&"explorearticle"===f[0].type&&f[0].story_category,{anyEnabled:A}=(0,tL.A)({isSyop:p}),S="shopping_spotlight"===x,{handleSuggestionSelect:j,getSuggestionImpressionOptions:k}=(0,P.Z)(),z=f.map(({type:e,id:t})=>e+":"+t).join("|"),I=(0,tB.A)(0),E=async e=>{await (0,eI.A)({url:"/v3/search/recent/",method:"DELETE",data:{query:e}})},C=g&&g.text?{text:g.text,onClick:()=>{d.custom_properties?.recent_searches?.forEach(e=>E(e)),I()},onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}:void 0;return(0,b.jsxs)(o.so,{dataTestId:"search-story-suggestions-container",direction:"column",gap:4,children:[(0,b.jsx)(tG,{action:C,prototypeSLP:A,title:v}),(0,b.jsx)(tf,{impressionTrackerProps:k({additionalAuxData:{content_ids:z,story_id:y,story_type:x},suggestion:f[0],index:n,groupIndex:n,loggingId:y}),children:({impressionTrackerRef:r})=>(0,b.jsx)(o.az,{ref:r,children:(0,b.jsx)(tV,{containerWidth:e,numItems:f.length,prototypeSLP:A,repType:2===w&&"trending"||"search_tab_nux_topic_articles"===x&&"nux"||"default",children:({width:e,height:r})=>f.map((a,d)=>{let p=i+d;if(S){let{id:e}=a;return(0,b.jsx)(tH,{bubble:a,height:192,onClick:()=>{u({component:200,event_type:101,view_parameter:3467,view_type:2,aux_data:{article_id:e,autocomplete_type:"recommended_article",story_type:x}})},onMouseDown:({event:e})=>e.preventDefault(),slotIndex:p,viewParameter:3467,viewType:2,width:192},`ss-bubble-${e}`)}{let i=h||t===p,{cover_images:u,dominant_colors:m,id:g,story_category:_,title:{format:f},subtitle:v,identifier_icon_type:w}=a,A=(0,T.R7)({suggestion:a,query:"",suggestionStoryId:y});return(0,b.jsx)(o.az,{"aria-selected":i?"true":"false","data-test-id":"search-suggestion",id:(0,T.mc)(n,d),role:"option",children:(0,b.jsx)(tR,{contextLogData:{story_type:x,content_ids:z,grid_index:d,story_id:y},dominantColor:m?.[0]??"",groupIndex:n,height:r,icon:w,images:u,isHovered:i,onClick:()=>{j({suggestion:a,index:p,suggestionStoryId:y})},onMouseEnter:()=>{s(p)},onMouseLeave:()=>{l()},searchBoxRenderStopwatch:c,slotIndex:p,subtitle:v?.format,suggestion:a,title:f,url:A,width:e})},`story-${_??""}-${n}-${g}`)}})})})})]})}var t1=n(508537),t2=n(743858);function t3({inlineSYOP:e,query:t,searchBoxHeight:n,searchBoxRenderStopwatch:i,showSyopHeading:l,suggestionGroups:c,width:d}){let u;(0,a.useEffect)(()=>{(0,r.A)("SuggestionsMenu","/app/www/discover/SearchBox/SuggestionsMenu.tsx")},[]);let p=(0,a.useRef)(null),m=(0,s.A)(),{experiencesMulti:g}=(0,tm.A)(1000315),{enabled:_}=(0,D.A)(),{enabled:y}=(0,t2.A)(),f=_||y,{country:x,isAuthenticated:v}=(0,h._8)(),{suggestionsFocusIndex:w,suggestionsMaxHeight:A,setSuggestionsHovered:S,setSuggestionsFocusIndex:j,handleFeaturedBoardSubmit:k,isSyop:z,multimodalPinId:I,isInTypeaheadSession:E}=(0,P.Z)(),{anyEnabled:C}=(0,tL.A)({isSyop:z}),[L,B]=(0,a.useState)(0),R=(0,th.A)(B,400),M=(0,t1.wt)(v,x),{isRTL:U}=(0,h._8)();function O(){j(void 0)}(0,a.useLayoutEffect)(()=>{if(!p.current)return()=>{};B(p.current.getBoundingClientRect().width);let e=new ResizeObserver(()=>{R(e=>p.current?.getBoundingClientRect().width||e)});return e.observe(p.current),()=>{e.disconnect()}},[R]);let N=!!(0,$.A)()&&!e,F=I&&!N&&E,H=N||e,V=H&&"32px"||F&&"0 0 32px 32px"||f&&`0 0 ${J.Ak}px ${J.Ak}px`||"0 0 16px 16px",G=(u="-24px",N?U?{right:u,bottom:u}:{left:u,bottom:u}:e?U?{right:u,top:u}:{left:u,top:u}:F?U?{right:"-16px"}:{left:"-16px"}:f?_?U?{right:"-16px",left:"-24px",top:n}:{left:"-16px",right:"-24px",top:n}:{left:"-24px",right:"-12px",top:n}:{top:n});return(0,b.jsx)(t_.A,{view:2,viewParameter:103,children:c.length>0||I?(0,b.jsxs)(o.az,{color:"default",dangerouslySetInlineStyle:{__style:{borderRadius:V,...G,zIndex:H||F?-5:void 0}},id:"SuggestionsMenu",left:!0,overflow:"hidden",position:"absolute",role:"listbox",width:(H||F)&&`calc(100% + ${(H?24:16)*2}px`||d||"100%",children:[(0,b.jsx)("div",{"data-test-id":"typeaheadResults",onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),style:{maxHeight:N?738:A,boxSizing:"content-box",overflowY:"auto"},children:(0,b.jsxs)(o.az,{ref:p,color:"default",dangerouslySetInlineStyle:{__style:{borderRadius:V,paddingBottom:N?140:"4px",paddingTop:e&&72||F&&140||C&&"28px"||"32px"}},direction:"column",display:"flex",overflow:"hidden",width:"100%",children:[l&&(0,b.jsx)(o.az,{marginBottom:4,marginStart:8,marginTop:4,children:(0,b.jsx)(o._Y,{size:"600",children:t.length>0?(0,tg.vQ)(m.bt("Search your Pins for {{ query }}", "Search your Pins for {{ query }}", "searchBox.suggestionsMenu.searchYourPinsForQueryText", undefined, true),{query:t}):m.bt("Search your Pins", "Search your Pins", "searchBox.suggestionsMenu.searchYourPinsText", undefined, true)})}),I?(0,b.jsx)(o.az,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:3,marginTop:-2,paddingX:6,children:(0,b.jsx)(o._Y,{color:"subtle",size:"200",children:m.bt("You can add just about anything to update your search results", "You can add just about anything to update your search results", "searchBox.suggestionsMenu.multimodalSearch.youCanAddJustAboutAnythingToUpdateYourSearchResultsText", undefined, true)})}):c.map((e,n)=>e.items.length?(0,b.jsx)(o.az,{marginBottom:C&&!N?9:4,paddingX:8,children:function(e,n,r){let a=(0,T.n6)(c),o=null==w?void 0:w-a[n],s=e=>{j((0,T.n6)(c)[n]+e)};if("story"===e.type&&"shopping_spotlight"===e.story_type&&M)return(0,b.jsx)(tI.A,{handleFeaturedBoardSubmit:k});switch(e.type){case"recent_query":return(0,b.jsx)(tX,{containerWidth:r,focusedIndex:o,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,searchBoxRenderStopwatch:i,suggestions:e.items});case"recent_save":return(0,b.jsx)(tq,{focusedIndex:o,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,suggestions:e.items});case"recent_view":return(0,b.jsx)(tZ,{focusedIndex:o,groupIndex:n,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,suggestions:e.items});case"story":return"shopping_spotlight"===e.story_type?(0,b.jsx)(tQ,{containerWidth:r,focusedIndex:o,groupIndex:n,index:0,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,searchBoxRenderStopwatch:i,suggestions:e}):(0,b.jsx)(t0,{containerWidth:r,focusedIndex:o,groupIndex:n,index:0,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,searchBoxRenderStopwatch:i,suggestions:e});case"blended_autocomplete":return(0,b.jsx)(tz,{experiences:g,focusedIndex:o,onSuggestionMouseEnter:s,onSuggestionMouseLeave:O,query:t,suggestions:e.items})}return null}(e,n,L)},`${t}-${e.type}-${e.title?.format??""}`):null)]})}),N&&!I&&(0,b.jsx)(o.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, var(--sema-color-background-transparent) 0%, var(--sema-color-background-default) 20%)",pointerEvents:"none",transition:"opacity 0.1s"}},height:170,left:!0,position:"absolute",width:"100%"})]}):(0,b.jsx)(o.az,{})})}function t5({inlineSYOP:e,searchBoxHeight:t,suggestionGroups:n,width:o}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionsMenuContainer","/app/www/discover/SearchBox/SuggestionsMenuContainer.tsx")},[]);let i=(0,F.A)({shouldSkipExpActivation:!0}),s=p(),l=(0,tu.A)(),c=d(),{isBot:u}=(0,h._8)(),m=(0,f.A)(),{checkExperiment:g}=(0,M.A)(),{autocompleteRequestSurface:_,enteredScope:y,enteredQuery:x,updateSuggestionGroups:v,isInTypeaheadSession:w,isSyop:A,multimodalPinId:S}=(0,P.Z)();(0,a.useEffect)(()=>{w&&!A&&(x?(c?.isTiming&&c?.abort("pivoted"),c?.start()):s?.isTiming||s?.start(),x?(td.isActive()&&td.abort("pivoted"),td.start()):l.isActive()||l.start())},[w,A,x]);let{data:j}=(0,B.A)(u?null:{name:"SearchTabResource"}),{state:{recentSaves:k,recentViews:z}}=to(),{items:I,isLoaded:E}=(0,tp.HI)({autocompleteRequestSurface:_}),T=(0,tp.cl)({query:x,scope:y,autocompleteRequestSurface:_});return((0,a.useEffect)(()=>{m.isAuth&&j&&j.length>0&&E&&I.length<9&&g("dweb_ac_empty_state_new_user_onboarding_exp")},[I,j,m.isAuth,g,E]),(0,a.useEffect)(()=>{let e=j||[],t=m.isAuth?e.filter(e=>"shopping_spotlight"!==e.story_type):e;v(A?[{items:I,type:"recent_query"},{items:z,type:"recent_view"},{items:k,type:"recent_save"}]:x.length?T:[{items:I,type:"recent_query"},...t||[]])},[T,A,v,x,j,I,k,z,y,m]),i)?null:w&&(n.length>0||S)&&(0,b.jsx)(t3,{inlineSYOP:e,query:x,searchBoxHeight:t,searchBoxRenderStopwatch:s,showSyopHeading:A,suggestionGroups:n,width:o})}var t6=n(106301);function t4({children:e}){(0,a.useEffect)(()=>{(0,r.A)("CloseupDelayedSearchBoxWrapper","/app/www/VerticalNav/auth/CloseupDelayedSearchBoxWrapper.tsx")},[]);let t=(0,g.zy)(),n=function(){let{group:e}=(0,$.A)()||{group:""},t=(0,g.zy)();return!!(e&&e.includes("delay"))&&(0,L.dM)(t)}(),[i,s]=(0,a.useState)(!1),l=(0,a.useRef)(0);return((0,a.useEffect)(()=>{n&&(l.current=Date.now());let e=setTimeout(()=>s(!1),0);return()=>clearTimeout(e)},[n,t.pathname]),(0,a.useEffect)(()=>{if(n){let e=()=>{Date.now()-l.current<400||s(!0)},t=setTimeout(()=>{window.scrollY>30&&s(!0)},400),n=setTimeout(()=>s(!0),1e4);return window.addEventListener("scroll",e),()=>{clearTimeout(t),clearTimeout(n),window.removeEventListener("scroll",e)}}return()=>{}},[n,t.pathname]),n&&!i)?(0,b.jsx)(o.az,{"data-test-id":"search-box-container",id:V.rv}):(0,b.jsx)(a.Fragment,{children:e})}function t7(e){let t=e.getBoundingClientRect(),n=window.innerHeight-240;return t.bottom<=n}function t8({children:e}){(0,a.useEffect)(()=>{(0,r.A)("SyopDelayedSearchBoxWrapper","/app/www/VerticalNav/auth/SyopDelayedSearchBoxWrapper.tsx")},[]);let t=(0,g.zy)(),n=(0,L.mi)(t),i=function(){let{group:e}=(0,$.A)()||{group:""},t=(0,g.zy)();return!!(e&&(0,L.mi)(t))}(),[s,l]=(0,a.useState)(!1),c=(0,a.useRef)(l);return((0,a.useEffect)(()=>{c.current=l},[l]),(0,a.useEffect)(()=>{if(!n){let e=setTimeout(()=>l(!1),0);return()=>clearTimeout(e)}},[n]),(0,a.useEffect)(()=>{if(!i)return;let e=document.getElementById(V.C3),t=e=>{let t=()=>{t7(e)&&c.current(!0)};requestAnimationFrame(t);let n=setTimeout(t,150),r=new IntersectionObserver(t=>{void 0!==t[0]&&t7(e)&&c.current(!0)},{rootMargin:"0px 0px -240px 0px",threshold:0});return r.observe(e),()=>{clearTimeout(n),r.disconnect()}};if(null!==e)return t(e);let n=null,r=new MutationObserver(()=>{let e=document.getElementById(V.C3);null!==e&&(r.disconnect(),n=t(e))});return r.observe(document.body,{childList:!0,subtree:!0}),()=>{r.disconnect(),n?.()}},[i,n]),i&&!s)?(0,b.jsx)(o.az,{"data-test-id":"search-box-container",id:V.rv}):(0,b.jsx)(a.Fragment,{children:e})}var t9=n(788446);function ne({isPartner:e=!1,widthType:t="md",inlineSYOP:n}){let r=(0,s.A)(),{isRTL:i}=(0,h._8)(),{enabled:l}=(0,q.A)(),{enabled:d}=(0,D.A)(),p=(0,F.A)({shouldSkipExpActivation:!0}),g=l||p,_=!!n,{group:y}=(0,$.A)()||{group:""},f=!!y&&!_,{pinId:x}=U(),v=(0,t9.A)(),{appUI:{showTypeaheadOverlay:w}}=(0,H.Y)(),{appliedQuery:A,displayedQuery:S,endPadding:j,enteredScope:k,handleClearSearch:z,handleScopeChange:E,handleSearchIconButtonClick:T,hasTypedSinceFocus:C,inputFocused:L,isContentTypeFilterHovered:B,isInTypeaheadSession:R,multimodalPinId:M,searchBoxHovered:O,setContentTypeFilterHovered:G,setSearchBoxHovered:W,showContentTypeFilter:Y,showIconOnly:Z,suggestionGroups:ee,voiceSearchPlaceholder:et}=(0,P.Z)(),en=!!A,ea=(0,m.A)()(),eo=(0,a.useRef)(null),ei=!f&&!_&&!M&&Y,es=M&&!f&&R,el=f&&R||es;if(Z&&!L&&!en&&!R)return(0,b.jsxs)(o.az,{ref:eo,"data-test-id":"search-box-container",id:V.rv,children:[(0,b.jsx)(o.K0,{accessibilityLabel:r.bt("Search icon", "Search icon", "searchBox.searchIcon.accessibilityLabel", undefined, true),icon:"magnifying-glass",iconColor:"subtle",onClick:T,size:"lg"}),ea&&(0,b.jsx)(tc,{})]});let ec=t&&Object.keys(V.XO).includes(t)&&"shrink"!==t?V.XO[t]:"auto",ed=(0,b.jsx)(o.az,{ref:eo,dangerouslySetInlineStyle:{__style:el?{boxShadow:"var(--sema-elevation-shadow-floating)"}:{}},"data-test-id":"search-box-container",flex:"grow",id:V.rv,marginEnd:!d||f||_?0:2,marginTop:16*!!es,minWidth:f?void 0:ec,paddingX:d?0:p?4:2,rounding:el?500:void 0,children:(0,b.jsxs)(o.az,{dangerouslySetInlineStyle:_&&{__style:{backgroundColor:"var(--sema-color-background-default)",border:O?"1px solid var(--sema-color-hover-border-interactive)":"1px solid var(--sema-color-border-interactive)",outline:O?"0.5px solid var(--sema-color-hover-border-interactive)":"0"}}||!f&&!es&&{__style:{backgroundColor:O?I.uq:I.kP}}||void 0,display:"flex",height:f||es?116:48,rounding:_&&!R&&400||(g?J.Xr:600),children:[(0,b.jsxs)(o.az,{alignItems:"center",dangerouslySetInlineStyle:f||es?void 0:{__style:{padding:i?`0 16px 0 ${j}`:`0 ${j} 0 16px`,...R?{borderRadius:g?`${J.A4}px`:"24px",boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)"}:{}}},display:"flex",flex:"grow",height:"100%",onMouseEnter:()=>{W(!0)},onMouseLeave:()=>{W(!1)},position:"relative",children:[!(S||L||M)&&(0,b.jsx)(o.az,{dangerouslySetInlineStyle:f?{__style:{position:"absolute",top:"19px",left:"20px"}}:void 0,flex:"none",marginEnd:2,zIndex:f?K.rc:void 0,children:(0,b.jsx)(o.In,{accessibilityLabel:r.bt("Search icon", "Search icon", "searchBox.searchIcon.accessibilityLabel", undefined, true),color:f?"default":void 0,icon:"magnifying-glass",size:f?24:16})}),(0,b.jsx)(N,{inlineSYOP:_,name:"searchBoxInput"}),(0,b.jsx)(e9,{displayedQuery:S,hasAppliedQuery:en,hasTypedSinceFocus:C,isInlineSYOP:_,isInTypeaheadSession:R,onClearSearch:z,searchBoxRef:eo,voiceSearchPlaceholder:et}),!!x&&(0,b.jsx)(er,{}),(0,b.jsx)(u,{children:(0,b.jsx)(c,{children:(0,b.jsx)(t5,{inlineSYOP:_,searchBoxHeight:52,suggestionGroups:ee,width:"shrink"===t?"80vw":void 0})})}),ea&&(0,b.jsx)(tc,{})]}),ei?(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{background:"#d8d8d8",borderRadius:"1px"}},height:32,margin:"auto",width:2}),(0,b.jsx)(X,{currentlySelectedFilter:k,currentQuery:A,handleContentTypeFilterHover:()=>{e&&G(B)},handleScopeChange:E})]}):null]})});if(f){let e=R&&628||y.includes("large")&&636||380;return!(w&&!R)&&(0,b.jsx)(t4,{children:(0,b.jsx)(t8,{children:(0,b.jsx)(Q,{hideOnScroll:y.includes("hide")||y.includes("employees"),isInTypeaheadSession:R,searchBoxHovered:O,children:t=>{let n=t.isHidden&&!R;return(0,b.jsx)(o.az,{column:10,dangerouslySetInlineStyle:{__style:{bottom:48,left:i?void 0:`calc(50% + ${v/2}px)`,right:i?`calc(50% + ${v/2}px)`:void 0,transform:"translateX(-50%)",backgroundColor:R?"var(--sema-color-background-default)":void 0,boxShadow:"0 3px 12px 0 rgba(0, 0, 0, 0.25), 0 3px 36px var(--sema-elevation-background-blur-weak, 8px) rgba(209, 209, 209, 0.50)",transition:"opacity 200ms linear, width 150ms linear",opacity:n?.5:1}},maxWidth:e,position:"fixed",rounding:500,zIndex:new o.K5([K.rc]),children:ed})}})})})}return _&&R?(0,b.jsx)(o.az,{flex:"grow",height:48,minWidth:ec,children:(0,b.jsx)(o.Wd,{zIndex:new o.K5([K.rc]),children:(0,b.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{left:i?void 0:`calc(50% + ${v/2}px)`,right:i?`calc(50% + ${v/2}px)`:void 0,top:{otherProfile:368,selfProfile:78,syopResultsPage:14}[n??"selfProfile"],transform:"translateX(-50%)"}},position:"fixed",rounding:500,width:`calc(85% - ${v}px)`,children:ed})})}):ed}function nt({iconOnly:e=!1,isPartner:t=!1,widthType:n="md",inlineSYOP:o}){return(0,a.useEffect)(()=>{(0,r.A)("SearchBox","/app/www/discover/SearchBox/SearchBox.tsx")},[]),(0,b.jsx)(t6.n,{children:(0,b.jsx)(i.Q,{children:(0,b.jsx)(ti,{children:(0,b.jsx)(P.U,{iconOnly:e,inlineSYOP:!!o,isPartner:t,widthType:n,children:(0,b.jsx)(ne,{inlineSYOP:o,isPartner:t,widthType:n})})})})})}},323250(e,t,n){n.d(t,{A:()=>h,m:()=>p});var r=n(61163),a=n(859471),o=n(520434),i=n(538329),s=n(542975),l=n(496952),c=n(998377),d=n(562615);let u=Math.floor(3.5);function p({id:e,children:t,isHovered:n,url:i,onClick:s,onMouseEnter:l,onMouseLeave:c,onFocus:u,onBlur:p,rounding:h}){return(0,a.useEffect)(()=>{(0,r.A)("SuggestionReps","/app/www/discover/SearchBox/SuggestionReps.tsx")},[]),(0,d.jsx)(o.az,{"aria-selected":n?"true":"false","data-test-id":"search-suggestion",id:e,role:"option",children:(0,d.jsx)(o.pp,{active:n,children:(0,d.jsx)(o.$A,{href:i,onBlur:p,onFocus:u,onMouseDown:({event:e})=>e.preventDefault(),onMouseEnter:l,onMouseLeave:c,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.metaKey||e.ctrlKey||(e.preventDefault(),s())},rounding:h,children:t})})})}function h({highlightMatch:e=!1,iconName:t,imageUrl:n,isVerifiedMerchant:p=!1,label:h,onLoad:m,query:g,rounding:_,searchDelightConfig:y,subLabel:f,type:x,verified:b=!1}){(0,a.useEffect)(()=>{(0,r.A)("SuggestionReps","/app/www/discover/SearchBox/SuggestionReps.tsx")},[]);let v=(0,i.A)(),w="recent_pin_searches"===x?"rs-search-suggestion":n||t?"enriched-search-suggestion":"regular-search-suggestion";return(0,d.jsx)(o.az,{"data-test-id":w,display:"flex",paddingY:+!!n,width:"100%",children:(0,d.jsxs)(o.so,{alignItems:"center",gap:{row:2,column:0},children:[n?(0,d.jsx)(o.az,{"data-test-id":"enriched-autocomplete-image",height:40,marginStart:u,overflow:"hidden",rounding:_&&2===_?200:"circle",width:40,children:(0,d.jsx)(o._V,{alt:"",color:"#efefef",fit:"cover",naturalHeight:40,naturalWidth:40,onLoad:m,role:"presentation",src:n})}):(0,d.jsx)(o.so,{alignItems:"center",height:40,justifyContent:"center",width:40,children:(0,d.jsx)(o.In,{accessibilityLabel:t?(0,s.vQ)(v.bt("{{ icon}} icon", "{{ icon}} icon", "SearchBox.SearchSuggestion.EnrichedAutocomplete.Icon", undefined, true),{icon:t}).join():"",color:"default",icon:t||"magnifying-glass",size:12})}),(0,d.jsxs)(o.so,{alignItems:"start",direction:"column",gap:{row:0,column:1},justifyContent:"center",children:[(0,d.jsxs)(o.so,{alignItems:"center",children:[e&&g?(0,d.jsx)(l.A,{query:g,searchDelightConfig:y,text:h||g}):(0,d.jsx)(o.KJ,{weight:"bold",children:h}),(b||p)&&(0,d.jsx)(o.az,{marginStart:1,children:(0,d.jsx)(c.A,{iconOnly:!0,isVerifiedIdentity:b,isVerifiedMerchant:p,size:"xs",surface:"SuggestionReps"})})]}),f&&(0,d.jsx)(o.KJ,{size:"100",children:f})]})]})})}},621556(e,t,n){n.d(t,{HI:()=>g,cl:()=>m});var r=n(859471),a=n(542665),o=n(693154),i=n(353614),s=n(538329),l=n(542975),c=n(601185),d=n(430705),u=n(124674),p=n(224723),h=n(713364);function m({query:e,scope:t,autocompleteRequestSurface:n}){let d,p=(0,s.A)(),h=(0,o.A)(),{checkExperiment:m}=(0,c.A)(),{group:g}=m("web_search_autocomplete_debounce"),_=Number.isFinite(d=Number(g.split("_")[1]))&&d>0?d:0,y=(0,a.A)(e,_),f=(0,u.A)({allowSearchOnMount:!0,resourceName:"AdvancedTypeaheadResource",resourceOptions:{pin_scope:t,autocomplete_request_surface:n},value:_>0?y:e});return(0,r.useMemo)(()=>{let e=f?.map(e=>{if("query"===e.type){let{modified_filter_eligibility:t,query:n}=e,r=t?(0,l.vQ)(t?.hair_pattern?.eligible_filters?p.bt("{{ query }} by hair pattern", "{{ query }} by hair pattern", "SearchSuggestion.HairPatternFilterSuggestion", undefined, true):p.bt("{{ query }} by skin-tone range", "{{ query }} by skin tone range", "SearchSuggestion.SkinToneFilterSuggestion", undefined, true),{query:n}).join(""):n;return{...e,label:r}}return e});if(h.isAuth)return[{items:e||[],type:"blended_autocomplete"}];let t=(0,i.A)(e||[],e=>e.type);return[{items:["query","user"].flatMap(e=>t[e]).filter(e=>!!e),type:"blended_autocomplete"}]},[f,h,p])}function g(e){let{autocompleteRequestSurface:t}=e||{},{group:n}=(0,h.A)({isSyop:0!==t}),{isLoaded:a,data:i}=function(e){let t=(0,o.A)(),{autocompleteRequestSurface:n}=e||{};return(0,d.A)(t.isAuth?{name:"AdvancedTypeaheadResource",options:{term:"",pin_scope:p.cO.PINS,autocomplete_request_surface:n},noCache:!0}:null)}(e);return(0,r.useMemo)(()=>{if(a&&i)return{items:i.items.slice(0,n?.includes("recent_search")?12:5).map((e,t)=>({...e,resultIndex:t})),isLoaded:a};return{items:[],isLoaded:a}},[a,i,n])}},142381(e,t,n){n.d(t,{AJ:()=>s,Dp:()=>o,GZ:()=>_,N6:()=>f,P0:()=>h,Sr:()=>u,TB:()=>d,WA:()=>a,WC:()=>c,bL:()=>m,gU:()=>y,ik:()=>p,kE:()=>x,mP:()=>l,wj:()=>i,yi:()=>g});var r=n(802209);let a=1048576,o=3,i=20,s=3,l=10,c=50,d=10,u=1200,p=375,h=375/r.$G,m=4096,g="#FFFFFF",_={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},y=420,f=325,x=768},672908(e,t,n){n.d(t,{A:()=>r});let r={base_grid_item:["aggregatedpindata.pin_tags","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","pin.access","pin.ad_data","pin.ad_destination_url","pin.ad_match_reason","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.carousel_data()","pin.collection_pin()","pin.created_at","pin.debug_info_html","pin.description","pin.domain","pin.dominant_color","pin.embed","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.images[236x,345x,474x,564x,736x,1200x,orig]","pin.is_downstream_promotion","pin.is_eligible_for_web_closeup","pin.is_prefetch_enabled","pin.is_promoted","pin.is_uploaded","pin.link","pin.link_utm_applicable_and_replaced","pin.promoted_is_removable","pin.promoter()","pin.reaction_counts","pin.rich_summary()","pin.should_open_in_stream","pin.sponsorship","pin.story_pin_data()","pin.story_pin_data_id","pin.title","pin.tracking_params","pin.type","pin.utm_link","pin.videos()","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[236x,345x,474x,564x,736x,1200x,orig]","pincarouselslot.link","pincarouselslot.title","pincarouselslot.videos()","user.ads_only_profile_site","user.full_name","user.image_medium_url","user.image_small_url","user.is_ads_only_profile","user.username","video.id","video.video_list[V_HLSV4,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]","domain.official_user()","pin.grid_attribution","pin.link_domain()","pin.link_user_website()","pin.native_creator()","pin.origin_pinner()","pin.pinner()","userwebsite.official_user()","user.is_primary_website_verified","user.is_verified_merchant","user.verified_identity","pin.is_eligible_for_pdp","pin.is_eligible_for_related_products","pin.is_oos_product","pin.is_stale_product","pin.shopping_flags","pin.product_metadata()","product_metadata.shopping_flags","pin.is_video","pin.video_status","pin.video_status_message","pin.advertiser_id","pin.attribution_source_id","pin.campaign_id","pin.insertion_id","pin.pin_promotion_id"]}},215731(e,t,n){n.d(t,{A:()=>i,p:()=>o});var r=n(859471);let a=(0,r.createContext)();function o(){return(0,r.use)(a)}let i=a}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/17487.en_GB-a2328fb525b9d935.mjs.map