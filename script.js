// Register GSAP Plugins
gsap.registerPlugin(ScrollTrigger);

// Expose Package Data Globally for other pages (like packages.html)
window.packageData = {
    "ooty": {
        "title": "OOTY NATURE ESCAPE (3 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "Arrival at Coimbatore/Ooty. Botanical Garden visit and Ooty Lake evening stroll."
            },
            {
                "day": 2,
                "content": "Doddabetta Peak, Tea Factory, and the famous Nilgiri Mountain Railway (Toy Train) ride."
            },
            {
                "day": 3,
                "content": "Pykara Waterfalls and departure."
            }
        ]
    },
    "kodaikanal": {
        "title": "KODAIKANAL RETREAT (3 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "Arrival at Kodaikanal. Kodai Lake and Bryant Park visit."
            },
            {
                "day": 2,
                "content": "Coaker's Walk, Pillar Rocks, Pine Forest, and Silver Cascade Falls."
            },
            {
                "day": 3,
                "content": "Berijam Lake visit and departure."
            }
        ]
    },
    "hyderabad": {
        "title": "HYDERABAD HERITAGE (3 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "Arrival at Hyderabad. Evening at Hussain Sagar Lake and Lumbini Park."
            },
            {
                "day": 2,
                "content": "Charminar, Chowmahalla Palace, Mecca Masjid, and Salar Jung Museum."
            },
            {
                "day": 3,
                "content": "Golconda Fort and Qutub Shahi Tombs tour."
            }
        ]
    },
    "mysore": {
        "title": "MYSORE & BANGALORE EXPLORER (4 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "Bangalore arrival. Lalbagh Botanical Garden and Vidhana Soudha visit."
            },
            {
                "day": 2,
                "content": "Drive to Mysore. Srirangapatna and Brindavan Gardens evening."
            },
            {
                "day": 3,
                "content": "Mysore Palace, Chamundi Hills, and Mysore Zoo visit."
            },
            {
                "day": 4,
                "content": "St. Philomena's Church and return to Bangalore."
            }
        ]
    },
    "munnar": {
        "title": "3 DAYS MUNNAR PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "content": "You will be picking from Cochin Airport / Ernakulam railway station and drive to Munnar (04 Hrs drive). On the way enjoy some waterfalls and natural scenic spots. On arrival at Munnar check into Hotel and relax for the rest of the day. Overnight stay at the hotel will be arranged."
            },
            {
                "day": 2,
                "content": "After breakfast spend the day with local sightseeing. Situated at the confluence of three mountain streams - Mudrapuzha, Nallathanni and Kundale, Munnar is 1600 Meter above sea level. This majestic hill station was once the summer resort of the British government in South India. Local sightseeing of Munnar includes visit to Mattupetty Dam, Kundale Lake and Echo point. Afternoon proceed to Rajamalai were the rarest species of mountain goat, Nilgiri Thars, can be spotted. Overnight stay is arranged at Munnar."
            },
            {
                "day": 3,
                "content": "After breakfast check out from the Hotel and drive to Cochin Airport / railway station (depend on your departure place) for your flight / train back home, feeling contented about a wonderful holiday you spent in the God's Own Country."
            }
        ]
    },
    "munnar_alleppey": {
        "title": "MUNNAR & ALAPPUZHA PACKAGE (5 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "You will be picking from Cochin Airport / Ernakulam railway station and take to the hotel. Spend the afternoon with local sightseeing in and around Cochin - the Queen of Arabian Sea, this is one of the finest natural harbors in the World. Sightseeing attractions in Cochin include Dutch Palace, Jewish Synagogue, Jewish Street, St. Francis Church and Chinese Fishing Nets. Overnight stay is arranged in Cochin."
            },
            {
                "day": 2,
                "content": "After breakfast check out from the hotel and drive to Munnar (04 Hrs drive). Munnar, situated 1600 Meters above sea level at the confluence of three mountain streams Mudrapuzha, Nallathanni and Kundale. The Tea Museum displays the history and evolution of the tea plantations in Munnar. If you are a flora lover, pay a visit to the Floriculture Centre Munnar, commonly known as Rose Garden. An overnight stay at the hotel will be arranged."
            },
            {
                "day": 3,
                "content": "After breakfast spend the day with local sightseeing. This majestic hill station was once the summer resort of the British government in South India. Local sightseeing of Munnar includes visit to Mattupetty Dam, Kundale Lake and Echo point. Afternoon proceed to Rajamalai were the rarest species of mountain goat, Nilgiri Thars, can be spotted. Overnight stay is arranged at Munnar."
            },
            {
                "day": 4,
                "content": "After breakfast check out from the hotel in Munnar and drive to Alleppey (172 KM away). The drive from Munnar to Alleppey would usually take around 4 hours and 50 minutes. Upon arrival in Munnar get out on an enchanting overnight backwater cruise in traditionally decorated houseboats. Check in time is 01:00 PM and cruise starts with lunch. While cruising in these floating luxury-villas, let your eyes settle for the rare and the unusual - skim past Chinese fishing nets, bowed-down paddy fields, and local inhabitants. Food will be served onboard. Overnight stay in the houseboat."
            },
            {
                "day": 5,
                "content": "After breakfast check out from the House Boat / Hotel and drive to Cochin Airport / railway station (depend on your departure place) for your flight / train back home, feeling contented about a wonderful holiday you spent in the God's Own Country."
            }
        ]
    },
    "honeymoon": {
        "title": "KERALA HONEYMOON PACKAGE (POOL VILLA)",
        "itinerary": [
            {
                "day": 1,
                "content": "You will be picking from Cochin Airport / Ernakulam railway station and drive to Munnar (04 Hrs drive). On the way enjoy some waterfalls and natural scenic spots. On arrival at Munnar check into Hotel and relax for the rest of the day. Overnight stay at the hotel will be arranged."
            },
            {
                "day": 2,
                "content": "After breakfast spend the day with local sightseeing. Situated at the confluence of three mountain streams - Mudrapuzha, Nallathanni and Kundale, Munnar is 1600 Meter above sea level. Local sightseeing of Munnar includes visit to Mattupetty Dam, Kundale Lake and Echo point. Afternoon proceed to Rajamalai were the rarest species of mountain goat, Nilgiri Thars, can be spotted. Overnight stay is arranged at Munnar."
            },
            {
                "day": 3,
                "content": "After breakfast check out from the hotel and drive to Thekkady (04 Hrs); on arrival check in to the hotel. Proceed for the sightseeing tour of Thekkady - one of the world's most fascinating wild life reserves. The Periyar wild life sanctuary in Thekkady is spread across 777 sq km of which 360 sq km is thick ever green forest. Optional activities like Boating at Periyar Lake, Spice Plantation visit and Elephant Ride can be done at an extra cost. Overnight stay is arranged in Thekkady."
            },
            {
                "day": 4,
                "content": "Extolled as Kerala's cleanest beach sand, Mararikulam (Marari) is a typical fishing village, located on the southwest coast of Central Kerala. You can experience the local charm with matchless traditional Kerala hospitality, at Mararikulam. Explore the stunning backwaters, the tranquility of the village and the spectacular sceneries that promise a relaxing and inspiring experience."
            },
            {
                "day": 5,
                "content": "After breakfast check out from the Hotel and drive to Cochin Airport / railway station (depend on your departure place) for your flight / train back home, feeling contented about a wonderful holiday you spent in the God's Own Country."
            }
        ]
    },
    "mookambika": {
        "title": "MOOKAMBIKA ECONOMIC PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "content": "Start at night 9.30 From Calicut journey to Subramaniyam. Morning Reach Subramaniyam and after fresh up Visit subramaniyam Temple and there after journey towards Dharmasthala visit dharmasdthala manjunathesara Temple, Nelliyadi Veedu , museum. Continue to sringeri, Visit Sringeri sree sankaracharya Math, Sarada Devi Temple and Journey to mookambika. Night Rest at mookambika."
            },
            {
                "day": 2,
                "content": "Visit Mookambika Darshan, Journey to Uduppi. Visit Uduppi Sree krishna Temple, Chandramouleswara temple, anandeswara Temple and return."
            },
            {
                "day": 3,
                "content": "Visit Bakel Fort at Kasrgod and return."
            }
        ]
    },
    "south_india": {
        "title": "PALANI, MADURAI, RAMESHWARAM PACKAGE (3 Days)",
        "itinerary": [
            {
                "day": 1,
                "content": "Start from Calicut to Palani halt at Palani."
            },
            {
                "day": 2,
                "content": "Visit one of the Six abode of Lord Subramanya and Proceed to madurai and visit Madurai Meenakshi temple, Alagar Koli temple of Lord Vishnu, Tirupparankundram and proceed to Rameshwaram and stay at rameshwaram."
            },
            {
                "day": 3,
                "content": "Morning proceed to Rameshwaram - Visit Rameshwaram Temple one of the 12 Jyotirlinga temple or Lords Shiva abode, visit Agnitheertaham, Danushkodi, Five Faced Hanuman Temple, Ram Sethu Bridge. You can also visit Abdul J Kalam house (former President of India) and return to Calicut."
            }
        ]
    },
    "nalambalam": {
        "title": "GURUVAYUR-THRIPRAYAR-KOODALMANIKYAM-MOOZHIKKULAM-PAYAMMEL",
        "itinerary": [
            {
                "day": 1,
                "content": "Journey starts at 5.30 PM from Calicut. Reach guruvayur at 9.00 Pm Stay at guruvayur."
            },
            {
                "day": 2,
                "content": "Morning 4 am Journey to Triprayar sree Ramaswamy temple and journey to koodalmanikyam, Payammel Sathrugna Temple, moozhikulam Lakshmana Temple and back to Calicut."
            }
        ]
    },
    "navagraha": {
        "title": "NAVAGRAHA TEMPLE PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "content": "Start by 9 am to Kumbakonam, Night Halt at Kumbakonam."
            },
            {
                "day": 2,
                "content": "Visit Kumbakonam local sightseeing Places : Thinkaloor Temple, Sooryanar Kovil, Kanchanoor Temple, Vaitheeswar Kovil, Chidambaram, Thiruvenkad Temple, Keezhperumbalam Temple, Thirunellar Temple. Night rest Kumbakonam hotel."
            },
            {
                "day": 3,
                "content": "Morning journey to Thirunageswaram temple, Aalamkudi Temple, Swami mala, Sreerangam. 4 PM return journey to Kerala."
            }
        ]
    },
    "trivandrum": {
        "title": "TRIVANDRUM PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "content": "Azhimala shiva temple, Padhnabhapuram palace, Thirparappu waterfalls, Kanyakumari (Sunset must watch)."
            },
            {
                "day": 2,
                "content": "Sree Padmanabha Temple, Pazhavangadi Ganapathy Temple, Trivandrum Zoo, Napier Museum, shangumugham Beach, Kovalam Beach, Kerala Arts and Crafts Village."
            }
        ]
    },
    "wayanad": {
        "title": "3 DAY WAYANAD TOUR PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "content": "Arrive at Calicut have breakfast. Thusharagiri waterfalls (located 50 km from Kozhikode in Kerala's Western Ghats, scenic three-tiered waterfall). Irapara (Aripara Falls, tourist spot in Anakkampoyil). Vythiri View Point (synonymous with Lakkidi View Point, offers breathtaking panoramic vistas). En uru (Kerala's first tribal heritage village located in Pookode). Pookode (highest altitude freshwater lake in the state). Honey Museum (India's first honey museum). Over night stay at Hotel."
            },
            {
                "day": 2,
                "content": "After the breakfast at Hotel. Banasura sagar dam (India's largest and Asia's second-largest earthen dam). Karaladu (Karlad Lake is located in Thariode, the third largest fresh water lake in Kerala). 900 kandi (Glass Bridge in Wayanad is South India's first glass bridge, offering a 100-foot high thrilling walk over panoramic forest views). Edakkal caves (Renowned for Neolithic/Mesolithic petroglyphs circa 6000 B.C. showcasing ancient human life). Over night Stay at Hotel."
            },
            {
                "day": 3,
                "content": "After the breakfast at Hotel. Tirunelli (The Thirunelli Mahavishnu Temple is a 1,000-year-old Hindu pilgrimage site nestled in the Brahmagiri hills). Kuruva (Kuruva Island is a 950-acre uninhabited and protected river delta in the Kabini River). Tholpeety (Tholpetty Wildlife Sanctuary is a renowned eco-tourism destination offering jeep safaris to spot wildlife)."
            }
        ]
    },
    "guruvayoor": {
        "title": "GURUVAYOOR TRIP (1 Day)",
        "itinerary": [
            {
                "day": 1,
                "content": "Pick up from Location and towards Guruvayur for Darshan. Visit Punathoorkota (Elephant Sanctuary). On the way back visit Mammiyoor temple and back to Location."
            }
        ]
    },
    "kannur": {
        "title": "KANNUR TEMPLE VISIT (1 Day)",
        "itinerary": [
            {
                "day": 1,
                "content": "Visit Parassinikadavu Muthappan Temple, Sree Peralassery Temple, Rajarajeshwara Temple, Mridanga Saileswari Temple, and Kalarivathukkal Bhagavathi Temple."
            }
        ]
    },
    "malaysia": {
        "title": "MALAYSIA TOUR PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "title": "Arrival & Putrajaya",
                "content": "• Pickup on arrival & breakfast enroute\n• Sightseeing: Putrajaya Photo Stop on way to hotel\n• Overnight Stay: Hotel"
            },
            {
                "day": 2,
                "title": "Genting Highlands",
                "content": "• Breakfast at hotel\n• Sightseeing: Genting Highlands with 2-way Cable Car Ticket (8 Hours)\n• Overnight Stay: Hotel"
            },
            {
                "day": 3,
                "title": "Kuala Lumpur City Tour",
                "content": "• Breakfast at hotel\n• Sightseeing: KL Tower, Petronas Towers Photo Stop & Other Key Sights (4 Hours City Tour)\n• Overnight Stay: Hotel"
            },
            {
                "day": 4,
                "title": "Departure",
                "content": "• Breakfast & hotel checkout\n• Transfer to airport as per flight schedule"
            }
        ]
    },
    "vietnam": {
        "title": "VIETNAM TOUR PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "title": "Ho Chi Minh Arrival",
                "content": "• Welcome to Ho Chi Minh City, the largest and most vibrant city of Vietnam.\n• On arrival at Tan Son Nhat International Airport, meet the driver and transfer to hotel for check-in.\n• Overnight stay in Ho Chi Minh City."
            },
            {
                "day": 2,
                "title": "Cu Chi Tunnel & Ho Chi Minh City Tour",
                "content": "• Morning city tour covering: Independence Palace, Notre Dame Cathedral, Central Post Office, and War Remnants Museum\n• Lunch at a local restaurant.\n• Afternoon visit to Cu Chi Tunnels: Introduction video, explore underground living areas, and enjoy special tea & cassava.\n• Return to Ho Chi Minh City."
            },
            {
                "day": 3,
                "title": "Fly to Da Nang & Hoi An",
                "content": "• Breakfast & hotel check-out, then transfer to airport for flight to Da Nang.\n• Visit Non-Nuoc Stone Carving Village.\n• Visit Hoi An Ancient Town: Fukian Assembly Hall, Japanese Covered Bridge, lantern-lit streets.\n• Boat ride with floating lantern ceremony & dinner.\n• Return to Da Nang hotel."
            },
            {
                "day": 4,
                "title": "Ba Na Hills & Golden Bridge",
                "content": "• Morning pickup for Ba Na Hills.\n• Cable car ride (Guinness World Record holder).\n• Visit Golden Bridge, Linh Ung Pagoda, Le Jardin D'Amour.\n• French Village exploration and Fantasy Park.\n• Return to Da Nang by evening."
            },
            {
                "day": 5,
                "title": "Fly To Hanoi \u2013 Half Day City Tour",
                "content": "• Breakfast & hotel check-out, followed by flight to Hanoi.\n• Afternoon sightseeing: Temple of Literature, Hoa Lo Prison Museum.\n• Return to hotel."
            },
            {
                "day": 6,
                "title": "Ninh Binh \u2013 Hoa Lu \u2013 Tam Coc",
                "content": "• Drive to Ninh Binh to visit Hoa Lu Ancient Capital.\n• Cycling tour around villages.\n• Buffet lunch at a local restaurant.\n• Bamboo boat ride in Tam Coc.\n• Return to Hanoi by evening."
            },
            {
                "day": 7,
                "title": "Hanoi to Halong Bay Cruise",
                "content": "• Morning transfer to Halong Bay.\n• Board cruise and enjoy scenic limestone karsts and cave exploration.\n• Swimming, sunset views, dinner & night fishing.\n• Overnight on cruise."
            },
            {
                "day": 8,
                "title": "Halong to Hanoi Departure",
                "content": "• Morning relaxation on cruise.\n• Brunch onboard.\n• Disembark and transfer to Hanoi Airport for return flight."
            }
        ]
    },
    "thailand": {
        "title": "THAILAND PACKAGE",
        "itinerary": [
            {
                "day": 1,
                "title": "Bangkok to Pattaya",
                "content": "• Arrive Bangkok International Airport\n• Drive to Pattaya\n• Check in to the hotel in Pattaya\n• Alcazar Show\n• Overnight at hotel in Pattaya"
            },
            {
                "day": 2,
                "title": "Coral Island",
                "content": "• Breakfast in the hotel\n• Transfer to Coral Island by speed boat\n• Proceed for Lunch\n• Evening at Leisure and relax\n• Later proceed for Dinner\n• Overnight at hotel"
            },
            {
                "day": 3,
                "title": "Nong Nooch Village",
                "content": "• Breakfast in the hotel\n• Proceed to visit the Nong Nooch Village\n• Proceed for Lunch\n• Evening free leisure and proceed for Dinner\n• Overnight at hotel"
            },
            {
                "day": 4,
                "title": "Safari World & Bangkok",
                "content": "• Breakfast in the hotel and check out from Pattaya\n• Proceed for Full Day Safari world tour with Marine Park\n• Check in at the Hotel in Bangkok\n• Proceed for Dinner\n• Overnight at hotel"
            },
            {
                "day": 5,
                "title": "Departure",
                "content": "• Breakfast in the hotel & Check out\n• Proceed to the Airport for your flight back to respective hub"
            }
        ]
    },
    "europe": {
        "title": "EUROPE TOUR",
        "itinerary": [
            {
                "day": 1,
                "title": "Arrive in Paris",
                "content": "• Arrival at Paris Charles de Gaulle Airport and transfer to hotel\n• Evening Seine River Cruise: View illuminated monuments & iconic bridges\n• Paris Illumination Tour: Experience the “City of Lights” at night\n• Overnight stay in Paris"
            },
            {
                "day": 2,
                "title": "Paris City Tour & Eiffel Tower",
                "content": "• Guided city tour covering Place Vendôme, Musée d’Orsay, Champs-Élysées, and Arc de Triomphe\n• Visit the majestic Palace of Versailles\n• Ascend to the 3rd level of the Eiffel Tower for panoramic views\n• Overnight stay in Paris"
            },
            {
                "day": 3,
                "title": "Disneyland Paris",
                "content": "• Day free for leisure or optional excursion to Disneyland Paris\n• Choice of Disneyland Park or Walt Disney Studios Park\n• Overnight stay in Paris"
            },
            {
                "day": 4,
                "title": "Paris to Brussels & Netherlands",
                "content": "• Drive to Brussels, Belgium with a Photo stop at the Atomium\n• Orientation tour of Brussels: Grand Place and Manneken Pis Statue\n• Continue journey to the Netherlands and hotel check-in\n• Overnight stay in Netherlands"
            },
            {
                "day": 5,
                "title": "Netherlands Highlights",
                "content": "• Visit Keukenhof Gardens (tulips) or Madurodam (miniature park)\n• Visit Zaanse Schans village, Cheese & Clog Factory, and windwills\n• Amsterdam Canal Cruise through historic canals\n• Overnight stay in Netherlands"
            },
            {
                "day": 6,
                "title": "Luxembourg to Strasbourg",
                "content": "• Scenic Tram Ride through Luxembourg city and walking tour\n• Orientation tour of Strasbourg and photo stop at European Parliament\n• Overnight stay in France/Germany"
            },
            {
                "day": 7,
                "title": "Welcome to Switzerland",
                "content": "• Scenic drive into the Swiss Alps\n• Arrival and check-in to your hotel in Switzerland\n• Evening at leisure to enjoy the mountain breeze"
            },
            {
                "day": 8,
                "title": "Mount Titlis / Interlaken",
                "content": "• Breathtaking cable car ride to Mount Titlis\n• Experience the Ice Flyer and Glacier Cave\n• Visit the charming town of Interlaken"
            },
            {
                "day": 9,
                "title": "Jungfraujoch - Top of Europe",
                "content": "• Highly recommended optional tour to Jungfraujoch\n• Witness the spectacular Aletsch Glacier\n• Return to hotel for a relaxing overnight stay"
            },
            {
                "day": 10,
                "title": "Departure",
                "content": "• Breakfast at the hotel\n• Checkout and transfer to the airport for your onward journey"
            }
        ]
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // --- Header Scroll Effect ---
    const header = document.querySelector('header');
    if (header) {
        window.addEventListener('scroll', () => {
            header.classList.toggle('scrolled', window.scrollY > 50);
        });
    }

    // --- Custom Cursor ---
    const existingCursor = document.querySelector('.custom-cursor');
    const cursor = existingCursor || document.createElement('div');
    if (!existingCursor) {
        cursor.className = 'custom-cursor';
        document.body.appendChild(cursor);
    }

    document.addEventListener('mousemove', (e) => {
        gsap.to(cursor, {
            x: e.clientX,
            y: e.clientY,
            duration: 0.1
        });
    });

    // --- Mobile Nav Logic ---
    const mobileToggle = document.querySelector('.mobile-nav-toggle');
    const nav = document.querySelector('header nav');
    const navLinks = document.querySelectorAll('header nav ul li a');

    mobileToggle.addEventListener('click', () => {
        mobileToggle.classList.toggle('active');
        nav.classList.toggle('active');
        document.body.style.overflow = nav.classList.contains('active') ? 'hidden' : 'auto';
    });

    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileToggle.classList.remove('active');
            nav.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    });

    // --- ScrollSpy / Active Nav Highlight ---
    const sections = document.querySelectorAll('section[id], footer[id]');

    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.3 // Trigger when 30% of the section is visible
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                // Remove highlight from all links
                document.querySelectorAll('header nav ul li a').forEach(link => {
                    link.classList.remove('nav-highlight');
                    // Add highlight if the href matches the intersecting section id
                    if (link.getAttribute('href') === `#${id}` || link.getAttribute('href') === `index.html#${id}`) {
                        link.classList.add('nav-highlight');
                    }
                });
            }
        });
    }, observerOptions);

    sections.forEach(section => {
        observer.observe(section);
    });

    // --- PREMIUM CINEMATIC HERO LOGIC ---
    const heroScroll = document.querySelector('.hero-scroll-container');
    if (heroScroll) {
        const cards = gsap.utils.toArray('.card-float');
        const textBlocks = gsap.utils.toArray('.text-block');

        // 1. Intro Animation (Page Load)
        const introTl = gsap.timeline({
            defaults: { ease: "expo.out", duration: 2.2 }
        });

        // Initial Set
        gsap.set('.card-1, .card-2', { x: -window.innerWidth * 0.8, opacity: 0, rotate: -25 });
        gsap.set('.card-3, .card-4', { x: window.innerWidth * 0.8, opacity: 0, rotate: 25 });
        gsap.set('.main-title', { opacity: 0, scale: 0.9, filter: 'blur(20px)' });

        introTl
            .to('.main-title', { opacity: 1, scale: 1, filter: 'blur(0px)', duration: 2.5, delay: 0.5 })
            .to('.hero-subtitle', { opacity: 1, y: 0, duration: 1.5 }, "-=1.5")
            .to(cards, {
                x: (i) => {
                    const isMobile = window.innerWidth <= 768;
                    const positions = isMobile ? [
                        -window.innerWidth * 0.26,
                        -window.innerWidth * 0.08,
                        window.innerWidth * 0.08,
                        window.innerWidth * 0.26
                    ] : [
                        -window.innerWidth * 0.25,
                        -window.innerWidth * 0.08,
                        window.innerWidth * 0.12,
                        window.innerWidth * 0.28
                    ];
                    return positions[i];
                },
                y: (i) => {
                    const isMobile = window.innerWidth <= 768;
                    return isMobile ? [-80, 50, -60, 70][i] : [-140, 100, -120, 130][i];
                },
                rotate: (i) => [-15, 6, -8, 14][i],
                opacity: 1,
                scale: 1,
                stagger: 0.12
            }, "-=2.2");

        // 2. Scroll Parallax
        const scrollTl = gsap.timeline({
            scrollTrigger: {
                trigger: heroScroll,
                start: "top top",
                end: "bottom top",
                scrub: 1.5,
            }
        });

        const bgMedia = document.querySelector('.hero-bg-media');
        if (bgMedia) scrollTl.to(bgMedia, { scale: 1.25, filter: 'brightness(0.3) blur(2px)' }, 0);

        const mainTitle = document.querySelector('.main-title');
        if (mainTitle) scrollTl.to(mainTitle, { y: -100, opacity: 0.2, scale: 0.9, filter: 'blur(10px)' }, 0);

        cards.forEach((card, i) => {
            scrollTl.to(card, {
                y: (i % 2 === 0) ? "-=400" : "+=400",
                x: (i % 2 === 0) ? "+=100" : "-=100",
                rotate: (i % 2 === 0) ? "+=15" : "-=15",
                ease: "none"
            }, 0);
        });

        // 3. Luxurious Continuous Floating Motion
        // 3. Luxurious Continuous Floating Motion
        cards.forEach((card, i) => {
            gsap.to(card, {
                y: "+=30",
                rotation: "+=3",
                duration: 3 + Math.random() * 2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut",
                delay: i * 0.3
            });

            card.addEventListener('click', () => {
                const destId = card.getAttribute('data-dest');

                // Navigate to Packages Section
                const pkgSection = document.getElementById('packages');
                if (pkgSection) {
                    pkgSection.scrollIntoView({ behavior: 'smooth' });

                    // Slightly delay to allow rendering and scroll
                    setTimeout(() => {
                        const targetCard = document.querySelector(`.flip-card[data-id="${destId}"]`);
                        if (targetCard) {
                            // Focus effect
                            targetCard.style.boxShadow = '0 0 50px rgba(212, 175, 55, 0.5)';

                            // Flip it if not already flipped
                            if (!targetCard.classList.contains('flipped')) {
                                targetCard.classList.add('flipped');
                            }

                            setTimeout(() => {
                                targetCard.style.boxShadow = '';
                            }, 2000);
                        }
                    }, 800);
                } else {
                    window.location.href = `package-details.html?id=${destId}`;
                }
            });
        });

        // --- Interactive Hero Cards ---
        cards.forEach(card => {
            card.style.cursor = 'pointer';
        });
    }

    // --- Stats Counter Animation ---
    gsap.utils.toArray('.counter').forEach(counter => {
        const target = +counter.getAttribute('data-target');
        gsap.to(counter, {
            scrollTrigger: {
                trigger: counter,
                start: 'top 95%'
            },
            innerText: target,
            duration: 2.5,
            snap: { innerText: 1 },
            ease: 'power3.out',
            onUpdate: function () {
                const val = Math.round(this.targets()[0].innerText);
                this.targets()[0].innerText = val;
            }
        });
    });

    // --- Premium Scroll Reveals ---
    gsap.utils.toArray('section').forEach(section => {
        if (section.classList.contains('hero-sticky')) return;

        const revealElements = section.querySelectorAll('.container > *, .stat-card, .about-visual, .about-text-content, .feature-card-lux, .travel-card, .gallery-box');

        gsap.from(revealElements, {
            scrollTrigger: {
                trigger: section,
                start: 'top 100%'
            },
            y: 0,
            scale: 0.99,
            opacity: 0,
            duration: 0.6,
            stagger: 0.03,
            ease: 'power2.out'
        });
    });

    // --- Infinite Gallery Cycle ---
    const galleryTrack = document.querySelector('.gallery-track');
    if (galleryTrack) {
        const scrollWidth = galleryTrack.scrollWidth;
        const animation = gsap.to(galleryTrack, {
            x: -scrollWidth / 2,
            duration: 30, // Adjust speed here (higher = slower)
            ease: "none",
            repeat: -1,
            onRepeat: () => {
                gsap.set(galleryTrack, { x: 0 });
            }
        });

        galleryTrack.addEventListener('mouseenter', () => animation.pause());
        galleryTrack.addEventListener('mouseleave', () => animation.play());
    }

    // --- Package Data & Modal ---
    const packageData = window.packageData;

    window.openPackage = function (id) {
        const pkg = packageData[id];
        if (!pkg) return;

        const modal = document.getElementById('package-modal');
        const details = document.getElementById('modal-details');

        details.innerHTML = `
            <div class="modal-header">
                <h2>${pkg.title}</h2>
                <p class="modal-subtitle">Premium Experience</p>
                
                <div class="itinerary-list" style="margin-top: 20px;">
                    ${pkg.itinerary.map((item, index) => `
                        <div class="itinerary-item" style="padding: 10px 0;">
                            <div class="item-day-tag" style="padding: 5px 12px; font-size: 0.75rem;">
                                ${item.day ? 'DAY 0' + item.day : 'INFO'}
                            </div>
                            <div class="item-details">
                                <h4 style="font-size: 0.95rem; margin-bottom: 3px;">Experience Highlight</h4>
                                <p style="font-size: 0.85rem; opacity: 0.8; line-height: 1.5;">${item.content}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="modal-stats-grid">
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Duration</span>
                        <span class="modal-stat-value">3 - 7 Days</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Group Size</span>
                        <span class="modal-stat-value">Customizable</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Category</span>
                        <span class="modal-stat-value">Luxury</span>
                    </div>
                </div>

                <a href="https://wa.me/919048099499?text=Hello%20Nightingale%20Holidays%2C%20I'm%20interested%20in%20the%20${encodeURIComponent(pkg.title)}." 
                   class="modal-book-btn" target="_blank" onclick="closeModal()">
                    Enquire on WhatsApp <i class="fab fa-whatsapp" style="margin-left: 10px;"></i>
                </a>
            </div>
        `;

        modal.style.display = 'block';
        gsap.from('#package-modal .modal-content', {
            scale: 0.8,
            opacity: 0,
            duration: 0.6,
            ease: 'back.out(1.7)'
        });
        document.body.style.overflow = 'hidden';
    };

    // --- Modal Closing Logic ---
    const closeModal = window.closeModal = function () {
        document.getElementById('package-modal').style.display = 'none';
        document.body.style.overflow = 'auto';
    };

    const closeBtn = document.querySelector('.close-modal');
    if (closeBtn) closeBtn.addEventListener('click', closeModal);

    window.addEventListener('click', (e) => {
        const modal = document.getElementById('package-modal');
        if (e.target === modal) closeModal();
    });
});
